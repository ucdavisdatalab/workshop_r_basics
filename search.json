[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "R Basics",
    "section": "",
    "text": "Overview\nThis 4-part workshop series provides an introduction to using the R programming language for reproducible data analysis and scientific computing. Topics include programming basics, how to work with tabular data, how to break down programming problems, and how to organize code for clarity and reproducibility.\nAfter this workshop, learners will be able to load tabular data sets into R, compute simple summaries and visualizations, do common data-tidying tasks, write reusable functions, and identify where to go to learn more.\nNo prior programming experience is necessary. All learners will need access to an internet-connected computer and the latest version of R and RStudio. For sessions presented online, learners will also need the latest version of Zoom.",
    "crumbs": [
      "Overview"
    ]
  },
  {
    "objectID": "chapters/01_getting-started.html",
    "href": "chapters/01_getting-started.html",
    "title": "1  Getting Started",
    "section": "",
    "text": "1.1 Why R?\nR is a programming language for statistical computing and graphics. It provides a rich set of built-in tools for cleaning, exploring, modeling, and visualizing data.\nCompared to other programming languages, some of R’s particular strengths are its:\nThe main way you’ll interact with R is by writing R code or expressions. We’ll explain more soon, but first we need to install R and associated software.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Getting Started</span>"
    ]
  },
  {
    "objectID": "chapters/01_getting-started.html#why-r",
    "href": "chapters/01_getting-started.html#why-r",
    "title": "1  Getting Started",
    "section": "",
    "text": "NoteWhy should you use a programming language?\n\n\n\nCode you write is reproducible: you can share it with someone else, and if they run it with the same inputs, they’ll get the same results. By writing code, you create an unambiguous record of every step taken in your analysis. This is one of the major advantages of programming languages over point-and-click software like Tableau or Microsoft Excel.\nAnother advantage of writing code is that it’s often reusable. This means you can:\n\nAutomate repetitive tasks within an analysis\nRecycle code from one analysis into another\nPackage useful code for distribution to your colleagues or the general public\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nThe term “R” can mean the R language (the code) or the R interpreter (the software which runs the code). Most of the time, the meaning is clear from the context, but we’ll be explicit in cases where the distinction is important.\n\n\n\n\nInteractive interpreter and debugger\nFocus on statistical computing\n\nMany statistical estimators, tests, and models are built-in\nStatisticians tend to implement new methods in R first\n\nOver 23,000 community-developed packages: reusable bundles of code, often accompanied by documentation, examples, or data sets\nFunctions and packages for creating high-quality data visualizations\nFlexible support for many different programming abstractions and paradigms\n\n\n\n\n\n\n\n\nImportant\n\n\n\nTo follow along with this and subsequent chapters, you’ll need a recent version of R.\nClick here to download the R installer. When the download is complete, run the installer to install (or update) R on your computer. We recommend keeping the installer’s default settings.\nIn addition to R, you’ll need a recent version of RStudio. RStudio is an integrated development environment (IDE), which means it’s a comprehensive program for writing, editing, searching, and running code. You can do all of these things without RStudio, but RStudio makes the process easier.\nClick here to download the free RStudio Desktop installer. When the download is complete, run the installer to install RStudio Deskop on your computer.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Getting Started</span>"
    ]
  },
  {
    "objectID": "chapters/01_getting-started.html#the-rstudio-interface",
    "href": "chapters/01_getting-started.html#the-rstudio-interface",
    "title": "1  Getting Started",
    "section": "1.2 The RStudio Interface",
    "text": "1.2 The RStudio Interface\nThe first time you open RStudio, you’ll see a window divided into several panes, like this:\n\n\n\nHow RStudio typically looks the first time you open it. Don’t worry if the text in the panes isn’t exactly the same on your computer: it depends on your operating system and versions of R and RStudio.\n\n\nThe console pane, on the left, is the main interface to R. If you type R code into the console and press the Enter key on your keyboard, R will run your code and return the result.\nOn the right are the environment pane and the plots pane. The environment pane shows data in your R workspace. The plots pane shows any plots you make, and also has tabs to browse your file system and to view R’s built-in help files. You’ll learn more about these gradually, but for now, focus on the console pane.\nLet’s start by using R to do some arithmetic. In the console, you’ll see that the cursor is on a line that begins with &gt;, called the prompt. You can make R compute the sum \\(2 + 2\\) by typing the code 2 + 2 after the prompt and then pressing the Enter key. Your code and the result from R should look like this:\n\nR always puts the result on a separate line (or lines) from your code. In this case, the result begins with the tag [1], which is a hint from R that the result is a vector and that this line starts with the element at position 1. You’ll learn more about vectors in Section 2.1, and eventually learn about other data types that are displayed differently. The result of the sum, 4, is displayed after the tag.\nIf you enter an incomplete expression, R will change the prompt to +, then wait for you to type the rest of the expression and press the Enter key. Here’s what it looks like if you only enter 2 +:\n\nYou can finish entering the expression, or you can cancel it by pressing the Esc key (or Ctrl-c if you’re using R without RStudio). R can only tell an expression is incomplete if it’s missing something, like the second operand in 2 +. So if you mean to enter 2 + 2 but accidentally enter 2, which is a complete expression by itself, don’t expect R to read your mind and wait for more input!",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Getting Started</span>"
    ]
  },
  {
    "objectID": "chapters/01_getting-started.html#r-basics",
    "href": "chapters/01_getting-started.html#r-basics",
    "title": "1  Getting Started",
    "section": "1.3 R Basics",
    "text": "1.3 R Basics\nTry out some other arithmetic in the R console. Besides + for addition, the other arithmetic operators are:\n\n- for subtraction\n* for multiplication\n/ for division\n%% for remainder division (modulo)\n^ or ** for exponentiation\n\nYou can combine these and use parentheses to make more complicated expressions, just as you would when writing a mathematical expression. When R computes a result, it follows the standard order of operations: parentheses, exponentiation, multiplication, division, addition, and finally subtraction. For example, to estimate the area of a circle with radius 3, you can write:\n\n3.14 * 3^2\n\n[1] 28.26\n\n\nYou can write R expressions with any number of spaces (including none) around the operators and R will still compute the result.\n\n\n\n\n\n\nTip\n\n\n\nUse spaces!\nAs with writing text, putting spaces in your code makes it easier for you and others to read, so it’s good to make it a habit. Put a single space on each side of most operators, after commas, and after keywords.\n\n\n\n1.3.1 Variables\nSince R is designed for mathematics and statistics, you might expect that it provides a better appoximation for \\(\\pi\\) than 3.14. R and most other programming languages allow you to create named values, or variables. R provides a built-in variable called pi for the value of \\(\\pi\\). You can display a variable’s value by entering its name in the console:\n\npi\n\n[1] 3.141593\n\n\nYou can also use variables in expressions. For instance, here’s a more precise expression for the area of a circle with radius 3:\n\npi * 3^2\n\n[1] 28.27433\n\n\nYou can create a variable with the assignment operator = by writing a name on the left-hand side and a value or expression on the right-hand side. For example, to save the area of the circle in a variable called area, you can write:\n\narea = pi * 3^2\n\n\n\n\n\n\n\nNote\n\n\n\nYou can use the arrow operator &lt;- instead of the assignment operator:\n\narea &lt;- pi * 3^2\n\nIn most cases, the two operators are interchangeable. For clarity, it’s best to choose one you like and use it consistently in all of your R code. In this reader, we use = because it’s the assignment operator in most programming languages and it’s easier to type.\n\n\nIn R, variable names can contain any combination of letters and dots (.). Names can also include numbers and underscores (_), but can’t start with a them. Spaces and other symbols are not allowed in variable names. So geese, top50.dogs, and nine_lives are valid variable names, but goose teeth, _fishes, and 9lives are not.\nThe main reason to use variables is to temporarily save results from expressions so that you can use them in other expressions. For instance, now you can use the area variable anywhere you want the area of the circle.\nNotice that when you assign a result to a variable, R doesn’t automatically display that result. If you want to see the result as well, you have to enter the variable’s name as a separate expression:\n\narea\n\n[1] 28.27433\n\n\nAnother reason to use variables is to make an expression clearer and more general. For instance, you might want to compute the area of several circles with different radii. Then the expression pi * 3^2 is too specific. Instead, you can create a variable r, then rewrite the expression as pi * r^2. This makes the expression easier to understand, because the reader doesn’t have to intuit that 3 is the radius in the formula. Here’s the code to compute and display the area of a circle with radius 1 this way:\n\nr = 1\narea = pi * r^2\narea\n\n[1] 3.141593\n\n\nNow if you want to compute the area for a different radius, all you have to do is change r and run the code again (R will not change area until you do this). Writing code that’s general enough to reuse across multiple problems can be a big time-saver in the long run. Later on, you’ll learn ways to make this code even easier to reuse.\n\n\n\n\n\n\nTip\n\n\n\nTry to choose descriptive variable names, so that you and your collaborators can understand the meaning and purpose of each variable when reading the code.\n\n\n\n\n1.3.2 Strings\nR treats anything inside single or double quotes as literal text rather than as an expression to evaluate. In programming jargon, a piece of literal text is called a string. You can use whichever kind of quotes you prefer, but the quote at the beginning of the string must match the quote at the end.\n\n'Hi'\n\n[1] \"Hi\"\n\n\"Hello!\"\n\n[1] \"Hello!\"\n\n\nNumbers and strings are not the same thing, so for example R considers 1 different from \"1\". As a result, you can’t use strings with most of R’s arithmetic operators. For instance, this code causes an error:\n\n\"1\" + 3\n\nError in \"1\" + 3: non-numeric argument to binary operator\n\n\nThe error message notes that + is not defined for non-numeric values.\n\n\n1.3.3 Comparisons\nBesides arithmetic, you can also use R to compare values. Programming tasks often involve comparing values. Use comparison operators to do so:\n\n&lt; for “less than”\n&gt; for “greater than”\n&lt;= for “less than or equal to”\n&gt;= for “greater than or equal to”\n== for “equal to”\n!= for “not equal to”\n\nNotice that the “equal to” operator is two equal signs. This is to distinguish it from the assignment operator =.\nLet’s look at a few examples:\n\n1.5 &lt; 3\n\n[1] TRUE\n\n\"a\" &gt; \"b\"\n\n[1] FALSE\n\npi == 3.14\n\n[1] FALSE\n\n\"hi\" == 'hi'\n\n[1] TRUE\n\n\nWhen you make a comparison, R returns a logical value, TRUE or FALSE, to indicate the result. Logical values are not the same as strings, so they are not quoted.\nLogical values are values, so you can use them in other computations. For example:\n\nTRUE\n\n[1] TRUE\n\nTRUE == FALSE\n\n[1] FALSE\n\n\nSection 2.4.5 describes more ways to use and combine logical values.\n\n\n\n\n\n\nWarning\n\n\n\nSome of R’s equality operators return TRUE even when comparing two different types of data:\n\n\"1\" == 1\n\n[1] TRUE\n\n\"TRUE\" &lt;= TRUE\n\n[1] TRUE\n\n\"FALSE\" &lt;= TRUE\n\n[1] TRUE\n\n\nSection 2.2.2 explains why this happens, and Section 5.1 explains several other ways to compare values.\n\n\n\n\n1.3.4 Calling Functions\nR can do a lot more than just arithmetic. Most of R’s features are provided through functions, pieces of reusable code. You can think of a function as a machine that takes some inputs and uses them to produce some output. In programming jargon, the inputs to a function are called arguments, the output is called the return value, and when you use a function, you’re calling the function.\nTo call a function, write its name followed by parentheses. Put any arguments to the function inside the parentheses. For example, the function to round a number to a specified decimal place is named round. So you can round the number 8.153 to the nearest integer with this code:\n\nround(8.153)\n\n[1] 8\n\n\nMany functions accept more than one argument. For instance, the round function accepts at least two arguments: the number to round and the number of decimal places to keep. When you call a function with multiple arguments, separate the arguments with commas. So to round 8.153 to 1 decimal place:\n\nround(8.153, 1)\n\n[1] 8.2\n\n\nWhen you call a function, R assigns the arguments to the function’s parameter. Parameters are special variables that represent the inputs to a function and only exist while that function runs. For example, the round function has parameters x and digits. The next section, Section 1.4, explains how to look up the parameters of a function.\nSome parameters have default arguments. A parameter is automatically assigned its default argument whenever the parameter’s argument is not specified explicitly. As a result, assigning arguments to these parameters is optional. For instance, the digits parameter of round has a default argument (round to the nearest integer), so it’s okay to call round without setting digits, as in round(8.153). In contrast, the x parameter doesn’t have a default argument. Section 1.4 explains how to look up the default arguments for a function.\nBy default, R assigns arguments to parameters based on their position. The first argument is assigned to the function’s first parameter, the second to the second, and so on. So in the code above, 8.153 is assigned to x and 1 is assigned to digits.\nYou can also assign arguments to parameters by name with = (not &lt;-), overriding their positions. So some other ways you could write the call above are:\n\nround(8.153, digits = 1)\n\n[1] 8.2\n\nround(x = 8.153, digits = 1)\n\n[1] 8.2\n\nround(digits = 1, x = 8.153)\n\n[1] 8.2\n\n\nAll of these are equivalent. When you write code, choose whatever seems the clearest to you. Leaving parameter names out of calls saves typing, but including some or all of them can make the code easier to understand.\nParameters are not regular variables, and only exist while their associated function runs. You can’t set them before a call, nor can you access them after a call. So this code causes an error:\n\nx = 4.755\nround(digits = 2)\n\nError in round(digits = 2): argument \"x\" is missing, with no default\n\n\nIn the error message, R says that you forgot to assign an argument to the parameter x. You can keep the variable x and correct the call by making x an argument (for the parameter x):\n\nround(x, digits = 2)\n\n[1] 4.76\n\n\nOr, written more explicitly:\n\nround(x = x, digits = 2)\n\n[1] 4.76\n\n\nThe point is that variables and parameters are distinct, even if they happen to have the same name. The variable x is not the same thing as the parameter x.\n\n\n1.3.5 Comments\nIn R and most other programming languages, you can mark parts of your code as comments: expressions to ignore rather than run. Use comments to plan, explain, and document your code. You can also temporarily “comment out” code to prevent it from running, which is often helpful for testing and debugging.\nR comments begin with number sign # and extend to the end of the line:\n\n# This is a comment.\n\nR will ignore comments when you run your code.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Getting Started</span>"
    ]
  },
  {
    "objectID": "chapters/01_getting-started.html#sec-getting-help",
    "href": "chapters/01_getting-started.html#sec-getting-help",
    "title": "1  Getting Started",
    "section": "1.4 Getting Help",
    "text": "1.4 Getting Help\nLearning and using a language is hard, so it’s important to know how to get help. The first place to look for help is R’s built-in documentation. In the console, you can access a specific help page by name with ? followed by the name of the page.\nThere are help pages for all of R’s built-in functions, usually with the same name as the function itself. So the code to open the help page for the round function is:\n\n?round\n\nFor functions, help pages usually include a brief description, a list of parameters, a description of the return value, and some examples. The help page for round shows that there are two parameters x and digits. It also says that digits = 0, meaning the default argument for digits is 0.\nThere are also help pages for other topics, such as built-in mathematical constants (such as ?pi), data sets (such as ?iris), and operators. To look up the help page for an operator, put the operator’s name in single or double quotes. For example, this code opens the help page for the arithmetic operators:\n\n?\"+\"\n\nIt’s always okay to put quotes around the name of the page when you use ?, but they’re only required if it contains non-alphabetic characters. So ?sqrt, ?'sqrt', and ?\"sqrt\" all open the documentation for sqrt, the square root function.\nSometimes you might not know the name of the help page you want to look up. You can do a general search of R’s help pages with ?? followed by a string of search terms. For example, to get a list of all help pages related to linear models:\n\n??\"linear model\"\n\nThis search function doesn’t always work well, and it’s often more efficient to use an online search engine. When you search for help with R online, include “R” as a search term. Alternatively, you can use RSeek, which restricts the search to a selection of R-related websites.\n\n1.4.1 When Something Goes Wrong\nAs a programmer, sooner or later you’ll run some code and get an error message or result you didn’t expect. Don’t panic! Even experienced programmers make mistakes regularly, so learning how to diagnose and fix problems is vital.\nTry going through these steps:\n\nIf R returned a warning or error message, read it! If you’re not sure what the message means, try searching for it online.\nCheck your code for typographical errors, including incorrect capitalization and missing or extra commas, quotes, and parentheses.\nTest your code one line at a time, starting from the beginning. After each line that assigns a variable, check that the value of the variable is what you expect. Try to determine the exact line where the problem originates (which may differ from the line that emits an error!).\n\nIf none of these steps help, try asking online. Stack Overflow is a popular question and answer website for programmers. Before posting, make sure to read about how to ask a good question.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Getting Started</span>"
    ]
  },
  {
    "objectID": "chapters/01_getting-started.html#file-systems",
    "href": "chapters/01_getting-started.html#file-systems",
    "title": "1  Getting Started",
    "section": "1.5 File Systems",
    "text": "1.5 File Systems\nThis section is a review of how files on a computer work. You’ll need to understand this in order to read a data set from a file, and it’s also important for finding your saved notebooks and modules later.\nYour computer’s file system consists of files (chunks of data) and directories (or “folders”) that organize those files. For instance, the file system on a computer shared by Ada and Charles, two pioneers of computing, might look like this:\n\n\n\nA typical file system. Don’t worry if your file system looks a bit different from the picture.\n\n\nFile systems have a tree-like structure, with a top-level directory called the root directory. On Ada and Charles’ computer, the root is called /, which is also what it’s called on all macOS and Linux computers. On Windows, the root is usually called C:/, but sometimes other letters, like D:/, are also used depending on the computer’s hardware.\nA path is a list of directories that leads to a specific file or directory on a file system (imagine giving directons to someone as they walk through the file system). Use forward slashes / to separate the directories in a path. The root directory includes a forward slash as part of its name, and doesn’t need an extra one.\nFor example, suppose Ada wants to write a path to the file cats.csv. She can write the path like this:\n/Users/ada/cats.csv\nYou can read this path from left-to-right as, “Starting from the root directory, go to the Users directory, then from there go to the ada directory, and from there go to the file cats.csv.” Alternatively, you can read the path from right-to-left as, “The file cats.csv inside of the ada directory, which is inside of the Users directory, which is in the root directory.”\nAs another example, suppose Charles wants a path to the Programs directory. He can write:\n/Programs/\nThe / at the end of this path is reminder that Programs is a directory, not a file. Charles could also write the path like this:\n/Programs\nThis is still correct, but it’s not as obvious that Programs is a directory. In other words, when a path leads to a directory, including a trailing slash is optional, but makes the meaning of the path clearer. Paths that lead to files never have a trailing slash.\n\n\n\n\n\n\nWarning\n\n\n\nOn Windows, the components of a path are conventionally separated with backslashes \\ instead of forward slashes /.\nRegardless of the operating system, R uses forward slashes / to separate components of paths. In other words, you should use paths separated by with forward slashes in your R code, even on Windows. This is especially convenient when you want to share code with other people, because they might use a different operating system than you.\n\n\n\n1.5.1 Absolute & Relative Paths\nA path that starts from the root directory, like all of the ones we’ve seen so far, is called an absolute path. The path is “absolute” because it unambiguously describes where a file or directory is located. The downside is that absolute paths usually don’t work well if you share your code.\nFor example, suppose Ada uses the path /Programs/ada/cats.csv to load the cats.csv file in her code. If she shares her code with another pioneer of computing, say Gladys, who also has a copy of cats.csv, it might not work. Even though Gladys has the file, she might not have it in a directory called ada, and might not even have a directory called ada on her computer. Because Ada used an absolute path, her code works on her own computer, but isn’t portable to others.\nOn the other hand, a relative path is one that doesn’t start from the root directory. The path is “relative” to an unspecified starting point, which usually depends on the context.\nFor instance, suppose Ada’s code is saved in the file analysis.R, which is in the same directory as cats.csv on her computer. Then instead of an absolute path, she can use a relative path in her code:\ncats.csv\nThe context is the location of analysis.R, the file that contains the code. In other words, the starting point on Ada’s computer is the ada directory. On other computers, the starting point will be different, depending on where the code is stored.\nNow suppose Ada sends her corrected code in analysis.R to Gladys, and tells Gladys to put it in the same directory as cats.csv. Since the path cats.csv is relative, the code will still work on Gladys’ computer, as long as the two files are in the same directory. The name of that directory and its location in the file system don’t matter, and don’t have to be the same as on Ada’s computer. Gladys can put the files in a directory /Users/gladys/from_ada/ and the path (and code) will still work.\nRelative paths can include directories. For example, suppose that Charles wants to write a relative path from the Users directory to a cool selfie he took. Then he can write:\ncharles/cool_hair_selfie.jpg\nYou can read this path as, “Starting from wherever you are, go to the charles directory, and from there go to the cool_hair_selfie.jpg file.” In other words, the relative path depends on the context of the code or program that uses it.\n\n\n\n\n\n\nTip\n\n\n\nWhen use you paths in code, they should almost always be relative paths. This ensures that the code is portable to other computers, which is an important aspect of reproducibility. Another benefit is that relative paths tend to be shorter, making your code easier to read (and write).\n\n\nWhen you write paths, there are three shortcuts you can use. These are most useful in relative paths, but also work in absolute paths:\n\n. means the current directory.\n.. means the directory above the current directory.\n~ means the home directory. Each user has their own home directory, whose location depends on the operating system and their username. Home directories are typically C:/Users/ on Windows, /Users/ on macOS, and /home/ on Linux.\n\nAs an example, suppose Ada wants to write a (relative) path from the ada directory to Charles’ cool selfie. Using these shorcuts, she can write:\n../charles/cool_hair_selfie.jpg\nRead this as, “Starting from wherever you are, go up one directory, then go to the charles directory, and then go to the cool_hair_selfie.jpg file.” Since /Users/ada is Ada’s home directory, she could also write the path as:\n~/../charles/cool_hair_selfie.jpg\nThis path has the same effect, but the meaning is slightly different. You can read it as “Starting from your home directory, go up one directory, then go to the charles directory, and then go to the cool_hair_selfie.jpg file.”\nThe .. and ~ shortcut are frequently used and worth remembering. The . shortcut is included here in case you see it in someone else’s code. Since it means the current directory, a path like ./cats.csv is identical to cats.csv, and the latter is preferable for being simpler. There are a few specific situations where . is necessary, but they fall outside the scope of this text.\n\n\n1.5.2 The Working Directory\nSection 1.5.1 explained that relative paths have a starting point that depends on the context where the path is used. The working directory is the starting point R uses for relative paths. Think of the working directory as the directory R is currently “at” or watching.\nThe function getwd returns the absolute path for the current working directory, as a string. It doesn’t require any arguments:\n\ngetwd()\n\n[1] \"/home/nick/mill/datalab/teaching/r_basics\"\n\n\nOn your computer, the output from getwd will likely be different. This is a very useful function for getting your bearings when you write relative paths. If you write a relative path and it doesn’t work as expected, the first thing to do is check the working directory.\nThe related setwd function changes the working directory. It takes one argument: a path to the new working directory. Here’s an example:\n\nsetwd(\"..\")\n\n# Now check the working directory.\ngetwd()\n\n\n\n\n\n\n\nWarning\n\n\n\nIn your R scripts and notebooks, avoid calls to setwd. They make your code more difficult to understand and to run on other computers. Use appropriate relative paths instead.\nIn the R console, it’s okay to occasionally use setwd. You might need to change the working directory before you run some code. R’s default working directory is your home directory. In some cases, such as when you open a project, RStudio will automatically change the working directory. However, it doesn’t always change the working directory, so setwd is sometimes still necessary.\n\n\nAnother function that’s useful for dealing with the working directory and file system is list.files. The list.files function returns the names of all of the files and directories inside of a directory. It accepts a path to a directory as an argument, or assumes the working directory if you don’t pass a path. For instance:\n\n# List files and directories in /home/.\nlist.files(\"/home/\")\n\n[1] \"lost+found\" \"nick\"      \n\n# List files and directories in the working directory.\nlist.files()\n\n [1] \"_build\"          \"_freeze\"         \"_quarto.yml\"     \"assessment\"     \n [5] \"chapters\"        \"CONTRIBUTING.md\" \"data\"            \"images\"         \n [9] \"index.html\"      \"index.qmd\"       \"LICENSE\"         \"notes\"          \n[13] \"pixi.lock\"       \"pixi.toml\"       \"R\"               \"README.md\"      \n[17] \"site_libs\"      \n\n\nAs usual, since you have a different computer, you’re likely to see different output if you run this code. If you call list.files with an invalid path or an empty directory, the output is character(0):\n\nlist.files(\"/this/path/is/fake/\")\n\ncharacter(0)\n\n\nLater on, you’ll learn about what character(0) means more generally.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Getting Started</span>"
    ]
  },
  {
    "objectID": "chapters/01_getting-started.html#saving-loading-code",
    "href": "chapters/01_getting-started.html#saving-loading-code",
    "title": "1  Getting Started",
    "section": "1.6 Saving & Loading Code",
    "text": "1.6 Saving & Loading Code\n\n\n\n\n\n\nTip\n\n\n\nWhen you start a new project, it’s a good idea to create a specific directory for all of the project’s files. If you’re using R, you should also store your R code in that directory. As you work, periodically save your code.\n\n\nMost of the time, you won’t just write code directly into the R console. Reproducibility and reusability are important benefits of R over point-and-click software, and in order to realize these, you have to save your code to your computer’s hard drive.\nThe most common way to save R code is as an R script with the extension .R (see Section 1.7 for more about extensions). Editing a script is similar to editing any other text file. You can write, delete, copy, cut, and paste code.\nIn RStudio, you can create a new R script with this menu option:\nFile -&gt; New File -&gt; R Script\nThis will open a new pane in RStudio, like this:\n\n\n\nHow RStudio typically looks after opening a new R Script.\n\n\nThe new pane is the scripts pane, which displays all of the R scripts you’re editing. Each script appears in a separate tab. In the screenshot, only one script, the new script, is open.\nEvery line in an R script must be valid R code. Anything else you want to write in the script (notes, documentation, etc.) must be placed in a comment.\nArrange your code in the order of the steps to solve the problem, even if you write some parts before others. Comment out or delete any lines of code that you try but ultimately decide you don’t need. Make sure to save the file periodically so that you don’t lose your work. Following these guidelines will help you stay organized and make it easier to share your code with others later.\n\n\n\n\n\n\nTip\n\n\n\nWhile editing, you can run the current line in the R console by pressing Ctrl-Enter on Windows and Linux, or Cmd-Enter on macOS. This way you can test and correct your code as you write it.\n\n\n\n1.6.1 Running Scripts\nYou can source (that is, run) an entire R script by calling the source function with the path to the script as an argument. This is also what the “Source on Save” check box refers to in RStudio. The code runs in order, only stopping if an error occurs.\nFor instance, if you save the script as my_cool_script.R, then you can enter source(\"my_cool_script.R\") in the console to run the entire script. Pay attention to the path—it may be different on your computer.\n\n\n1.6.2 Notebooks: Quarto & R Markdown\nIn the context of data science, a notebook is an interactive file that can store a mix of code, formatted text, and images. With a notebook, you can write, run code, and view results all in one place. Viewing and editing a notebook requires a web browser or IDE. Some notebooks can also be converted to static documents, such as PDFs. Comments are a good way keep notes as you develop and run your code, but notebooks provide much more flexibility of expression. Notebooks are a kind of literate programming.\nNotebooks excel when you want to do highly interactive work and/or want to communicate results. Use notebooks to prototype code, analyze data, refine plots, generate documents and presentations, and practice programming. Scripts excel when you want to reuse code (and perhaps share it as a package) or want to run code that doesn’t require much user interaction (such as time-consuming computations you’ll run on a server or high-performance computing cluster). The remainder of this reader assumes you’re using an R script rather than the R console or a notebook, unless otherwise noted.\nQuarto is a popular notebook format and system for R. It also supports Python, Julia, and other programming languages. Quarto files have the extension .qmd. Quarto is based on an older notebook format, R Markdown, which only supports R and can’t be converted to as many kinds of documents. R Markdown is still widely used. R Markdown files have the extension .Rmd.\n\n\n\n\n\n\nImportant\n\n\n\nIn order to use Quarto, you must first download and install it. It is not included with R or RStudio.\n\n\nAfter installing Quarto, you can create a new Quarto file in RStudio with this menu option:\nFile -&gt; New -&gt; Quarto Document...\nRStudio will prompt you to provide some details about the purpose of the file.\nNotebooks are subdivided into chunks (or cells). You can create as many chunks as you like, but each chunk can contain only one kind of content. You can run a code chunk by clicking on the chunk and pressing Ctrl-Enter. The notebook will display the result.\nMarkdown is a simple language you can use to add formatting to (non-code) text in a notebook. For example, surrounding a word with asterisks, as in Let *sleeping* dogs lie, makes the surrounded word italic. You can find a short, interactive tutorial about Markdown here.\n\n\n\n\n\n\nNoteSee Also\n\n\n\nTo learn more about Quarto, see the official documentation.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Getting Started</span>"
    ]
  },
  {
    "objectID": "chapters/01_getting-started.html#sec-reading-files",
    "href": "chapters/01_getting-started.html#sec-reading-files",
    "title": "1  Getting Started",
    "section": "1.7 Reading Files",
    "text": "1.7 Reading Files\nAnalyzing data sets is one of the most common things to do in R. The first step is to get R to read your data. Data sets come in a variety of file formats, and you need to identify the format in order to tell R how to read the data.\nMost of the time, you can guess the format of a file by looking at its extension, the characters (usually three) after the last dot . in the filename. For example, the extension .jpg or .jpeg indicates a JPEG image file. Some operating systems hide extensions by default, but you can find instructions to change this setting online by searching for “show file extensions” and your operating system’s name. The extension is just part of the file’s name, so it should be taken as a hint about the file’s format rather than a guarantee.\nR has built-in functions for reading a variety of formats. The R community also provides packages, shareable and reusable pieces of code, to read even more formats. You’ll learn more about packages later, in Section 3.2. For now, let’s focus on data sets that can be read with R’s built-in functions.\nHere are several formats that are frequently used to distribute data, along with the name of a built-in function or contributed package that can read the format:\n\n\n\nName\nExtension\nFunction or Package\nTabular?\nText?\n\n\n\n\nComma-separated Values\n.csv\nread.csv\nYes\nYes\n\n\nTab-separated Values\n.tsv\nread.delim\nYes\nYes\n\n\nFixed-width File\n.fwf\nread.fwf\nYes\nYes\n\n\nMicrosoft Excel\n.xlsx\nreadr package\nYes\nNo\n\n\nMicrosoft Excel 1993-2007\n.xls\nreadr package\nYes\nNo\n\n\nApache Arrow\n.feather\narrow package\nYes\nNo\n\n\nR Data\n.rds\nreadRDS\nSometimes\nNo\n\n\nR Data\n.rda\nload\nSometimes\nNo\n\n\nPlaintext\n.txt\nreadLines\nSometimes\nYes\n\n\nExtensible Markup Language\n.xml\nxml2 package\nNo\nYes\n\n\nJavaScript Object Notation\n.json\njsonlite package\nNo\nYes\n\n\n\nA tabular data set is one that’s structured as a table, with rows and columns. This reader focuses on tabular data sets, since they’re common in practice and present the fewest programming challenges. Here’s an example of a tabular data set:\n\n\n\nFruit\nQuantity\nPrice\n\n\n\n\napple\n32\n1.49\n\n\nbanana\n541\n0.79\n\n\npear\n10\n1.99\n\n\n\nA text file is a file that contains human-readable lines of text. You can check this by opening the file with a text editor such as Microsoft Notepad or macOS TextEdit. Many file formats use text in order to make the format easier to work with.\nFor instance, a comma-separated values (CSV) file records a tabular data using one line per row, with commas separating columns. If you store the table above in a CSV file and open the file in a text editor, here’s what you’ll see:\nFruit,Quantity,Price\napple,32,1.49\nbanana,541,0.79\npear,10,1.99\nA binary file is one that’s not human-readable. You can’t just read off the data if you open a binary file in a text editor, but they have a number of other advantages. Compared to text files, binary files are often faster to read and take up less storage space (bytes).\nAs an example, R’s built-in binary format is called RDS (which may stand for “R data serialized”). RDS files are extremely useful for backing up work, since they can store any kind of R object, even ones that are not tabular. You can learn more about how to create an RDS file on the ?saveRDS help page, and how to read one on the ?readRDS help page.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Getting Started</span>"
    ]
  },
  {
    "objectID": "chapters/01_getting-started.html#sec-ca-least-terns",
    "href": "chapters/01_getting-started.html#sec-ca-least-terns",
    "title": "1  Getting Started",
    "section": "1.8 Dataset: CA Least Terns",
    "text": "1.8 Dataset: CA Least Terns\nThe California least tern is a endangered subspecies of seabird that nests along the coast of California and Mexico. The California Department of Fish and Wildlife (CDFW) monitors least tern nesting sites across the state to estimate breeding pairs, fledglings, and predator activity in each annual breeding season.\n\n\n\nA California least tern. Original photo by Mark Pavelka, U.S. Fish & Wildlife Service (CC BY 2.0).\n\n\nThe CDFW publishes most of the data it collects to the California Open Data portal. The examples in this and subsequent chapters use a cleaned 2000-2023 version of the California least tern data.\n\n\n\n\n\n\nImportant\n\n\n\nClick here to download the 2000-2023 California least tern data set.\nIf you haven’t already, we recommend you create a directory for this workshop. In your workshop directory, create a data/ subdirectory. Download and save the California least tern data set in the data/ subdirectory.\n\n\n\n\n\n\n\n\nNoteDocumentation for 2000-2023 California Least Tern Data Set\n\n\n\n\n\nEach row in the data set contains measurements from one year-site combination.\n\n\n\n\n\n\n\nColumn\nDescription\n\n\n\n\nyear\nYear of the breeding season\n\n\nsite_name\nSite name\n\n\nsite_name_2013_2018\nSite name from 2013-2018\n\n\nsite_name_1988_2001\nSite name from 1988-2001\n\n\nsite_abbr\nAbbreviated site name\n\n\nregion_3\nRegion of state: S.F. Bay, Central, or Southern (includes Ventura)\n\n\nregion_4\nRegion of state: S.F. Bay, Central, Ventura, or Southern\n\n\nevent\nClimate events\n\n\nbp_min\nReported minimum breeding pairs\n\n\nbp_max\nReported maximum breeding pairs\n\n\nfl_min\nReported minimum fledges\n\n\nfl_max\nReported maximum fledges\n\n\ntotal_nests\nTotal reported nests (maximum if a range was reported)\n\n\nnonpred_eggs\nTotal non-predator-related mortalities of eggs\n\n\nnonpred_chicks\nTotal non-predator-related mortalities of chicks\n\n\nnonpred_fl\nTotal non-predator-related mortalities of fledges\n\n\nnonpred_ad\nTotal non-predator-related mortalities of adults\n\n\npred_control\nSite predator control (yes/no)\n\n\npred_eggs\nTotal predator-related mortalities of eggs\n\n\npred_chicks\nTotal predator-related mortalities of chicks\n\n\npred_fl\nTotal predator-related mortalities of fledges\n\n\npred_ad\nTotal predator-related mortalities of adults\n\n\npred_pefa\nPredation by peregrine falcons (yes/no)\n\n\npred_coy_fox\nPredation by coyotes or foxes (yes/no)\n\n\npred_meso\nPredation by other mesocarnivores: dogs, cats, skunks, opossums, raccoons, weasels, etc. (yes/no)\n\n\npred_owlspp\nPredation by owls (yes/no)\n\n\npred_corvid\nPredation by corvids: ravens or crows (yes/no)\n\n\npred_other_raptor\nPredation by raptors other than peregrine falcons and owls (yes/no)\n\n\npred_other_avian\nPredation by birds other than raptors and corvids (yes/no)\n\n\npred_misc\nPredation by other animals (yes/no)\n\n\ntotal_pefa\nTotal mortalities due to peregrine falcons\n\n\ntotal_coy_fox\nTotal mortalities due to coyotes and foxes\n\n\ntotal_meso\nTotal mortalities due to other mesocarnivores\n\n\ntotal_owlspp\nTotal mortalities due to owls\n\n\ntotal_corvid\nTotal mortalities due to ravens and crows\n\n\ntotal_other_raptor\nTotal mortalities due to other raptors\n\n\ntotal_other_avian\nTotal mortalities due to other birds\n\n\ntotal_misc\nTotal mortalities due to other animals\n\n\nfirst_observed\nDate CA least terns first observed at site\n\n\nlast_observed\nDate CA least terns last observed at site\n\n\nfirst_nest\nDate first egg observed at site\n\n\nfirst_chick\nDate first chick observed at site\n\n\nfirst_fledge\nDate first fledge observed at site\n\n\n\nThe messy source data set (with more years and more columns) is available here.\n\n\n\nLet’s use R to read the California least tern data set. The data set is in a file called is 2000-2023_ca_least_tern.csv, which suggests it’s a CSV file. The function to read a CSV file is read.csv. The function’s first and only required argument is the path to the CSV file.\nIn the following code, the path to the California least tern data set is data/2000-2023_ca_least_tern.csv, but it might be different for you, depending on R’s working directory and where you saved the file. We’ll save the result from the read.csv function in a variable called terns. We can use this variable to access the data in subsequent code.\n\nterns = read.csv(\"data/2000-2023_ca_least_tern.csv\")\n\n\n\n\n\n\n\nNote\n\n\n\nThe variable name terns is arbitrary; you can choose something different if you want. However, in general, it’s a good habit to choose variable names that describe the contents of the variable somehow.\n\n\nIf you tried running the line of code above and got an error message, pay attention to what the error message says, and remember the strategies to get help from Section 1.4. The most common mistake when reading a file is incorrectly specifying the path, so first check that you got the path right.\nIf the code ran without errors, it’s a good idea to check that the data set looks like what the documentation describes. When working with a new data set, it usually isn’t a good idea to print the whole thing (at least until you know how big it is). Large data sets can take a long time to print, and the output can be difficult to read.\nInstead, use the head function to print only the beginning, or head, of the data set:\n\nhead(terns)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nyear\nsite_name\nsite_name_2013_2018\nsite_name_1988_2001\nsite_abbr\nregion_3\nregion_4\nevent\nbp_min\nbp_max\nfl_min\nfl_max\ntotal_nests\nnonpred_eggs\nnonpred_chicks\nnonpred_fl\nnonpred_ad\npred_control\npred_eggs\npred_chicks\npred_fl\npred_ad\npred_pefa\npred_coy_fox\npred_meso\npred_owlspp\npred_corvid\npred_other_raptor\npred_other_avian\npred_misc\ntotal_pefa\ntotal_coy_fox\ntotal_meso\ntotal_owlspp\ntotal_corvid\ntotal_other_raptor\ntotal_other_avian\ntotal_misc\nfirst_observed\nlast_observed\nfirst_nest\nfirst_chick\nfirst_fledge\n\n\n\n\n2000\nPITTSBURG POWER PLANT\nPittsburg Power Plant\nNA_2013_2018 POLYGON\nPITT_POWER\nS.F._BAY\nS.F._BAY\nLA_NINA\n15\n15\n16\n18\n15\n3\n0\n0\n0\n\n4\n2\n0\n0\nN\nN\nN\nN\nY\nY\nN\nN\n0\n0\n0\n0\n4\n2\n0\n0\n2000-05-11\n2000-08-05\n2000-05-26\n2000-06-18\n2000-07-08\n\n\n2000\nALBANY CENTRAL AVE\nNA_NO POLYGON\nAlbany Central Avenue\nAL_CENTAVE\nS.F._BAY\nS.F._BAY\nLA_NINA\n6\n12\n1\n1\n20\nNA\nNA\nNA\nNA\n\nNA\nNA\nNA\nNA\n\n\n\n\n\n\n\n\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n\n\n\n\n\n\n\n2000\nALAMEDA POINT\nAlameda Point\nNA_2013_2018 POLYGON\nALAM_PT\nS.F._BAY\nS.F._BAY\nLA_NINA\n282\n301\n200\n230\n312\n124\n81\n2\n1\n\n17\n0\n0\n0\nN\nN\nN\nN\nN\nY\nY\nN\n0\n0\n0\n0\n0\n6\n11\n0\n2000-05-01\n2000-08-19\n2000-05-16\n2000-06-07\n2000-06-30\n\n\n2000\nKETTLEMAN CITY\nKettleman\nNA_2013_2018 POLYGON\nKET_CTY\nKINGS\nKINGS\nLA_NINA\n2\n3\n1\n2\n3\nNA\n3\n1\n6\n\nNA\nNA\nNA\nNA\n\n\n\n\n\n\n\n\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n2000-06-10\n2000-09-24\n2000-06-17\n2000-07-22\n2000-08-06\n\n\n2000\nOCEANO DUNES STATE VEHICULAR RECREATION AREA\nOceano Dunes State Vehicular Recreation Area\nNA_2013_2018 POLYGON\nOCEANO_DUNES\nCENTRAL\nCENTRAL\nLA_NINA\n4\n5\n4\n4\n5\n2\n0\n0\n0\n\n0\n4\n0\n0\nN\nN\nN\nN\nN\nN\nY\nN\n0\n0\n0\n0\n0\n0\n4\n0\n2000-05-04\n2000-08-30\n2000-05-28\n2000-06-20\n2000-07-13\n\n\n2000\nRANCHO GUADALUPE DUNES PRESERVE\nRancho Guadalupe Dunes Preserve\nNA_2013_2018 POLYGON\nRGDP\nCENTRAL\nCENTRAL\nLA_NINA\n9\n9\n17\n17\n9\n0\n1\n0\n0\n\nNA\nNA\nNA\nNA\n\n\n\n\n\n\n\n\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n2000-05-07\n2000-08-13\n2000-05-31\n2000-06-22\n2000-07-20\n\n\n\n\n\nIf you run this code and see a similar table, then congratulations, you’ve read your first data set into R! ✨\nThe California least terns data set is tabular—as you might have already guessed, since it came from a CSV file. In R, it’s represented by a data frame, a table with rows and columns. R uses data frames to represent most (but not all) kinds of tabular data. The read.csv function, which you used to read this data, always returns a data frame.\nTypically, each row in a data frame corresponds to a single subject and is called an observation. Each column corresponds to a measurement of the subject and is called a feature or covariate.\n\n\n\n\n\n\nNote\n\n\n\nSometimes people also refer to columns as “variables,” but we’ll try to avoid this, because in programming contexts a variable is a name for a value (which might not be a column).\n\n\nWhen you first read an object into R, you might not know whether it’s a data frame. One way to check is visually, by printing it (as you just did with head). A better way to check is with the class function, which returns information about what an object is. For a data frame, the result will always contain data.frame:\n\nclass(terns)\n\n[1] \"data.frame\"\n\n\nYou’ll learn more about classes in Section 2.2, but for now you can use this function to identify data frames.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Getting Started</span>"
    ]
  },
  {
    "objectID": "chapters/01_getting-started.html#sec-data-frames",
    "href": "chapters/01_getting-started.html#sec-data-frames",
    "title": "1  Getting Started",
    "section": "1.9 Inspecting a Data Frame",
    "text": "1.9 Inspecting a Data Frame\nSimilar to how the head function shows the first six rows of a data frame, the tail function shows the last six:\n\ntail(terns)\n\n    year                                site_name         site_name_2013_2018\n786 2023                         NAS NORTH ISLAND         Naval Base Coronado\n787 2023           NAVAL AMPHIBIOUS BASE CORONADO         Naval Base Coronado\n788 2023        DSTREET FILL SWEETWATER MARSH NWR               D Street Fill\n789 2023             CHULA VISTA WILDLIFE RESERVE Chula Vista Wildlife Refuge\n790 2023 SOUTH SAN DIEGO BAY UNIT SDNWR SALTWORKS                   Saltworks\n791 2023                     TIJUANA ESTUARY NERR             Tijuana Estuary\n     site_name_1988_2001 site_abbr region_3 region_4   event bp_min bp_max\n786 NA_2013_2018 POLYGON     NASNI SOUTHERN SOUTHERN LA_NINA      0      0\n787 NA_2013_2018 POLYGON       NAB SOUTHERN SOUTHERN LA_NINA    596    644\n788 NA_2013_2018 POLYGON      D_ST SOUTHERN SOUTHERN LA_NINA     29     38\n789 NA_2013_2018 POLYGON        CV SOUTHERN SOUTHERN LA_NINA     47     54\n790 NA_2013_2018 POLYGON      SALT SOUTHERN SOUTHERN LA_NINA     38     41\n791 NA_2013_2018 POLYGON    TJ_RIV SOUTHERN SOUTHERN LA_NINA    144    165\n    fl_min fl_max total_nests nonpred_eggs nonpred_chicks nonpred_fl nonpred_ad\n786      0      0           0            0              0          0          0\n787     90    128         717          329            185          6          6\n788      4      4          44           25              2          0          0\n789      5      6          59           32              1          0          0\n790      7      7          48           11              2          0          0\n791     35     35         171           65             44          1          1\n    pred_control pred_eggs pred_chicks pred_fl pred_ad pred_pefa pred_coy_fox\n786            Y        NA          NA      NA      NA         N            N\n787            Y        NA          NA      NA      NA         N            N\n788            Y        NA          NA      NA      NA         Y            N\n789            Y        NA          NA      NA      NA         Y            N\n790            Y        NA          NA      NA      NA         Y            Y\n791            Y        NA          NA      NA      NA         N            N\n    pred_meso pred_owlspp pred_corvid pred_other_raptor pred_other_avian\n786         N           N           N                 N                N\n787         N           N           Y                 N                Y\n788         N           N           N                 Y                Y\n789         N           N           N                 N                N\n790         N           N           N                 Y                N\n791         N           N           N                 N                Y\n    pred_misc total_pefa total_coy_fox total_meso total_owlspp total_corvid\n786         N         NA            NA         NA           NA           NA\n787         Y         NA            NA         NA           NA           NA\n788         Y         NA            NA         NA           NA           NA\n789         Y         NA            NA         NA           NA           NA\n790         Y         NA            NA         NA           NA           NA\n791         Y         NA            NA         NA           NA           NA\n    total_other_raptor total_other_avian total_misc first_observed\n786                 NA                NA         NA               \n787                 NA                NA         NA     2023-04-22\n788                 NA                NA         NA     2023-04-20\n789                 NA                NA         NA     2023-04-20\n790                 NA                NA         NA     2023-04-24\n791                 NA                NA         NA     2023-04-26\n    last_observed first_nest first_chick first_fledge\n786                                                  \n787    2023-09-09 2023-05-07  2023-05-31             \n788    2023-08-24 2023-05-12  2023-06-05             \n789    2023-09-22 2023-05-14  2023-06-05             \n790    2023-09-22 2023-05-19  2023-06-09             \n791    2023-08-28 2023-05-12  2023-06-10             \n\n\nIf there are lots of columns or the columns are wide, as is the case here, R wraps the output across lines.\n\n\n\n\n\n\nTip\n\n\n\nBoth head and tail accept an optional second argument that specifies the number of rows to print:\n\nhead(terns, 1)\n\n  year             site_name   site_name_2013_2018  site_name_1988_2001\n1 2000 PITTSBURG POWER PLANT Pittsburg Power Plant NA_2013_2018 POLYGON\n   site_abbr region_3 region_4   event bp_min bp_max fl_min fl_max total_nests\n1 PITT_POWER S.F._BAY S.F._BAY LA_NINA     15     15     16     18          15\n  nonpred_eggs nonpred_chicks nonpred_fl nonpred_ad pred_control pred_eggs\n1            3              0          0          0                      4\n  pred_chicks pred_fl pred_ad pred_pefa pred_coy_fox pred_meso pred_owlspp\n1           2       0       0         N            N         N           N\n  pred_corvid pred_other_raptor pred_other_avian pred_misc total_pefa\n1           Y                 Y                N         N          0\n  total_coy_fox total_meso total_owlspp total_corvid total_other_raptor\n1             0          0            0            4                  2\n  total_other_avian total_misc first_observed last_observed first_nest\n1                 0          0     2000-05-11    2000-08-05 2000-05-26\n  first_chick first_fledge\n1  2000-06-18   2000-07-08\n\n\n\n\nOne way to get a quick idea of what your data looks like without having to skim through all the columns and rows is by inspecting its dimensions. This is the number of rows and columns in a data frame, and you can access this information with the dim function:\n\ndim(terns)\n\n[1] 791  43\n\n\nSo this data set has 791 rows and 43 columns. As an alternative to the dim function, you can use the nrow and ncol functions to get just the number of rows and number of columns, respectively.\nSince the columns have names, you might also want to get just these. You can do that with the names or colnames functions. Both return the same result:\n\nnames(terns)\n\n [1] \"year\"                \"site_name\"           \"site_name_2013_2018\"\n [4] \"site_name_1988_2001\" \"site_abbr\"           \"region_3\"           \n [7] \"region_4\"            \"event\"               \"bp_min\"             \n[10] \"bp_max\"              \"fl_min\"              \"fl_max\"             \n[13] \"total_nests\"         \"nonpred_eggs\"        \"nonpred_chicks\"     \n[16] \"nonpred_fl\"          \"nonpred_ad\"          \"pred_control\"       \n[19] \"pred_eggs\"           \"pred_chicks\"         \"pred_fl\"            \n[22] \"pred_ad\"             \"pred_pefa\"           \"pred_coy_fox\"       \n[25] \"pred_meso\"           \"pred_owlspp\"         \"pred_corvid\"        \n[28] \"pred_other_raptor\"   \"pred_other_avian\"    \"pred_misc\"          \n[31] \"total_pefa\"          \"total_coy_fox\"       \"total_meso\"         \n[34] \"total_owlspp\"        \"total_corvid\"        \"total_other_raptor\" \n[37] \"total_other_avian\"   \"total_misc\"          \"first_observed\"     \n[40] \"last_observed\"       \"first_nest\"          \"first_chick\"        \n[43] \"first_fledge\"       \n\ncolnames(terns)\n\n [1] \"year\"                \"site_name\"           \"site_name_2013_2018\"\n [4] \"site_name_1988_2001\" \"site_abbr\"           \"region_3\"           \n [7] \"region_4\"            \"event\"               \"bp_min\"             \n[10] \"bp_max\"              \"fl_min\"              \"fl_max\"             \n[13] \"total_nests\"         \"nonpred_eggs\"        \"nonpred_chicks\"     \n[16] \"nonpred_fl\"          \"nonpred_ad\"          \"pred_control\"       \n[19] \"pred_eggs\"           \"pred_chicks\"         \"pred_fl\"            \n[22] \"pred_ad\"             \"pred_pefa\"           \"pred_coy_fox\"       \n[25] \"pred_meso\"           \"pred_owlspp\"         \"pred_corvid\"        \n[28] \"pred_other_raptor\"   \"pred_other_avian\"    \"pred_misc\"          \n[31] \"total_pefa\"          \"total_coy_fox\"       \"total_meso\"         \n[34] \"total_owlspp\"        \"total_corvid\"        \"total_other_raptor\" \n[37] \"total_other_avian\"   \"total_misc\"          \"first_observed\"     \n[40] \"last_observed\"       \"first_nest\"          \"first_chick\"        \n[43] \"first_fledge\"       \n\n\nIf the rows have names, you can get those with the rownames function. For this particular data set, the rows don’t have names.\n\n1.9.1 Summarizing Data\nAn efficient way to get a sense of what’s actually in a data set is to have R compute summary information. This works especially well for data frames, but also applies to other data. R provides two different functions to get summaries: str and summary.\nThe str function returns a structural summary of an object. This kind of summary tells us about the structure of the data—the number of rows, the number and names of columns, what kind of data is in each column, and some sample values. Here’s the structural summary for the least terns data set:\n\nstr(terns)\n\n'data.frame':   791 obs. of  43 variables:\n $ year               : int  2000 2000 2000 2000 2000 2000 2000 2000 2000 2000 ...\n $ site_name          : chr  \"PITTSBURG POWER PLANT\" \"ALBANY CENTRAL AVE\" \"ALAMEDA POINT\" \"KETTLEMAN CITY\" ...\n $ site_name_2013_2018: chr  \"Pittsburg Power Plant\" \"NA_NO POLYGON\" \"Alameda Point\" \"Kettleman\" ...\n $ site_name_1988_2001: chr  \"NA_2013_2018 POLYGON\" \"Albany Central Avenue\" \"NA_2013_2018 POLYGON\" \"NA_2013_2018 POLYGON\" ...\n $ site_abbr          : chr  \"PITT_POWER\" \"AL_CENTAVE\" \"ALAM_PT\" \"KET_CTY\" ...\n $ region_3           : chr  \"S.F._BAY\" \"S.F._BAY\" \"S.F._BAY\" \"KINGS\" ...\n $ region_4           : chr  \"S.F._BAY\" \"S.F._BAY\" \"S.F._BAY\" \"KINGS\" ...\n $ event              : chr  \"LA_NINA\" \"LA_NINA\" \"LA_NINA\" \"LA_NINA\" ...\n $ bp_min             : num  15 6 282 2 4 9 30 21 73 166 ...\n $ bp_max             : num  15 12 301 3 5 9 32 21 73 167 ...\n $ fl_min             : int  16 1 200 1 4 17 11 9 60 64 ...\n $ fl_max             : int  18 1 230 2 4 17 11 9 65 64 ...\n $ total_nests        : int  15 20 312 3 5 9 32 22 73 252 ...\n $ nonpred_eggs       : int  3 NA 124 NA 2 0 NA 4 2 NA ...\n $ nonpred_chicks     : int  0 NA 81 3 0 1 27 3 0 NA ...\n $ nonpred_fl         : int  0 NA 2 1 0 0 0 NA 0 NA ...\n $ nonpred_ad         : int  0 NA 1 6 0 0 0 NA 0 NA ...\n $ pred_control       : chr  \"\" \"\" \"\" \"\" ...\n $ pred_eggs          : int  4 NA 17 NA 0 NA 0 NA NA NA ...\n $ pred_chicks        : int  2 NA 0 NA 4 NA 3 NA NA NA ...\n $ pred_fl            : int  0 NA 0 NA 0 NA 0 NA NA NA ...\n $ pred_ad            : int  0 NA 0 NA 0 NA 0 NA NA NA ...\n $ pred_pefa          : chr  \"N\" \"\" \"N\" \"\" ...\n $ pred_coy_fox       : chr  \"N\" \"\" \"N\" \"\" ...\n $ pred_meso          : chr  \"N\" \"\" \"N\" \"\" ...\n $ pred_owlspp        : chr  \"N\" \"\" \"N\" \"\" ...\n $ pred_corvid        : chr  \"Y\" \"\" \"N\" \"\" ...\n $ pred_other_raptor  : chr  \"Y\" \"\" \"Y\" \"\" ...\n $ pred_other_avian   : chr  \"N\" \"\" \"Y\" \"\" ...\n $ pred_misc          : chr  \"N\" \"\" \"N\" \"\" ...\n $ total_pefa         : int  0 NA 0 NA 0 NA 0 NA NA NA ...\n $ total_coy_fox      : int  0 NA 0 NA 0 NA 0 NA NA NA ...\n $ total_meso         : int  0 NA 0 NA 0 NA 0 NA NA NA ...\n $ total_owlspp       : int  0 NA 0 NA 0 NA 0 NA NA NA ...\n $ total_corvid       : int  4 NA 0 NA 0 NA 0 NA NA NA ...\n $ total_other_raptor : int  2 NA 6 NA 0 NA 3 NA NA NA ...\n $ total_other_avian  : int  0 NA 11 NA 4 NA 0 NA NA NA ...\n $ total_misc         : int  0 NA 0 NA 0 NA 0 NA NA NA ...\n $ first_observed     : chr  \"2000-05-11\" \"\" \"2000-05-01\" \"2000-06-10\" ...\n $ last_observed      : chr  \"2000-08-05\" \"\" \"2000-08-19\" \"2000-09-24\" ...\n $ first_nest         : chr  \"2000-05-26\" \"\" \"2000-05-16\" \"2000-06-17\" ...\n $ first_chick        : chr  \"2000-06-18\" \"\" \"2000-06-07\" \"2000-07-22\" ...\n $ first_fledge       : chr  \"2000-07-08\" \"\" \"2000-06-30\" \"2000-08-06\" ...\n\n\nThis summary lists information about each column, and includes most of what you found earlier by using several different functions separately. The summary uses chr to indicate columns of text (“characters”) and int to indicate columns of integers.\nIn contrast to str, the summary function returns a statistical summary of an object. This summary includes summary statistics for each column, choosing appropriate statistics based on the kind of data in the column. For numbers, this is generally the mean, median, and quantiles. For categories, this is the frequencies. Other kinds of statistics are shown for other kinds of data. Here’s the statistical summary for the least terns data set:\n\nsummary(terns)\n\n      year       site_name         site_name_2013_2018 site_name_1988_2001\n Min.   :2000   Length:791         Length:791          Length:791         \n 1st Qu.:2008   Class :character   Class :character    Class :character   \n Median :2013   Mode  :character   Mode  :character    Mode  :character   \n Mean   :2013                                                             \n 3rd Qu.:2018                                                             \n Max.   :2023                                                             \n                                                                          \n  site_abbr           region_3           region_4            event          \n Length:791         Length:791         Length:791         Length:791        \n Class :character   Class :character   Class :character   Class :character  \n Mode  :character   Mode  :character   Mode  :character   Mode  :character  \n                                                                            \n                                                                            \n                                                                            \n                                                                            \n     bp_min           bp_max           fl_min            fl_max       \n Min.   :   0.0   Min.   :   0.0   Min.   :   0.00   Min.   :   0.00  \n 1st Qu.:   3.0   1st Qu.:   5.0   1st Qu.:   0.00   1st Qu.:   0.00  \n Median :  30.0   Median :  38.0   Median :   7.00   Median :   9.00  \n Mean   : 129.3   Mean   : 151.0   Mean   :  40.82   Mean   :  50.35  \n 3rd Qu.: 127.5   3rd Qu.: 148.5   3rd Qu.:  38.00   3rd Qu.:  47.50  \n Max.   :1691.0   Max.   :1691.0   Max.   :1025.00   Max.   :1145.00  \n NA's   :8        NA's   :8        NA's   :12        NA's   :12       \n  total_nests      nonpred_eggs    nonpred_chicks      nonpred_fl     \n Min.   :   0.0   Min.   :  0.00   Min.   :   0.00   Min.   :  0.000  \n 1st Qu.:   5.0   1st Qu.:  2.00   1st Qu.:   0.00   1st Qu.:  0.000  \n Median :  42.0   Median : 12.00   Median :   3.00   Median :  0.000  \n Mean   : 162.8   Mean   : 60.29   Mean   :  44.37   Mean   :  4.181  \n 3rd Qu.: 164.0   3rd Qu.: 69.00   3rd Qu.:  22.00   3rd Qu.:  2.000  \n Max.   :1741.0   Max.   :748.00   Max.   :1063.00   Max.   :207.000  \n NA's   :8        NA's   :164      NA's   :198       NA's   :240      \n   nonpred_ad     pred_control         pred_eggs       pred_chicks     \n Min.   : 0.000   Length:791         Min.   :  0.00   Min.   :  0.000  \n 1st Qu.: 0.000   Class :character   1st Qu.:  2.00   1st Qu.:  0.000  \n Median : 0.000   Mode  :character   Median :  6.50   Median :  2.000  \n Mean   : 0.851                      Mean   : 41.57   Mean   :  8.519  \n 3rd Qu.: 1.000                      3rd Qu.: 25.50   3rd Qu.:  7.500  \n Max.   :22.000                      Max.   :417.00   Max.   :149.000  \n NA's   :234                         NA's   :737      NA's   :737      \n    pred_fl          pred_ad       pred_pefa         pred_coy_fox      \n Min.   : 0.000   Min.   : 0.00   Length:791         Length:791        \n 1st Qu.: 0.000   1st Qu.: 0.00   Class :character   Class :character  \n Median : 0.000   Median : 0.50   Mode  :character   Mode  :character  \n Mean   : 2.365   Mean   : 2.69                                        \n 3rd Qu.: 2.000   3rd Qu.: 2.00                                        \n Max.   :23.000   Max.   :41.00                                        \n NA's   :739      NA's   :733                                          \n  pred_meso         pred_owlspp        pred_corvid        pred_other_raptor \n Length:791         Length:791         Length:791         Length:791        \n Class :character   Class :character   Class :character   Class :character  \n Mode  :character   Mode  :character   Mode  :character   Mode  :character  \n                                                                            \n                                                                            \n                                                                            \n                                                                            \n pred_other_avian    pred_misc           total_pefa     total_coy_fox    \n Length:791         Length:791         Min.   : 0.000   Min.   :  0.000  \n Class :character   Class :character   1st Qu.: 0.000   1st Qu.:  0.000  \n Mode  :character   Mode  :character   Median : 0.000   Median :  0.000  \n                                       Mean   : 1.741   Mean   :  9.464  \n                                       3rd Qu.: 0.000   3rd Qu.:  0.000  \n                                       Max.   :34.000   Max.   :348.000  \n                                       NA's   :737      NA's   :735      \n   total_meso       total_owlspp     total_corvid     total_other_raptor\n Min.   :  0.000   Min.   : 0.000   Min.   :  0.000   Min.   : 0.000    \n 1st Qu.:  0.000   1st Qu.: 0.000   1st Qu.:  0.000   1st Qu.: 0.000    \n Median :  0.000   Median : 0.000   Median :  0.000   Median : 0.000    \n Mean   :  5.556   Mean   : 1.455   Mean   :  7.962   Mean   : 1.712    \n 3rd Qu.:  0.000   3rd Qu.: 0.500   3rd Qu.:  2.000   3rd Qu.: 1.000    \n Max.   :244.000   Max.   :41.000   Max.   :177.000   Max.   :43.000    \n NA's   :737       NA's   :736      NA's   :739       NA's   :739       \n total_other_avian   total_misc      first_observed     last_observed     \n Min.   :  0.000   Min.   :  0.000   Length:791         Length:791        \n 1st Qu.:  0.000   1st Qu.:  0.000   Class :character   Class :character  \n Median :  0.000   Median :  0.000   Mode  :character   Mode  :character  \n Mean   :  8.898   Mean   :  6.566                                        \n 3rd Qu.:  2.000   3rd Qu.:  0.000                                        \n Max.   :140.000   Max.   :168.000                                        \n NA's   :742       NA's   :738                                            \n  first_nest        first_chick        first_fledge      \n Length:791         Length:791         Length:791        \n Class :character   Class :character   Class :character  \n Mode  :character   Mode  :character   Mode  :character  \n                                                         \n                                                         \n                                                         \n                                                         \n\n\n\n\n1.9.2 Selecting Columns\nYou can select an individual column from a data frame by name with $, the dollar sign operator. The syntax is:\n\nVARIABLE$COLUMN_NAME\n\nFor example, for the least terns data set, terns$year selects the year column, which is the year of observation:\n\nterns$year\n\n  [1] 2000 2000 2000 2000 2000 2000 2000 2000 2000 2000 2000 2000 2000 2000 2000\n [16] 2000 2000 2000 2000 2000 2000 2000 2000 2000 2000 2000 2000 2000 2000 2004\n [31] 2004 2004 2004 2004 2004 2004 2004 2004 2004 2004 2004 2004 2004 2004 2004\n [46] 2004 2004 2004 2004 2004 2004 2004 2004 2004 2004 2004 2004 2004 2004 2004\n [61] 2004 2004 2004 2005 2005 2005 2005 2005 2005 2005 2005 2005 2005 2005 2005\n [76] 2005 2005 2005 2005 2005 2005 2005 2005 2005 2005 2005 2005 2005 2005 2005\n [91] 2005 2005 2005 2005 2006 2006 2006 2006 2006 2006 2006 2006 2006 2006 2006\n[106] 2006 2006 2006 2006 2006 2006 2006 2006 2006 2006 2006 2006 2006 2006 2006\n[121] 2006 2006 2006 2006 2006 2006 2006 2007 2007 2007 2007 2007 2007 2007 2007\n[136] 2007 2007 2007 2007 2007 2007 2007 2007 2007 2007 2007 2007 2007 2007 2007\n[151] 2007 2007 2007 2007 2007 2007 2007 2007 2007 2007 2007 2007 2007 2007 2008\n[166] 2008 2008 2008 2008 2008 2008 2008 2008 2008 2008 2008 2008 2008 2008 2008\n[181] 2008 2008 2008 2008 2008 2008 2008 2008 2008 2008 2008 2008 2008 2008 2008\n[196] 2008 2008 2008 2008 2008 2008 2008 2009 2009 2009 2009 2009 2009 2009 2009\n[211] 2009 2009 2009 2009 2009 2009 2009 2009 2009 2009 2009 2009 2009 2009 2009\n[226] 2009 2009 2009 2009 2009 2009 2009 2009 2009 2009 2009 2009 2009 2009 2009\n[241] 2009 2009 2010 2010 2010 2010 2010 2010 2010 2010 2010 2010 2010 2010 2010\n[256] 2010 2010 2010 2010 2010 2010 2010 2010 2010 2010 2010 2010 2010 2010 2010\n[271] 2010 2010 2010 2010 2010 2010 2010 2010 2010 2010 2010 2010 2011 2011 2011\n[286] 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011\n[301] 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011\n[316] 2011 2011 2011 2011 2011 2011 2011 2011 2012 2012 2012 2012 2012 2012 2012\n[331] 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012\n[346] 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012\n[361] 2012 2012 2012 2012 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013\n[376] 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013\n[391] 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013\n[406] 2013 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014\n[421] 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014\n[436] 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2015 2015\n[451] 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015\n[466] 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015\n[481] 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2016 2016 2016 2016 2016\n[496] 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016\n[511] 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016\n[526] 2016 2016 2016 2016 2016 2016 2016 2016 2017 2017 2017 2017 2017 2017 2017\n[541] 2017 2017 2017 2017 2017 2017 2017 2017 2017 2017 2017 2017 2017 2017 2017\n[556] 2017 2017 2017 2017 2017 2017 2017 2017 2017 2017 2017 2017 2017 2017 2017\n[571] 2017 2017 2017 2017 2017 2017 2017 2017 2018 2018 2018 2018 2018 2018 2018\n[586] 2018 2018 2018 2018 2018 2018 2018 2018 2018 2018 2018 2018 2018 2018 2018\n[601] 2018 2018 2018 2018 2018 2018 2018 2018 2018 2018 2018 2018 2019 2019 2019\n[616] 2019 2019 2019 2019 2019 2019 2019 2019 2019 2019 2019 2019 2019 2019 2019\n[631] 2019 2019 2019 2019 2019 2019 2019 2019 2019 2019 2019 2019 2019 2019 2019\n[646] 2019 2019 2020 2020 2020 2020 2020 2020 2020 2020 2020 2020 2020 2020 2020\n[661] 2020 2020 2020 2020 2020 2020 2020 2020 2020 2020 2020 2020 2020 2020 2020\n[676] 2020 2020 2020 2020 2020 2020 2020 2021 2021 2021 2021 2021 2021 2021 2021\n[691] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021\n[706] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2022 2022\n[721] 2022 2022 2022 2022 2022 2022 2022 2022 2022 2022 2022 2022 2022 2022 2022\n[736] 2022 2022 2022 2022 2022 2022 2022 2022 2022 2022 2022 2022 2022 2022 2022\n[751] 2022 2022 2022 2022 2023 2023 2023 2023 2023 2023 2023 2023 2023 2023 2023\n[766] 2023 2023 2023 2023 2023 2023 2023 2023 2023 2023 2023 2023 2023 2023 2023\n[781] 2023 2023 2023 2023 2023 2023 2023 2023 2023 2023 2023\n\n\nR provides a variety of functions to compute on columns (and other vectors of data). For instance, what if you want to know the time period the data set covers? You can use the range function to compute the minimum and maximum of a column:\n\nrange(terns$year)\n\n[1] 2000 2023\n\n\nSo the oldest observations are from 2000 and the newest are from 2023, although this function and output doesn’t tell us whether there are observations for the years in between.\nYou can count the observations for each year with the table function:\n\ntable(terns$year)\n\n\n2000 2004 2005 2006 2007 2008 2009 2010 2011 2012 2013 2014 2015 2016 2017 2018 \n  29   34   31   33   37   38   40   40   41   41   42   42   42   43   45   34 \n2019 2020 2021 2022 2023 \n  35   35   36   36   37 \n\n\nThe table function is great for summarizing columns of categories, where numerical statistics like means and standard deviations aren’t defined.\nOn the other hand, numerical statistics work well for summarizing columns of numbers. You can use the mean function to compute the mean of a column. For instance, let’s compute the mean of the total_nests column, which is the total number of nests seen at a site:\n\nmean(terns$total_nests)\n\n[1] NA\n\n\nThe result is NA because column is missing some values (we’ll explain this in detail in Section 2.3.1). To compute the mean with only the values that are present, set na.rm = TRUE in the call to mean:\n\nmean(terns$total_nests, na.rm = TRUE)\n\n[1] 162.8455\n\n\nYou can also use the dollar sign operator to assign values to columns. For instance, to assign 2000 to the entire year column:\n\nterns$year = 2000\n\nBe careful when you do this, as there is no undo. Fortunately, you haven’t saved this change to the least terns data set to your computer’s hard drive yet, so you can reload the data set to reset it:\n\nterns = read.csv(\"data/2000-2023_ca_least_tern.csv\")\n\nIn Section 2.4, you’ll learn how to select rows and individual elements from a data frame, as well as other ways to select columns.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Getting Started</span>"
    ]
  },
  {
    "objectID": "chapters/01_getting-started.html#exercises",
    "href": "chapters/01_getting-started.html#exercises",
    "title": "1  Getting Started",
    "section": "1.10 Exercises",
    "text": "1.10 Exercises\n\n1.10.1 Exercise\nIn a string, an escape sequence or escape code consists of a backslash followed by one or more characters. Escape sequences make it possible to:\n\nWrite quotes or backslashes within a string\nWrite characters that don’t appear on your keyboard (for example, characters in a foreign language)\n\nFor example, the escape sequence \\n corresponds to the newline character. There’s a complete list of escape sequences for R in the ?Quotes help file. Other programming languages also use escape sequences, and many of them are the same as in R.\n\nAssign a string that contains a newline to the variable newline. Then make R display the value of the variable by entering newline at the R prompt.\nThe message function prints output to the R console, so it’s one way you can make your R code report information as it runs. Use the message function to print newline.\nHow does the output from part 1 compare to the output from part 2? Why do you think they differ?\n\n\n\n1.10.2 Exercise\n\nChoose a directory on your computer that you’re familiar with, such as one you created. Determine the path to the directory, then use list.files to display its contents. Do the files displayed match what you see in your system’s file browser?\nWhat does the all.files parameter of list.files do? Give an example.\n\n\n\n1.10.3 Exercise\nThe read.table function is another function for reading tabular data. Take a look at the help file for read.table. Recall that read.csv reads tabular data where the values are separated by commas, and read.delim reads tabular data where the values are separated by tabs.\n\nWhat value-separator does read.table expect by default?\nIs it possible to use read.table to read a CSV? Explain. If your answer is yes, show how to use read.table to load the least terns data set from Section 1.8.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Getting Started</span>"
    ]
  },
  {
    "objectID": "chapters/02_data-structures.html",
    "href": "chapters/02_data-structures.html",
    "title": "2  Data Structures",
    "section": "",
    "text": "2.1 Vectors\nThe previous chapter introduced R and gave you enough background to do some simple computations on data sets. This chapter focuses on the foundational knowledge and skills you’ll need in order to use R effectively in the long term. Specifically, it begins with a deep dive into R’s various data structures and data types, then explains a variety of ways to get and set their elements.\nA vector is a collection of values. Vectors are the fundamental unit of data in R, and you’ve already used them in the previous sections.\nFor instance, each column in a data frame is a vector. So the site_name column in the California least terns data set (Section 1.8) is a vector. Take a look at it now. You can use head to avoid printing too much. Set the second argument to 10 so that exactly 10 values are printed:\nhead(terns$site_name, 10)\n\n [1] \"PITTSBURG POWER PLANT\"                       \n [2] \"ALBANY CENTRAL AVE\"                          \n [3] \"ALAMEDA POINT\"                               \n [4] \"KETTLEMAN CITY\"                              \n [5] \"OCEANO DUNES STATE VEHICULAR RECREATION AREA\"\n [6] \"RANCHO GUADALUPE DUNES PRESERVE\"             \n [7] \"VANDENBERG SFB\"                              \n [8] \"SANTA CLARA RIVER MCGRATH STATE BEACH\"       \n [9] \"ORMOND BEACH\"                                \n[10] \"NBVC POINT MUGU\"\nLike all vectors, this vector is ordered, which just means the values, or elements, have specific positions. The value of the 1st element is PITTSBURG POWER PLANT, the 2nd is ALBANY CENTRAL AVE, the 5th is OCEANO DUNES STATE VEHICULAR RECREATION AREA, and so on.\nNotice that the elements of this vector are all strings. In R, the elements of a vector must all be the same type of data (we say the elements are homogeneous). A vector can contain integers, decimal numbers, strings, or any of several other types of data, but not a mix these all at once.\nThe other columns in the least terns data frame are also vectors. For instance, the year column is a vector of integers:\nhead(terns$year)\n\n[1] 2000 2000 2000 2000 2000 2000\nVectors can contain any number of elements, including 0 or 1 element. Unlike mathematics, R does not distinguish between vectors and scalars (solitary values). As far as R is concerned, a solitary value, like 3, is a vector with 1 element.\nYou can check the length of a vector (and other objects) with the length function:\nlength(3)\n\n[1] 1\n\nlength(\"hello\")\n\n[1] 1\n\nlength(terns$year)\n\n[1] 791\nSince the last of these is a column from the data frame terns, the length is the same as the number of rows in terns.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data Structures</span>"
    ]
  },
  {
    "objectID": "chapters/02_data-structures.html#sec-vectors",
    "href": "chapters/02_data-structures.html#sec-vectors",
    "title": "2  Data Structures",
    "section": "",
    "text": "2.1.1 Creating Vectors\nSometimes you’ll want to create your own vectors. You can do this by concatenating several vectors together with the c function. It accepts any number of vector arguments, and combines them into a single vector:\n\nc(1, 2, 19, -3)\n\n[1]  1  2 19 -3\n\nc(\"hi\", \"hello\")\n\n[1] \"hi\"    \"hello\"\n\nc(1, 2, c(3, 4))\n\n[1] 1 2 3 4\n\n\nIf the arguments you pass to the c function have different data types, R will attempt to convert them to a common data type that preserves the information:\n\nc(1, \"cool\", 2.3)\n\n[1] \"1\"    \"cool\" \"2.3\" \n\n\nSection 2.2.2 explains the rules for this conversion in more detail.\nThe colon operator : creates vectors that contain sequences of integers. This is useful for creating “toy” data to test things on, and later we’ll see that it’s also important in several other contexts. Here are a few different sequences:\n\n1:3\n\n[1] 1 2 3\n\n-3:5\n\n[1] -3 -2 -1  0  1  2  3  4  5\n\n10:1\n\n [1] 10  9  8  7  6  5  4  3  2  1\n\n\nBeware that both endpoints are included in the sequence, even in sequences like 1:0, and that the difference between elements is always -1 or 1. If you want more control over the generated sequence, use the seq function instead.\n\n\n2.1.2 Indexing Vectors\nYou can access individual elements of a vector with the indexing operator [ (also called the square bracket operator). The syntax is:\nVECTOR[INDEXES]\nHere INDEXES is a vector of positions of elements you want to get or set.\nFor example, let’s make a vector with 5 elements and get the 2nd element:\n\nx = c(4, 8, 3, 2, 1)\nx[2]\n\n[1] 8\n\n\nNow let’s get the 3rd and 1st element:\n\nx[c(3, 1)]\n\n[1] 3 4\n\n\nYou can use the indexing operator together with the assignment operator to assign elements of a vector:\n\nx[3] = 0\nx\n\n[1] 4 8 0 2 1\n\n\nIndexing is among the most frequently used operations in R, so take some time to try it out with few different vectors and indexes. We’ll revisit indexing in Section 2.4 to learn a lot more about it.\n\n\n2.1.3 Vectorization\nLet’s look at what happens if we call a mathematical function, like sin, on a vector:\n\nx = c(1, 3, 0, pi)\nsin(x)\n\n[1] 8.414710e-01 1.411200e-01 0.000000e+00 1.224647e-16\n\n\nThis gives us the same result as if we had called the function separately on each element. That is, the result is the same as:\n\nc(sin(1), sin(3), sin(0), sin(pi))\n\n[1] 8.414710e-01 1.411200e-01 0.000000e+00 1.224647e-16\n\n\nOf course, the first version is much easier to type.\nFunctions that take a vector argument and get applied element-by-element like this are said to be vectorized. Most functions in R are vectorized, especially math functions. Some examples include sin, cos, tan, log, exp, and sqrt.\nFunctions that are not vectorized tend to be ones that combine or aggregate values in some way. For instance, the sum, mean, median, length, and class functions are not vectorized.\nA function can be vectorized across multiple arguments. This is easiest to understand in terms of the arithmetic operators. Let’s see what happens if we add two vectors together:\n\nx = c(1, 2, 3, 4)\ny = c(-1, 7, 10, -10)\nx + y\n\n[1]  0  9 13 -6\n\n\nThe elements are paired up and added according to their positions. The other arithmetic operators are also vectorized:\n\nx - y\n\n[1]  2 -5 -7 14\n\nx * y\n\n[1]  -1  14  30 -40\n\nx / y\n\n[1] -1.0000000  0.2857143  0.3000000 -0.4000000\n\n\n\n\n2.1.4 Recycling\nWhen a function is vectorized across multiple arguments, what happens if the vectors have different lengths? Whenever you think of a question like this as you’re learning R, the best way to find out is to create some toy data and test it yourself. Let’s try that now:\n\nx = c(1, 2, 3, 4)\ny = c(-1, 1)\nx + y\n\n[1] 0 3 2 5\n\n\nThe elements of the shorter vector are recycled to match the length of the longer vector. That is, after the second element, the elements of y are repeated to make a vector with the same length as x (because x is longer), and then vectorized addition is carried out as usual.\nHere’s what that looks like written down:\n   1  2  3  4\n+ -1  1 -1  1\n  -----------\n   0  3  2  5\nIf the length of the longer vector is not a multiple of the length of the shorter vector, R issues a warning, but still returns the result. The warning as meant as a reminder, because unintended recycling is a common source of bugs:\n\nx = c(1, 2, 3, 4, 5)\ny = c(-1, 1)\nx + y\n\nWarning in x + y: longer object length is not a multiple of shorter object\nlength\n\n\n[1] 0 3 2 5 4\n\n\nRecycling might seem strange at first, but it’s convenient if you want to use a specific value (or pattern of values) with a vector. For instance, suppose you want to multiply all the elements of a vector by 2. Recycling makes this easy:\n\n2 * c(1, 2, 3)\n\n[1] 2 4 6\n\n\nWhen you use recycling, most of the time one of the arguments will be a scalar like this.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data Structures</span>"
    ]
  },
  {
    "objectID": "chapters/02_data-structures.html#sec-data-types-classes",
    "href": "chapters/02_data-structures.html#sec-data-types-classes",
    "title": "2  Data Structures",
    "section": "2.2 Data Types & Classes",
    "text": "2.2 Data Types & Classes\nData can be categorized into different types based on sets of shared characteristics. For instance, statisticians tend to think about whether data are numeric or categorical:\n\nnumeric\n\ncontinuous (real or complex numbers)\ndiscrete (integers)\n\ncategorical\n\nnominal (categories with no ordering)\nordinal (categories with some ordering)\n\n\nOf course, other types of data, like graphs (networks) and natural language (books, speech, and so on), are also possible. Categorizing data this way is useful for reasoning about which methods to apply to which data.\nIn R, data objects are categorized in two different ways:\n\nThe class of an R object describes what the object does, or the role that it plays. Sometimes objects can do more than one thing, so objects can have more than one class. The class function, which debuted in Section 1.9, returns the classes of its argument.\nThe type of an R object describes what the object is. Technically, the type corresponds to how the object is stored in your computer’s memory. Each object has exactly one type. The typeof function returns the type of its argument.\n\nOf the two, classes tend to be more important than types. If you aren’t sure what an object is, checking its classes should be the first thing you do.\nThe built-in classes you’ll use all the time correspond to vectors and lists (which we’ll learn more about in Section 2.2.1):\n\n\n\n\n\n\n\n\nClass\nExample\nDescription\n\n\n\n\nlogical\nTRUE, FALSE\nLogical (or Boolean) values\n\n\ninteger\n-1L, 1L, 2L\nInteger numbers\n\n\nnumeric\n-2.1, 7, 34.2\nReal numbers\n\n\ncomplex\n3-2i, -8+0i\nComplex numbers\n\n\ncharacter\n\"hi\", \"YAY\"\nText strings\n\n\nlist\nlist(TRUE, 1, \"hi\")\nOrdered collection of heterogeneous elements\n\n\n\nR doesn’t distinguish between scalars and vectors, so the class of a vector is the same as the class of its elements:\n\nclass(\"hi\")\n\n[1] \"character\"\n\nclass(c(\"hello\", \"hi\"))\n\n[1] \"character\"\n\n\nIn addition, for most vectors, the class and the type are the same:\n\nx = c(TRUE, FALSE)\nclass(x)\n\n[1] \"logical\"\n\ntypeof(x)\n\n[1] \"logical\"\n\n\nThe exception to this rule is numeric vectors, which have type double for historical reasons:\n\nclass(pi)\n\n[1] \"numeric\"\n\ntypeof(pi)\n\n[1] \"double\"\n\ntypeof(3)\n\n[1] \"double\"\n\n\nThe word “double” here stands for double-precision floating point number, a standard way to represent real numbers on computers.\nBy default, R assumes any numbers you enter in code are numeric, even if they’re integer-valued.\nThe class integer also represents integer numbers, but it’s not used as often as numeric. A few functions, such as the sequence operator : and the length function, return integers. You can also force R to create an integer by adding the suffix L to a number, but there are no major drawbacks to using the double default:\n\nclass(1:3)\n\n[1] \"integer\"\n\nclass(3)\n\n[1] \"numeric\"\n\nclass(3L)\n\n[1] \"integer\"\n\n\nBesides the classes for vectors and lists, there are several built-in classes that represent more sophisticated data structures:\n\n\n\n\n\n\n\nClass\nDescription\n\n\n\n\nfunction\nFunctions\n\n\nfactor\nCategorical values\n\n\nmatrix\nTwo-dimensional ordered collection of homogeneous elements\n\n\narray\nMulti-dimensional ordered collection of homogeneous elements\n\n\ndata.frame\nData frames\n\n\n\nFor these, the class is usually different from the type. We’ll learn more about most of these later on.\n\n2.2.1 Lists\nA list is an ordered data structure where the elements can have different types (they are heterogeneous). This differs from a vector, where the elements all have to have the same type, as we saw in Section 2.1. The tradeoff is that most vectorized functions do not work with lists.\nYou can make an ordinary list with the list function:\n\nx = list(1, c(\"hi\", \"bye\"))\nclass(x)\n\n[1] \"list\"\n\ntypeof(x)\n\n[1] \"list\"\n\n\nFor ordinary lists, the type and the class are both list. In Section 2.4, we’ll learn how to get and set list elements, and in later sections we’ll learn more about when and why to use lists.\nYou’ve already seen one list, the terns data frame:\n\nclass(terns)\n\n[1] \"data.frame\"\n\ntypeof(terns)\n\n[1] \"list\"\n\n\nUnder the hood, data frames are lists, and each column is a list element. Because the class is data.frame rather than list, R treats data frames differently from ordinary lists. This difference is apparent in how data frames are printed compared to ordinary lists.\n\n\n2.2.2 Implicit Coercion\nR’s types fall into a natural hierarchy of expressiveness:\n\n\n\nR’s hierarchy of types.\n\n\nEach type on the right is more expressive than the ones to its left. That is, with the convention that FALSE is 0 and TRUE is 1, we can represent any logical value as an integer. In turn, we can represent any integer as a double, and any double as a complex number. By writing the number out, we can also represent any complex number as a string.\nThe point is that no information is lost as we follow the arrows from left to right along the types in the hierarchy. In fact, R will automatically and silently convert from types on the left to types on the right as needed. This is called implicit coercion.\nAs an example, consider what happens if we add a logical value to a number:\n\nTRUE + 2\n\n[1] 3\n\n\nR automatically converts the TRUE to the numeric value 1, and then carries out the arithmetic as usual.\nWe’ve already seen implicit coercion at work once before, when we learned the c function. Since the elements of a vector all have to have the same type, if you pass several different types to c, then R tries to use implicit coercion to make them the same:\n\nx = c(TRUE, \"hi\", 1, 1+3i)\nclass(x)\n\n[1] \"character\"\n\nx\n\n[1] \"TRUE\" \"hi\"   \"1\"    \"1+3i\"\n\n\nImplicit coercion is strictly one-way; it never occurs in the other direction. If you want to coerce a type on the right to one on the left, you can do it explicitly with one of the as.TYPE functions. For instance, the as.numeric (or as.double) function coerces to numeric:\n\nas.numeric(\"3.1\")\n\n[1] 3.1\n\n\nThere are a few types that fall outside of the hierarchy entirely, like functions. Implicit coercion doesn’t apply to these. If you try to use these types where it doesn’t make sense to, R generally returns an error:\n\nsin + 3\n\nError in sin + 3: non-numeric argument to binary operator\n\n\nIf you try to use these types as elements of a vector, you get back a list instead:\n\nx = c(1, 2, sum)\nclass(x)\n\n[1] \"list\"\n\n\nUnderstanding how implicit coercion works will help you avoid bugs, and can also be a time-saver. For example, we can use implicit coercion to succinctly count how many elements of a vector satisfy a some condition:\n\nx = c(1, 3, -1, 10, -2, 3, 8, 2)\ncondition = x &lt; 4\nsum(condition)    # or sum(x &lt; 4)\n\n[1] 6\n\n\nIf you still don’t quite understand how the code above works, try inspecting each variable. In general, inspecting each step or variable is a good strategy for understanding why a piece of code works (or doesn’t work!). Here the implicit coercion happens in the third line.\n\n\n2.2.3 Matrices & Arrays\nA matrix is the two-dimensional analogue of a vector. The elements, which are arranged into rows and columns, are ordered and homogeneous.\nYou can create a matrix from a vector with the matrix function. By default, the columns are filled first:\n\n# A matrix with 2 rows and 3 columns:\nmatrix(1:6, 2, 3)\n\n     [,1] [,2] [,3]\n[1,]    1    3    5\n[2,]    2    4    6\n\n\nThe class of a matrix is always matrix, and the type matches the type of the elements:\n\nx = matrix(c(\"a\", \"b\", NA, \"c\"), 2, 2)\nx\n\n     [,1] [,2]\n[1,] \"a\"  NA  \n[2,] \"b\"  \"c\" \n\nclass(x)\n\n[1] \"matrix\" \"array\" \n\ntypeof(x)\n\n[1] \"character\"\n\n\nYou can use the matrix multiplication operator %*% to multiply two matrices with compatible dimensions.\nAn array is a further generalization of matrices to higher dimensions. You can create an array from a vector with the array function. The characteristics of arrays are almost identical to matrices, but the class of an array is always array.\n\n\n2.2.4 Factors\nA feature is categorical if it measures a qualitative category. For example, the genres rock, blues, alternative, folk, pop are categories.\nR uses the class factor to represent categorical data. Visualizations and statistical models sometimes treat factors differently than other data types, so it’s important to make sure you have the right data type. If you’re ever unsure, remember that you can check the class of an object with the class function.\nWhen it reads a data set, R usually can’t tell which features are categorical. That means identifying and converting the categorical features is up to you. For beginners, it can be difficult to understand whether a feature is categorical or not. The key is to think about whether you want to use the feature to divide the data into groups.\nFor example, if you want to know how many songs are in the rock genre, you first need to divide the songs by genre, and then count the number of songs in each group (or at least the rock group).\nAs a second example, months recorded as numbers can be categorical or not, depending on how you want to use them. You might want to treat them as categorical (for example, to compute max rainfall in each month) or you might want to treat them as numbers (for example, to compute the number of months time between two events).\nThe bottom line is that you have to think about what you’ll be doing in the analysis. In some cases, you might treat a feature as categorical only for part of the analysis.\nLet’s think about which features are categorical in least terns data set. To refresh your memory of what’s in the data set, take a look at the structural summary:\n\nstr(terns)\n\n'data.frame':   791 obs. of  43 variables:\n $ year               : int  2000 2000 2000 2000 2000 2000 2000 2000 2000 2000 ...\n $ site_name          : chr  \"PITTSBURG POWER PLANT\" \"ALBANY CENTRAL AVE\" \"ALAMEDA POINT\" \"KETTLEMAN CITY\" ...\n $ site_name_2013_2018: chr  \"Pittsburg Power Plant\" \"NA_NO POLYGON\" \"Alameda Point\" \"Kettleman\" ...\n $ site_name_1988_2001: chr  \"NA_2013_2018 POLYGON\" \"Albany Central Avenue\" \"NA_2013_2018 POLYGON\" \"NA_2013_2018 POLYGON\" ...\n $ site_abbr          : chr  \"PITT_POWER\" \"AL_CENTAVE\" \"ALAM_PT\" \"KET_CTY\" ...\n $ region_3           : chr  \"S.F._BAY\" \"S.F._BAY\" \"S.F._BAY\" \"KINGS\" ...\n $ region_4           : chr  \"S.F._BAY\" \"S.F._BAY\" \"S.F._BAY\" \"KINGS\" ...\n $ event              : chr  \"LA_NINA\" \"LA_NINA\" \"LA_NINA\" \"LA_NINA\" ...\n $ bp_min             : num  15 6 282 2 4 9 30 21 73 166 ...\n $ bp_max             : num  15 12 301 3 5 9 32 21 73 167 ...\n $ fl_min             : int  16 1 200 1 4 17 11 9 60 64 ...\n $ fl_max             : int  18 1 230 2 4 17 11 9 65 64 ...\n $ total_nests        : int  15 20 312 3 5 9 32 22 73 252 ...\n $ nonpred_eggs       : int  3 NA 124 NA 2 0 NA 4 2 NA ...\n $ nonpred_chicks     : int  0 NA 81 3 0 1 27 3 0 NA ...\n $ nonpred_fl         : int  0 NA 2 1 0 0 0 NA 0 NA ...\n $ nonpred_ad         : int  0 NA 1 6 0 0 0 NA 0 NA ...\n $ pred_control       : chr  \"\" \"\" \"\" \"\" ...\n $ pred_eggs          : int  4 NA 17 NA 0 NA 0 NA NA NA ...\n $ pred_chicks        : int  2 NA 0 NA 4 NA 3 NA NA NA ...\n $ pred_fl            : int  0 NA 0 NA 0 NA 0 NA NA NA ...\n $ pred_ad            : int  0 NA 0 NA 0 NA 0 NA NA NA ...\n $ pred_pefa          : chr  \"N\" \"\" \"N\" \"\" ...\n $ pred_coy_fox       : chr  \"N\" \"\" \"N\" \"\" ...\n $ pred_meso          : chr  \"N\" \"\" \"N\" \"\" ...\n $ pred_owlspp        : chr  \"N\" \"\" \"N\" \"\" ...\n $ pred_corvid        : chr  \"Y\" \"\" \"N\" \"\" ...\n $ pred_other_raptor  : chr  \"Y\" \"\" \"Y\" \"\" ...\n $ pred_other_avian   : chr  \"N\" \"\" \"Y\" \"\" ...\n $ pred_misc          : chr  \"N\" \"\" \"N\" \"\" ...\n $ total_pefa         : int  0 NA 0 NA 0 NA 0 NA NA NA ...\n $ total_coy_fox      : int  0 NA 0 NA 0 NA 0 NA NA NA ...\n $ total_meso         : int  0 NA 0 NA 0 NA 0 NA NA NA ...\n $ total_owlspp       : int  0 NA 0 NA 0 NA 0 NA NA NA ...\n $ total_corvid       : int  4 NA 0 NA 0 NA 0 NA NA NA ...\n $ total_other_raptor : int  2 NA 6 NA 0 NA 3 NA NA NA ...\n $ total_other_avian  : int  0 NA 11 NA 4 NA 0 NA NA NA ...\n $ total_misc         : int  0 NA 0 NA 0 NA 0 NA NA NA ...\n $ first_observed     : chr  \"2000-05-11\" \"\" \"2000-05-01\" \"2000-06-10\" ...\n $ last_observed      : chr  \"2000-08-05\" \"\" \"2000-08-19\" \"2000-09-24\" ...\n $ first_nest         : chr  \"2000-05-26\" \"\" \"2000-05-16\" \"2000-06-17\" ...\n $ first_chick        : chr  \"2000-06-18\" \"\" \"2000-06-07\" \"2000-07-22\" ...\n $ first_fledge       : chr  \"2000-07-08\" \"\" \"2000-06-30\" \"2000-08-06\" ...\n\n\nThe site_name, site_abbr, and event columns are all examples of categorical data. The region_ columns and some of the pred_ columns also contain categorical data.\nOne way to check whether a feature is useful for grouping (and thus effectively categorical) is to count the number of times each value appears. You can do this with the table function. For instance, to count the number of times each category of event appears:\n\ntable(terns$event)\n\n\nEL_NINO LA_NINA NEUTRAL \n    120     258     413 \n\n\nFeatures with only a few unique values, repeated many times, are ideal for grouping. Numerical features, like total_nests, usually aren’t good for grouping, both because of what they measure and because they tend to have many unique values, which leads to very small groups.\nThe year column can be treated as categorical or quantitative data. It’s easy to imagine grouping observations by year, but years are also numerical: they have an order and we might want to do math on them. The most appropriate type for year depends on how we want to use it for analysis.\nYou can convert a column to the factor class with the factor function. Try this for the event column:\n\nevent = factor(terns$event)\nevent\n\n  [1] LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA\n [10] LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA\n [19] LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA\n [28] LA_NINA LA_NINA NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n [37] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n [46] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n [55] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n [64] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n [73] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n [82] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n [91] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[100] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[109] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[118] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[127] NEUTRAL EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO\n[136] EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO\n[145] EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO\n[154] EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO\n[163] EL_NINO EL_NINO LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA\n[172] LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA\n[181] LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA\n[190] LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA\n[199] LA_NINA LA_NINA LA_NINA LA_NINA NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[208] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[217] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[226] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[235] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL EL_NINO\n[244] EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO\n[253] EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO\n[262] EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO\n[271] EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO\n[280] EL_NINO EL_NINO EL_NINO LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA\n[289] LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA\n[298] LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA\n[307] LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA\n[316] LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA\n[325] LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA\n[334] LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA\n[343] LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA\n[352] LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA\n[361] LA_NINA LA_NINA LA_NINA LA_NINA NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[370] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[379] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[388] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[397] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[406] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[415] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[424] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[433] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[442] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[451] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[460] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[469] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[478] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[487] NEUTRAL NEUTRAL NEUTRAL NEUTRAL EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO\n[496] EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO\n[505] EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO\n[514] EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO\n[523] EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO EL_NINO\n[532] EL_NINO EL_NINO NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[541] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[550] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[559] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[568] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[577] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[586] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[595] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[604] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[613] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[622] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[631] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[640] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[649] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[658] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[667] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL\n[676] NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL NEUTRAL LA_NINA LA_NINA\n[685] LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA\n[694] LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA\n[703] LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA\n[712] LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA\n[721] LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA\n[730] LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA\n[739] LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA\n[748] LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA\n[757] LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA\n[766] LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA\n[775] LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA\n[784] LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA LA_NINA\nLevels: EL_NINO LA_NINA NEUTRAL\n\n\nNotice that factors are printed differently than strings.\nThe categories of a factor are called levels. You can list the levels with the levels function:\n\nlevels(event)\n\nA factor remembers all possible levels even if you take a subset where some of the levels aren’t present:\n\nevent[1:3]\n\n[1] LA_NINA LA_NINA LA_NINA\nLevels: EL_NINO LA_NINA NEUTRAL\n\nlevels(event[1:3])\n\n[1] \"EL_NINO\" \"LA_NINA\" \"NEUTRAL\"\n\n\nThis is an important way factors are different from strings (or character vectors). It ensures that if you plot a factor, the missing levels will still be represented on the plot.\n\n\n\n\n\n\nTip\n\n\n\nYou can make a factor forget levels that aren’t present with the droplevels function:\n\ndroplevels(event[1:3])\n\n[1] LA_NINA LA_NINA LA_NINA\nLevels: LA_NINA",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data Structures</span>"
    ]
  },
  {
    "objectID": "chapters/02_data-structures.html#special-values",
    "href": "chapters/02_data-structures.html#special-values",
    "title": "2  Data Structures",
    "section": "2.3 Special Values",
    "text": "2.3 Special Values\nR has four special values to represent missing or invalid data.\n\n2.3.1 Missing Values\nThe value NA, called the missing value, represents missing entries in a data set. It’s implied that the entries are missing due to how the data was collected, although there are exceptions. As an example, imagine the data came from a survey, and respondents chose not to answer some questions. In the data set, their answers for those questions can be recorded as NA.\nThe missing value is a chameleon: it can be a logical, integer, numeric, complex, or character value. By default, the missing value is logical, and the other types occur through coercion (Section 2.2.2):\n\nclass(NA)\n\n[1] \"logical\"\n\nclass(c(1, NA))\n\n[1] \"numeric\"\n\nclass(c(\"hi\", NA, NA))\n\n[1] \"character\"\n\n\nThe missing value is also contagious: it represents an unknown quantity, so using it as an argument to a function usually produces another missing value. The idea is that if the inputs to a computation are unknown, generally so is the output:\n\nNA - 3\n\n[1] NA\n\nmean(c(1, 2, NA))\n\n[1] NA\n\n\nAs a consequence, testing whether an object is equal to the missing value with == doesn’t return a meaningful result:\n\n5 == NA\n\n[1] NA\n\nNA == NA\n\n[1] NA\n\n\nYou can use the is.na function instead:\n\nis.na(5)\n\n[1] FALSE\n\nis.na(NA)\n\n[1] TRUE\n\nis.na(c(1, NA, 3))\n\n[1] FALSE  TRUE FALSE\n\n\nMissing values are a feature that sets R apart from most other programming languages.\n\n\n2.3.2 Infinity\nThe value Inf represents infinity, and can be numeric or complex. You’re most likely to encounter it as the result of certain computations:\n\n13 / 0\n\n[1] Inf\n\nclass(Inf)\n\n[1] \"numeric\"\n\n\nYou can use the is.infinite function to test whether a value is infinite:\n\nis.infinite(3)\n\n[1] FALSE\n\nis.infinite(c(-Inf, 0, Inf))\n\n[1]  TRUE FALSE  TRUE\n\n\n\n\n2.3.3 Not a Number\nThe value NaN (“not a number”) represents a quantity that’s undefined mathematically. For instance, dividing 0 by 0 is undefined:\n\n0 / 0\n\n[1] NaN\n\nclass(NaN)\n\n[1] \"numeric\"\n\n\nLike Inf, NaN can be numeric or complex.\nYou can use the is.nan function to test whether a value is NaN:\n\nis.nan(c(10.1, log(-1), 3))\n\nWarning in log(-1): NaNs produced\n\n\n[1] FALSE  TRUE FALSE\n\n\n\n\n2.3.4 Null\nThe value NULL represents a quantity that’s undefined in R. Most of the time, NULL indicates the absence of a result. For instance, vectors don’t have dimensions, so the dim function returns NULL for vectors:\n\ndim(c(1, 2))\n\nNULL\n\nclass(NULL)\n\n[1] \"NULL\"\n\ntypeof(NULL)\n\n[1] \"NULL\"\n\n\nUnlike the other special values, NULL has its own unique type and class.\nYou can use the is.null function to test whether a value is NULL:\n\nis.null(\"null\")\n\n[1] FALSE\n\nis.null(NULL)\n\n[1] TRUE",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data Structures</span>"
    ]
  },
  {
    "objectID": "chapters/02_data-structures.html#sec-indexing",
    "href": "chapters/02_data-structures.html#sec-indexing",
    "title": "2  Data Structures",
    "section": "2.4 Indexing",
    "text": "2.4 Indexing\nThe way to get and set elements of a data structure is by indexing. Sometimes this is also called subsetting or (element) extraction. Indexing is a fundamental operation in R, key to reasoning about how to solve problems with the language.\nWe first saw indexing in Section 1.9, where we used $, the dollar sign operator, to get and set data frame columns. We saw indexing again in Section 2.1.2, where we used [, the indexing or square bracket operator, to get and set elements of vectors.\nThe indexing operator [ is R’s primary operator for indexing. It works in four different ways, depending on the type of the index you use. These four ways to select elements are:\n\nAll elements, with no index\nBy position, with a numeric index\nBy name, with a character index\nBy condition, with a logical index\n\nLet’s examine each in more detail. We’ll use this vector as an example, to keep things concise:\n\nx = c(a = 10, b = 20, c = 30, d = 40, e = 50)\nx\n\n a  b  c  d  e \n10 20 30 40 50 \n\n\nEven though we’re using a vector here, the indexing operator works with almost all data structures, including factors, lists, matrices, and data frames. We’ll look at unique behavior for some of these later on.\n\n2.4.1 All Elements\nThe first way to use [ to select elements is to leave the index blank. This selects all elements:\n\nx[]\n\n a  b  c  d  e \n10 20 30 40 50 \n\n\nThis way of indexing is rarely used for getting elements, since it’s the same as entering the variable name without the indexing operator. Instead, its main use is for setting elements. Suppose we want to set all the elements of x to 5. You might try writing this:\n\nx = 5\nx\n\n[1] 5\n\n\nRather than setting each element to 5, this sets x to the scalar 5, which is not what we want. Let’s reset the vector and try again, this time using the indexing operator:\n\nx = c(a = 10, b = 20, c = 30, d = 40, e = 50)\nx[] = 5\nx\n\na b c d e \n5 5 5 5 5 \n\n\nAs you can see, now all the elements are 5. So the indexing operator is necessary to specify that we want to set the elements rather than the whole variable.\nLet’s reset x one more time, so that we can use it again in the next example:\n\nx = c(a = 10, b = 20, c = 30, d = 40, e = 50)\n\n\n\n2.4.2 By Position\nThe second way to use [ is to select elements by position. This happens when you use an integer or numeric index. We already saw the basics of this in Section 2.1.2.\nThe positions of the elements in a vector (or other data structure) correspond to numbers starting from 1 for the first element. This way of indexing is frequently used together with the sequence operator : to get ranges of values. For instance, let’s get the 2nd through 4th elements of x:\n\nx[2:4]\n\n b  c  d \n20 30 40 \n\n\nYou can also use this way of indexing to set specific elements or ranges of elements. For example, let’s set the 3rd and 5th elements of x to 9 and 7, respectively:\n\nx[c(3, 5)] = c(9, 7)\nx\n\n a  b  c  d  e \n10 20  9 40  7 \n\n\nWhen getting elements, you can repeat numbers in the index to get the same element more than once. You can also use the order of the numbers to control the order of the elements:\n\nx[c(2, 1, 2, 2)]\n\n b  a  b  b \n20 10 20 20 \n\n\nFinally, if the index contains only negative numbers, the elements at those positions are excluded rather than selected. For instance, let’s get all elements except the 1st and 5th:\n\nx[-c(1, 5)]\n\n b  c  d \n20  9 40 \n\n\nWhen you index by position, the index should always be all positive or all negative. Using a mix of positive and negative numbers causes R to emit error rather than returning elements, since it’s unclear what the result should be:\n\nx[c(-1, 2)]\n\nError in x[c(-1, 2)]: only 0's may be mixed with negative subscripts\n\n\n\n\n2.4.3 By Name\nThe third way to use [ is to select elements by name. This happens when you use a character vector as the index, and only works with named data structures.\nLike indexing by position, you can use indexing by name to get or set elements. You can also use it to repeat elements or change the order. Let’s get elements a, c, d, and a again from the vector x:\n\ny = x[c(\"a\", \"c\", \"d\", \"a\")]\ny\n\n a  c  d  a \n10  9 40 10 \n\n\nElement names are generally unique, but if they’re not, indexing by name gets or sets the first element whose name matches the index:\n\ny[\"a\"]\n\n a \n10 \n\n\nLet’s reset x again to prepare for learning about the final way to index:\n\nx = c(a = 10, b = 20, c = 30, d = 40, e = 50)\n\n\n\n2.4.4 By Condition\nThe fourth and final way to use [ is to select elements based on a condition. This happens when you use a logical vector as the index. The logical vector should have the same length as what you’re indexing, and will be recycled if it doesn’t.\n\nCongruent Vectors\nTo understand indexing by condition, we first need to learn about congruent vectors. Two vectors are congruent if they have the same length and they correspond element-by-element.\nFor example, suppose you do a survey that records each respondent’s favorite animal and age. These are two different vectors of information, but each person will have a response for both. So you’ll have two vectors that are the same length:\n\nanimal = c(\"dog\", \"cat\", \"iguana\")\nage = c(31, 24, 72)\n\nThe 1st element of each vector corresponds to the 1st person, the 2nd to the 2nd person, and so on. These vectors are congruent.\nNotice that columns in a data frame are always congruent!\n\n\nBack to Indexing\nWhen you index by condition, the index should generally be congruent to the object you’re indexing. Elements where the index is TRUE are kept and elements where the index is FALSE are dropped.\nIf you create the index from a condition on the object, it’s automatically congruent. For instance, let’s make a condition based on the vector x:\n\nis_small = x &lt; 25\nis_small\n\n    a     b     c     d     e \n TRUE  TRUE FALSE FALSE FALSE \n\n\nThe 1st element in the logical vector is_small corresponds to the 1st element of x, the 2nd to the 2nd, and so on. The vectors x and is_small are congruent.\nIt makes sense to use is_small as an index for x, and it gives us all the elements less than 25:\n\nx[is_small]\n\n a  b \n10 20 \n\n\nOf course, you can also avoid using an intermediate variable for the condition:\n\nx[x &gt; 10]\n\n b  c  d  e \n20 30 40 50 \n\n\nIf you create index some other way (not using the object), make sure that it’s still congruent to the object. Otherwise, the subset returned from indexing might not be meaningful.\nYou can also use indexing by condition to set elements, just as the other ways of indexing can be used to set elements. For instance, let’s set all the elements of x that are greater than 10 to the missing value NA:\n\nx[x &gt; 10] = NA\nx\n\n a  b  c  d  e \n10 NA NA NA NA \n\n\n\n\n\n2.4.5 Logic\nAll of the conditions we’ve seen so far have been written in terms of a single test. If you want to use more sophisticated conditions, R provides operators to negate and combine logical vectors. These operators are useful for working with logical vectors even outside the context of indexing.\n\nNegation\nThe NOT operator ! converts TRUE to FALSE and FALSE to TRUE:\n\nx = c(TRUE, FALSE, TRUE, TRUE, NA)\nx\n\n[1]  TRUE FALSE  TRUE  TRUE    NA\n\n!x\n\n[1] FALSE  TRUE FALSE FALSE    NA\n\n\nYou can use ! with a condition:\n\ny = c(\"hi\", \"hello\")\n!(y == \"hi\")\n\n[1] FALSE  TRUE\n\n\nThe NOT operator is vectorized.\n\n\nCombinations\nR also has operators for combining logical values.\nThe AND operator & returns TRUE only when both arguments are TRUE. Here are some examples:\n\nFALSE & FALSE\n\n[1] FALSE\n\nTRUE & FALSE\n\n[1] FALSE\n\nFALSE & TRUE\n\n[1] FALSE\n\nTRUE & TRUE\n\n[1] TRUE\n\nc(TRUE, FALSE, TRUE) & c(TRUE, TRUE, FALSE)\n\n[1]  TRUE FALSE FALSE\n\n\nThe OR operator | returns TRUE when at least one argument is TRUE. Let’s see some examples:\n\nFALSE | FALSE\n\n[1] FALSE\n\nTRUE | FALSE\n\n[1] TRUE\n\nFALSE | TRUE\n\n[1] TRUE\n\nTRUE | TRUE\n\n[1] TRUE\n\nc(TRUE, FALSE) | c(TRUE, TRUE)\n\n[1] TRUE TRUE\n\n\nBe careful: everyday English is less precise than logic. You might say:\n\nI want all subjects with age over 50 and all subjects that like cats.\n\nBut in logic this means:\n(subject age over 50) OR (subject likes cats)\nSo think carefully about whether you need both conditions to be true (AND) or at least one (OR).\nRarely, you might want exactly one condition to be true. The XOR (eXclusive OR) function xor() returns TRUE when exactly one argument is TRUE. For example:\n\nxor(FALSE, FALSE)\n\n[1] FALSE\n\nxor(TRUE, FALSE)\n\n[1] TRUE\n\nxor(TRUE, TRUE)\n\n[1] FALSE\n\n\nThe AND, OR, and XOR operators are vectorized.\n\n\nShort-circuiting\nThe second argument is irrelevant in some conditions:\n\nFALSE & is always FALSE\nTRUE | is always TRUE\n\nNow imagine you have FALSE & long_computation(). You can save time by skipping long_computation(). A short-circuit operator does exactly that.\nR has two short-circuit operators:\n\n&& is a short-circuited &\n|| is a short-circuited |\n\nThese operators only evaluate the second argument if it is necessary to determine the result. Here are some of these:\n\nTRUE && FALSE\n\n[1] FALSE\n\nTRUE && TRUE\n\n[1] TRUE\n\nTRUE || TRUE\n\n[1] TRUE\n\n\nThe short-circuit operators are not vectorized—they only accept length-1 arguments:\n\nc(TRUE, FALSE) && c(TRUE, TRUE)\n\nError in c(TRUE, FALSE) && c(TRUE, TRUE): 'length = 2' in coercion to 'logical(1)'\n\n\nBecause of this, you can’t use short-circuit operators for indexing. Their main use is in writing conditions for if-expressions, which we’ll learn about later on.\n\n\n\n\n\n\nNote\n\n\n\nPrior to R 4.3.0, short-circuit operators didn’t raise an error for inputs with length greater than 1 (and thus were a common source of bugs).",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data Structures</span>"
    ]
  },
  {
    "objectID": "chapters/02_data-structures.html#exercises",
    "href": "chapters/02_data-structures.html#exercises",
    "title": "2  Data Structures",
    "section": "2.5 Exercises",
    "text": "2.5 Exercises\n\n2.5.1 Exercise\nThe rep function is another way to create a vector. Read the help file for the rep function.\n\nWhat does the rep function do to create a vector? Give an example.\nThe rep function has parameters times and each. What does each do, and how do they differ? Give examples for both.\nCan you set both of times and each in a single call to rep? If the function raises an error, explain what the error message means. If the function returns a result, explain how the result corresponds to the arguments you chose.\n\n\n\n2.5.2 Exercise\nConsidering how implicit coercion works (Section 2.2.2):\n\nWhy does \"3\" + 4 raise an error?\nWhy does \"TRUE\" == TRUE return TRUE?\nWhy does \"FALSE\" &lt; TRUE return TRUE?\n\n\n\n2.5.3 Exercise\n\nSection 2.3.1 described the missing value as a “chameleon” because it can have many different types. Is Inf also a chameleon? Use examples to justify your answer.\nThe missing value is also “contagious” because using it as an argument usually produces another missing value. Is Inf contagious? Again, use examples to justify your answer.\n\n\n\n2.5.4 Exercise\n\nCreate a new data frame from the least terns data with the following characteristics:\n\nEach entry’s year is between 2010 and 2019 (inclusive).\nEach entry reports at least 100 breeding pairs.\nThe columns are year, site_name, bp_min, bp_max, total_nests.\n\nUse this data frame for the remaining questions.\nCount the number of entries for each site. How many sites have at least 100 breeding pairs across all 10 years?\nWhich site-year combination has the highest number of nests?",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data Structures</span>"
    ]
  },
  {
    "objectID": "chapters/03_exploring-data.html",
    "href": "chapters/03_exploring-data.html",
    "title": "3  Exploring Data",
    "section": "",
    "text": "3.1 Indexing Data Frames\nNow that you have a solid foundation in the basic functions and data structures of R, you can move on to its most popular application: data analysis. In this chapter, you’ll learn how to efficiently explore and summarize data with visualizations and statistics. Along the way, you’ll also learn how to use apply functions, which are essential to fluency in R.\nThis section explains how to get and set data in a data frame, expanding on the indexing techniques you learned in Section 2.4. Under the hood, every data frame is a list, so first you’ll learn about indexing lists.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Exploring Data</span>"
    ]
  },
  {
    "objectID": "chapters/03_exploring-data.html#indexing-data-frames",
    "href": "chapters/03_exploring-data.html#indexing-data-frames",
    "title": "3  Exploring Data",
    "section": "",
    "text": "3.1.1 Indexing Lists\nLists are a container for other types of R objects. When you select an element from a list, you can either keep the container (the list) or discard it. The indexing operator [ almost always keeps containers.\nAs an example, let’s get some elements from a small list:\n\nx = list(first = c(1, 2, 3), second = sin, third = c(\"hi\", \"hello\"))\ny = x[c(1, 3)]\ny\n\n$first\n[1] 1 2 3\n\n$third\n[1] \"hi\"    \"hello\"\n\nclass(y)\n\n[1] \"list\"\n\n\nThe result is still a list. Even if we get just one element, the result of indexing a list with [ is a list:\n\nclass(x[1])\n\n[1] \"list\"\n\n\nSometimes this will be exactly what we want. But what if we want to get the first element of x so that we can use it in a vectorized function? Or in a function that only accepts numeric arguments? We need to somehow get the element and discard the container.\nThe solution to this problem is the extraction operator [[, which is also called the double square bracket operator. The extraction operator is the primary way to get and set elements of lists and other containers.\nUnlike the indexing operator [, the extraction operator always discards the container:\n\nx[[1]]\n\n[1] 1 2 3\n\nclass(x[[1]])\n\n[1] \"numeric\"\n\n\nThe tradeoff is that the extraction operator can only get or set one element at a time. Note that the element can be a vector, as above. Because it can only get or set one element at a time, the extraction operator can only index by position or name. Blank and logical indexes are not allowed.\nThe final difference between the index operator [ and the extraction operator [[ has to do with how they handle invalid indexes. The index operator [ returns NA for invalid vector elements, and NULL for invalid list elements:\n\nc(1, 2)[10]\n\n[1] NA\n\nx[10]\n\n$&lt;NA&gt;\nNULL\n\n\nOn the other hand, the extraction operator [[ raises an error for invalid elements:\n\nx[[10]]\n\nError in x[[10]]: subscript out of bounds\n\n\nThe indexing operator [ and the extraction operator [[ both work with any data structure that has elements. However, you’ll generally use the indexing operator [ to index vectors, and the extraction operator [[ to index containers (such as lists).\n\n\n3.1.2 Two-dimensional Indexing\nFor two-dimensional objects, like matrices and data frames, you can pass the indexing operator [ or the extraction operator [[ a separate index for each dimension. The rows come first:\nDATA[ROWS, COLUMNS]\nFor instance, let’s get the first 3 rows and all columns of the least terns data:\n\nterns[1:3, ]\n\n  year             site_name   site_name_2013_2018   site_name_1988_2001\n1 2000 PITTSBURG POWER PLANT Pittsburg Power Plant  NA_2013_2018 POLYGON\n2 2000    ALBANY CENTRAL AVE         NA_NO POLYGON Albany Central Avenue\n3 2000         ALAMEDA POINT         Alameda Point  NA_2013_2018 POLYGON\n   site_abbr region_3 region_4   event bp_min bp_max fl_min fl_max total_nests\n1 PITT_POWER S.F._BAY S.F._BAY LA_NINA     15     15     16     18          15\n2 AL_CENTAVE S.F._BAY S.F._BAY LA_NINA      6     12      1      1          20\n3    ALAM_PT S.F._BAY S.F._BAY LA_NINA    282    301    200    230         312\n  nonpred_eggs nonpred_chicks nonpred_fl nonpred_ad pred_control pred_eggs\n1            3              0          0          0                      4\n2           NA             NA         NA         NA                     NA\n3          124             81          2          1                     17\n  pred_chicks pred_fl pred_ad pred_pefa pred_coy_fox pred_meso pred_owlspp\n1           2       0       0         N            N         N           N\n2          NA      NA      NA                                             \n3           0       0       0         N            N         N           N\n  pred_corvid pred_other_raptor pred_other_avian pred_misc total_pefa\n1           Y                 Y                N         N          0\n2                                                                  NA\n3           N                 Y                Y         N          0\n  total_coy_fox total_meso total_owlspp total_corvid total_other_raptor\n1             0          0            0            4                  2\n2            NA         NA           NA           NA                 NA\n3             0          0            0            0                  6\n  total_other_avian total_misc first_observed last_observed first_nest\n1                 0          0     2000-05-11    2000-08-05 2000-05-26\n2                NA         NA                                        \n3                11          0     2000-05-01    2000-08-19 2000-05-16\n  first_chick first_fledge\n1  2000-06-18   2000-07-08\n2                         \n3  2000-06-07   2000-06-30\n\n\nAs we saw in Section 2.4.1, leaving an index blank means all elements.\nAs another example, let’s get the 3rd and 5th row, and the 2nd and 4th column:\n\nterns[c(3, 5), c(2, 4)]\n\n                                     site_name  site_name_1988_2001\n3                                ALAMEDA POINT NA_2013_2018 POLYGON\n5 OCEANO DUNES STATE VEHICULAR RECREATION AREA NA_2013_2018 POLYGON\n\n\nMixing several different ways of indexing is allowed. So for example, we can get the same above, but use column names instead of positions:\n\nterns[c(3, 5), c(\"year\", \"site_name\")]\n\n  year                                    site_name\n3 2000                                ALAMEDA POINT\n5 2000 OCEANO DUNES STATE VEHICULAR RECREATION AREA\n\n\nFor data frames, it’s especially common to index the rows by condition and the columns by name. For instance, let’s get the site_name and bp_min columns for all year 2000 observations in the least terns data set:\n\nresult = terns[terns$year == 2000, c(\"site_name\", \"bp_min\")]\nhead(result)\n\n                                     site_name bp_min\n1                        PITTSBURG POWER PLANT     15\n2                           ALBANY CENTRAL AVE      6\n3                                ALAMEDA POINT    282\n4                               KETTLEMAN CITY      2\n5 OCEANO DUNES STATE VEHICULAR RECREATION AREA      4\n6              RANCHO GUADALUPE DUNES PRESERVE      9\n\n\nAlso see Section 5.2 for a case where the [ operator behaves in a surprising way.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Exploring Data</span>"
    ]
  },
  {
    "objectID": "chapters/03_exploring-data.html#sec-packages",
    "href": "chapters/03_exploring-data.html#sec-packages",
    "title": "3  Exploring Data",
    "section": "3.2 Packages",
    "text": "3.2 Packages\nA package is a collection of functions for use in R. Packages usually include documentation, and can also contain examples, vignettes, and data sets. Most packages are developed by members of the R community, so quality varies. There are also a few packages that are built into R but provide extra features. We’ll use a package in Section 3.3, so we’re learning about them now.\nThe Comprehensive R Archive Network, or CRAN, is the main place people publish packages. As of writing, there were 18,619 packages posted to CRAN. This number has been steadily increasing as R has grown in popularity.\nPackages span a wide variety of topics and disciplines. There are packages related to statistics, social sciences, geography, genetics, physics, biology, pharmacology, economics, agriculture, and more. The best way to find packages is to search online, but the CRAN website also provides “task views” if you want to browse popular packages related to a specific discipline.\nThe install.packages function installs one or more packages from CRAN. Its first argument is the packages to install, as a character vector.\nWhen you run install.packages, R will ask you to choose which mirror to download the package from. A mirror is a web server that has the same set of files as some other server. Mirrors are used to make downloads faster and to provide redundancy so that if a server stops working, files are still available somewhere else. CRAN has dozens of mirrors; you should choose one that’s geographically nearby, since that usually produces the best download speeds. If you aren’t sure which mirror to choose, you can use the 0-Cloud mirror, which attempts to automatically choose a mirror near you.\nAs an example, here’s the code to install the remotes package:\n\ninstall.packages(\"remotes\")\n\nIf you run the code above, you’ll be asked to select a mirror, and then see output that looks something like this:\n--- Please select a CRAN mirror for use in this session ---\ntrying URL 'https://cloud.r-project.org/src/contrib/remotes_2.3.0.tar.gz'\nContent type 'application/x-gzip' length 148405 bytes (144 KB)\n==================================================\ndownloaded 144 KB\n\n* installing *source* package ‘remotes’ ...\n** package ‘remotes’ successfully unpacked and MD5 sums checked\n** using staged installation\n** R\n** inst\n** byte-compile and prepare package for lazy loading\n** help\n*** installing help indices\n** building package indices\n** installing vignettes\n** testing if installed package can be loaded from temporary location\n** testing if installed package can be loaded from final location\n** testing if installed package keeps a record of temporary installation path\n* DONE (remotes)\n\nThe downloaded source packages are in\n        ‘/tmp/Rtmp8t6iGa/downloaded_packages’\nR goes through a variety of steps to install a package, even installing other packages that the package depends on. You can tell that a package installation succeeded by the final line DONE. When a package installation fails, R prints an error message explaining the problem instead.\nOnce a package is installed, it stays on your computer until you remove it or remove R. This means you only need to install each package once. However, most packages are periodically updated. You can reinstall a package using install.packages the same way as above to get the latest version.\nAlternatively, you can update all of the R packages you have installed at once by calling the update.packages function. Beware that this may take a long time if you have a lot of packages installed.\nThe function to remove packages is remove.packages. Like install.packages, this function’s first argument is the packages to remove, as a character vector.\nIf you want to see which packages are installed, you can use the installed.packages function. It does not require any arguments. It returns a matrix with one row for each package and columns that contain a variety of information. Here’s an example:\n\npackages = installed.packages()\n# Just print the version numbers for 10 packages.\npackages[1:10, \"Version\"]\n\nassertthat       base  base64enc       boot      bslib     cachem cellranger \n   \"0.2.1\"    \"4.5.1\"    \"0.1-3\"   \"1.3-32\"    \"0.9.0\"    \"1.1.0\"    \"1.1.0\" \n     class        cli    cluster \n  \"7.3-23\"    \"3.6.5\"  \"2.1.8.1\" \n\n\nYou’ll see a different set of packages, since you have a different computer.\nBefore you can use the functions (or other resources) in an installed package, you must load the package with the library function. R doesn’t load packages automatically because each package you load uses memory and may conflict with other packages. Thus you should only load the packages you need for whatever it is that you want to do. When you restart R, the loaded packages are cleared and you must again load any packages you want to use.\nLet’s load the remotes package we installed earlier:\n\nlibrary(\"remotes\")\n\nThe library function works with or without quotes around the package name, so you may also see people write things like library(remotes). We recommend using quotes to make it unambiguous that you are not referring to a variable.\nA handful of packages print out a message when loaded, but the vast majority do not. Thus you can assume the call to library was successful if nothing is printed. If something goes wrong while loading a package, R will print out an error message explaining the problem.\nFinally, not all R packages are published to CRAN. GitHub is another popular place to publish R packages, especially ones that are experimental or still in development. Unlike CRAN, GitHub is a general-purpose website for publishing code written in any programming language, so it contains much more than just R packages and is not specifically R-focused.\nThe remotes package that we just installed and loaded provides functions to install packages from GitHub. It is generally better to install packages from CRAN when they are available there, since the versions on CRAN tend to be more stable and intended for a wide audience. However, if you want to install a package from GitHub, you can learn more about the remotes package by reading its online documentation.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Exploring Data</span>"
    ]
  },
  {
    "objectID": "chapters/03_exploring-data.html#sec-data-visualization",
    "href": "chapters/03_exploring-data.html#sec-data-visualization",
    "title": "3  Exploring Data",
    "section": "3.3 Data Visualization",
    "text": "3.3 Data Visualization\nThere are three popular systems for creating visualizations in R:\n\nThe base R functions (primarily the plot function)\nThe lattice package\nThe ggplot2 package\n\nThese three systems are not interoperable! Consequently, it’s best to choose one to use exclusively. Compared to base R, both lattice and ggplot2 are better at handling grouped data and generally require less code to create a nice-looking visualization.\nThe ggplot2 package is so popular that there are now knockoff packages for other data-science-oriented programming languages like Python and Julia. The package is also part of the Tidyverse, a popular collection of R packages designed to work well together. Because of these advantages, we’ll use ggplot2 for visualizations in this and all future lessons.\nggplot2 has detailed documentation and also a cheatsheet.\nThe “gg” in ggplot2 stands for grammar of graphics. The idea of a grammar of graphics is that visualizations can be built up in layers. In ggplot2, the three layers every plot must have are:\n\nData\nGeometry\nAesthetics\n\nThere are also several optional layers. Here are a few:\n\n\n\nLayer\nDescription\n\n\n\n\nscales\nTitle, label, and axis value settings\n\n\nfacets\nSide-by-side plots\n\n\nguides\nAxis and legend position settings\n\n\nannotations\nShapes that are not mapped to data\n\n\ncoordinates\nCoordinate systems (Cartesian, logarithmic, polar)\n\n\n\nLet’s visualize the California least terns data set from Section 1.8 to see how the grammar of graphics works in practice. But what kind of plot should we make? It depends on what we want to know about the data set!\nSuppose we want to understand the relationship between the number of breeding pairs and the total number of nests at each site, and whether this relationship is affected by climate events. One way to show the relationship between two numerical features like these is to make a scatter plot.\n\n3.3.1 Loading ggplot2\nBefore we can make the plot, we need to load ggplot2. As always, if this is your first time using the package, you’ll have to install it. Then you can load the package:\n\n# install.packages(\"ggplot2\")\nlibrary(\"ggplot2\")\n\n\n\n3.3.2 Layer 1: Data\nThe data layer determines the data set(s) used to make the plot.\nggplot2 and most other Tidyverse packages are designed to work with tidy data, which means:\n\nEach feature has its own column.\nEach observation has its own row.\nEach value has its own cell.\n\nThese rules ensure data are easy to read visually and access with indexing. The least terns data set satisfies all of these rules.\n\n\n\n\n\n\nNoteSee also\n\n\n\nAll of the data sets we use in this reader are tidy. To learn how to tidy an untidy data set, see the Untidy & Relational Data chapter of DataLab’s Intermediate R workshop reader.\n\n\nTo set up the data layer, call the ggplot function on a data frame:\n\nggplot(terns)\n\n\n\n\n\n\n\n\nThis returns a blank plot. We still need to add a few more layers.\n\n\n3.3.3 Layer 2: Geometry\nThe geometry layer determines the shape or appearance of the visual elements of the plot. In other words, the geometry layer determines what kind of plot to make: one with points, lines, boxes, or something else.\nThere are many different geometries available in ggplot2. The package provides a function for each geometry, always prefixed with geom_.\nTo add a geometry layer to the plot, choose the geom_ function you want and add it to the plot with the + operator. We’ll use geom_point, which makes a scatter plot (a plot with points):\n\nggplot(terns) + geom_point()\n\nError in `geom_point()`:\n! Problem while setting up geom.\nℹ Error occurred in the 1st layer.\nCaused by error in `compute_geom_1()`:\n! `geom_point()` requires the following missing aesthetics: x and y.\n\n\nThis returns an error message that we’re missing aesthetics x and y. We’ll learn more about aesthetics in the next section, but this error message is especially helpful: it tells us exactly what we’re missing. When you use a geometry you’re unfamiliar with, it can be helpful to run the code for just the data and geometry layer like this, to see exactly which aesthetics need to be set.\nAs we’ll see later, it’s possible to add multiple geometries to a plot.\n\n\n3.3.4 Layer 3: Aesthetics\nThe aesthetic layer determines the relationship between the data and the geometry. Use the aesthetic layer to map features in the data to aesthetics (visual elements) of the geometry.\nThe aes function creates an aesthetic layer. The syntax is:\n\naes(AESTHETIC = FEATURE, ...)\n\nThe names of the aesthetics depend on the geometry, but some common ones are x, y, color, fill, shape, and size. There is more information about and examples of aesthetic names in the documentation.\nFor the scatter plot of breeding pairs against total nests, we’ll put bp_min on the x-axis and total_nests on the y-axis. Below, we set both of these aesthetics. We also enclose all of the code for the plot in parentheses () so that we can put the code for each layer on a separate line, which makes the layers easier to distinguish:\n\nggplot(terns) +\n  aes(x = bp_min, y = total_nests) +\n  geom_point()\n\nWarning: Removed 8 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nImportant\n\n\n\nIn the aes function, column names are never quoted.\n\n\n\n\n\n\n\n\nNoteNote: The Old Aesthetic Layer Syntax\n\n\n\n\n\nIn older versions of ggplot2, you must pass the aesthetic layer as the second argument of the ggplot function rather than using + to add it to the plot. This syntax is still widely used:\n\nggplot(terns, aes(x = bp_min, y = total_nests)) +\n  geom_point()\n\nWarning: Removed 8 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\n\n\n\n\n\n\n\n\n\n\nAt this point, we’ve supplied all three layers necessary to make a plot: data, geometry, and aesthetics. The plot shows what looks like a linear relationship between number of breeding pairs and total nests. To refine the plot, you can add more layers and/or set parameters on the layers you have.\nLet’s add another aesthetic to the plot: we’ll make the color and shape of each point correspond to event, the climate event for each observation:\n\nggplot(terns) +\n  aes(x = bp_min, y = total_nests, color = event, shape = event) +\n  geom_point()\n\nWarning: Removed 8 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\n\n\n\n\n\n\n\nUsing color and shape for the same feature is redundant, but ensures that the plot is accessible to colorblind people.\n\nAdditional Geometries\nEach observation in the least terns data corresponds to a specific year and site. What if we label the points with their years? You can add text labels to a plot with geom_text. The required aesthetic for this geometry is label:\n\nggplot(terns) +\n  aes(\n    x = bp_min, y = total_nests,\n    color = event, shape = event,\n    label = year\n  ) +\n  geom_point() +\n  geom_text()\n\nWarning: Removed 8 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\nWarning: Removed 8 rows containing missing values or values outside the scale range\n(`geom_text()`).\n\n\n\n\n\n\n\n\n\nThe labels make the plot more difficult to read and probably would even if we made them smaller, because there are so many points on the plot. Making a high-quality visualization is typically a process of drafting and revising, similar to writing a high-quality essay. In this example, adding year labels to the plot doesn’t work well, so we’ll backtrack and leave them off of the plot. If accounting for year was critical to our research question, we could do it in other ways, such as by making separate plots for each year.\n\n\nPer-geometry Aesthetics\nBefore we remove the labels, let’s use them to demonstrate an important point about using multiple geometry and aesthetic layers: when you add an aesthetic layer to a plot, it applies to the entire plot. You can also set an aesthetic layer for an individual geometry by passing the layer as the first argument in the geom_ function. Here’s the same plot as above, but with the color aesthetic only set for the labels:\n\nggplot(terns) +\n  aes(\n    x = bp_min, y = total_nests,\n    shape = event,\n    label = year\n  ) +\n  geom_point() +\n  geom_text(aes(color = event))\n\nWarning: Removed 8 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\nWarning: Removed 8 rows containing missing values or values outside the scale range\n(`geom_text()`).\n\n\n\n\n\n\n\n\n\nNotice that the points are no longer color-coded. Where you put aesthetic layers matters.\n\n\nConstant Aesthetics\nIf you want to set an aesthetic to a constant value, rather than one that’s data dependent, do so in the geometry layer rather than the aesthetic layer.\nFor instance, suppose we want to make all of the points blue and use only point shape to indicate climate events:\n\nggplot(terns) +\n  aes(\n    x = bp_min, y = total_nests,\n    shape = event\n  ) +\n  geom_point(color = \"blue\")\n\nWarning: Removed 8 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\n\n\n\n\n\n\n\nIf you set an aesthetic to a constant value inside of the aesthetic layer, the results you get might not be what you expect:\n\nggplot(terns) +\n  aes(\n    x = bp_min, y = total_nests,\n    color = \"blue\", shape = event,\n    label = year\n  ) +\n  geom_point() +\n  geom_text()\n\nWarning: Removed 8 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\nWarning: Removed 8 rows containing missing values or values outside the scale range\n(`geom_text()`).\n\n\n\n\n\n\n\n\n\n\n\n\n3.3.5 Layer 4: Scales\nThe scales layer controls the title, axis labels, and axis scales of the plot. Most of the functions in the scales layer are prefixed with scale_, but not all of them.\nThe labs function is especially important, because it’s used to set the title and axis labels. Visualizations should generally have a title and axis labels, to aid the viewer:\n\nggplot(terns) +\n  aes(\n    x = bp_min, y = total_nests,\n    color = event, shape = event\n  ) +\n  geom_point() +\n  labs(\n    x = \"Minimum Reported Breeding Pairs\",\n    y = \"Total Nests\",\n    color = \"Climate Event\", shape = \"Climate Event\",\n    title = \"California Least Terns: Breeding Pairs vs. Nests\"\n  )\n\nWarning: Removed 8 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\n\n\n\n\n\n\n\nNotice that to set the title for a legend with labs, you can set the parameters of the same names as the corresponding aesthetics. While our plot is still far from perfect—some of the points are hard to see because of how many there are—it’s now good enough to provide some insight into the relationship between number of breeding pairs and nests.\n\n\n3.3.6 Saving Plots\nYou can use the ggsave function to save a plot you’ve assigned to a variable or the most recent plot you created (with no argument to ggsave):\n\nggsave(\"myplot.png\")\n\nThe file format is selected automatically based on the extension. Common formats include PNG, TIFF, SVG, and PDF.\n\nPNG and SVG are good choices for sharing visualizations online, while TIFF and PDF are good choices for print. Many journals require that visualizations be in TIFF format.\n\n\n\n\n\n\n\nNoteNote: R Plot Devices\n\n\n\n\n\nYou can also save a plot with one of R’s “plot device” functions. The steps are:\n\nCall a plot device function: png, jpeg, pdf, bmp, tiff, or svg.\nRun your code to make the plot.\nCall dev.off to indicate that you’re done plotting.\n\nThis strategy works with any of R’s graphics systems (not just ggplot2).\nHere’s an example:\n\n# Run these lines in the console, not the notebook!\njpeg(\"myplot.jpeg\")\nggplot(terns) +\n  aes(\n    x = bp_min, y = total_nests,\n    color = event, shape = event\n  ) +\n  geom_point() +\n  labs(\n    x = \"Minimum Reported Breeding Pairs\",\n    y = \"Total Nests\",\n    color = \"Climate Event\", shape = \"Climate Event\",\n    title = \"California Least Terns: Breeding Pairs vs. Nests\"\n  )\ndev.off()\n\n\n\n\n\n\n3.3.7 Example: Bar Plot\nSuppose we want to visualize how many fledglings there are each year, further broken down by region. A bar plot is one appropriate way to represent this visually.\nThe geometry for a bar plot is geom_bar. Since bar plots are mainly used to display frequencies, by default the geom_bar function counts the number of observations in each category on the x-axis and displays these counts on the y-axis. You can make geom_bar display values from a column on the y-axis by setting the weight aesthetic:\n\nggplot(terns) +\n  aes(x = year, weight = fl_min, fill = region_3) +\n  geom_bar()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nNoteNote: Setting the Statistics Layer\n\n\n\n\n\nEvery geometry layer has a corresponding statistics layer, which transforms feature values into quantities to plot. For many geometries, the default statistics layer is the only one that makes sense.\nBar plots are an exception. The default statistics layer is stat_count, which counts observations. If you already have counts (or just want to display some quantities as bars), you need stat_identity (or the weight aesthetic described above). Here’s one way to change the statistics layer:\n\nggplot(terns) +\n  aes(x = year, y = fl_min, fill = region_3) +\n  geom_bar(stat = \"identity\")\n\nWarning: Removed 12 rows containing missing values or values outside the scale range\n(`geom_bar()`).\n\n\n\n\n\n\n\n\n\nThis produces the same plot as setting weight and using the default statistics layer stat_count.\n\n\n\nThe plot reveals that there are a few extraneous categories in the region_3 column: ARIZONA, KINGS, and SACRAMENTO. These might or might not be erroneous—and it would be good to investigate—but they don’t add anything to this plot, so let’s exclude them.\nLet’s also change the color map, the palette of colors used for the categories. These are both properties of the scale layer for the fill aesthetic, so we’ll use a scale_fill_ function. In particular, we’ll use the “viridis” color map, and since the fill color corresponds to categorical (discrete) data, we’ll use scale_fill_viridis_d. We’ll also add labels:\n\nterms_to_keep = c(\"S.F._BAY\", \"CENTRAL\", \"SOUTHERN\")\nterns_filtered = terns[terns$region_3 %in% terms_to_keep, ]\n\nggplot(terns_filtered) +\n  aes(x = year, weight = fl_min, fill = region_3) +\n  geom_bar() +\n  scale_fill_viridis_d() +\n  labs(\n    title = \"California Least Terns: Fledglings\",\n    x = \"Year\",\n    y = \"Minimum Reported Fledglings\",\n    fill = \"Region\"\n  )\n\n\n\n\n\n\n\n\nYou can read more about the viridis color map in ggplot2’s documentation for this function. The plot reveals that the data set is missing 2001-2003 and that overall, fledgling counts seem to be declining in recent years.\n\n\n\n\n\n\nTip\n\n\n\nThe setting position = \"dodge\" instructs geom_bar to put the bars side-by-side rather than stacking them.\n\n\n\n\n3.3.8 Visualization Design\nDesigning high-quality visualizations goes beyond just mastering which R functions to call. You also need to think carefully about what kind of data you have and what message you want to convey. This section provides a few guidelines.\nThe first step in data visualization is choosing an appropriate kind of plot. Here are some suggestions (not rules):\n\n\n\nFeature 1\nFeature 2\nPlot\n\n\n\n\ncategorical\n\nbar, dot\n\n\ncategorical\ncategorical\nbar, dot, mosaic\n\n\nnumerical\n\nbox, density, histogram\n\n\nnumerical\ncategorical\nbox, density, ridge\n\n\nnumerical\nnumerical\nline, scatter, smooth scatter\n\n\n\nIf you want to add a:\n\n3rd numerical feature, use it to change point/line sizes.\n3rd categorical feature, use it to change point/line styles.\n4th categorical feature, use side-by-side plots.\n\nOnce you’ve selected a plot, here are some rules you should almost always follow:\n\nAlways add a title and axis labels. These should be in plain English, not variable names!\nSpecify units after the axis label if the axis has units. For instance, “Height (ft)”.\nDon’t forget that many people are colorblind! Also, plots are often printed in black and white. Use point and line styles to distinguish groups; color is optional.\nAdd a legend whenever you’ve used more than one point or line style.\nAlways write a few sentences explaining what the plot reveals. Don’t describe the plot, because the reader can just look at it. Instead, explain what they can learn from the plot and point out important details that are easily overlooked.\nSometimes points get plotted on top of each other. This is called overplotting. Plots with a lot of overplotting can be hard to read and can even misrepresent the data by hiding how many points are present. Use a two-dimensional density plot or jitter the points to deal with overplotting.\nFor side-by-side plots, use the same axis scales for both plots so that comparing them is not deceptive.\n\n\n\n\n\n\n\nNoteSee also\n\n\n\nVisualization design is a deep topic, and whole books have been written about it. One resource where you can learn more is DataLab’s Principles of Data Visualization Workshop Reader.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Exploring Data</span>"
    ]
  },
  {
    "objectID": "chapters/03_exploring-data.html#sec-apply-functions",
    "href": "chapters/03_exploring-data.html#sec-apply-functions",
    "title": "3  Exploring Data",
    "section": "3.4 Apply Functions",
    "text": "3.4 Apply Functions\nSection 2.1.3 introduced vectorization, a convenient and efficient way to compute multiple results. That section also mentioned that some of R’s functions—the ones that summarize or aggregate data—are not vectorized.\nThe class function is an example of a function that’s not vectorized. If we call the class function on the least terns data set, we get just one result for the data set as a whole:\n\nclass(terns)\n\n[1] \"data.frame\"\n\n\nWhat if we want to get the class of each column? We can get the class for a single column by selecting the column with $, the dollar sign operator:\n\nclass(terns$year)\n\n[1] \"integer\"\n\n\nBut what if we want the classes for all the columns? We could write a call to class for each column, but that would be tedious. When you’re working with a programming language, you should try to avoid tedium; there’s usually a better, more automated way.\nSection 2.2.1 pointed out that data frames are technically lists, where each column is one element. With that in mind, what we need here is a line of code that calls class on each element of the data frame. The idea is similar to vectorization, but since we have a list and a non-vectorized function, we have to do a bit more than just call class(terns).\nThe lapply function calls, or applies, a function on each element of a list or vector. The syntax is:\nlapply(X, FUN, ...)\nThe function FUN is called once for each element of X, with the element as the first argument. The ... is for additional arguments to FUN, which are held constant across all the elements.\nLet’s try this out with the least terns data and the class function:\n\nlapply(terns, class)\n\n$year\n[1] \"integer\"\n\n$site_name\n[1] \"character\"\n\n$site_name_2013_2018\n[1] \"character\"\n\n$site_name_1988_2001\n[1] \"character\"\n\n$site_abbr\n[1] \"character\"\n\n$region_3\n[1] \"character\"\n\n$region_4\n[1] \"character\"\n\n$event\n[1] \"character\"\n\n$bp_min\n[1] \"numeric\"\n\n$bp_max\n[1] \"numeric\"\n\n$fl_min\n[1] \"integer\"\n\n$fl_max\n[1] \"integer\"\n\n$total_nests\n[1] \"integer\"\n\n$nonpred_eggs\n[1] \"integer\"\n\n$nonpred_chicks\n[1] \"integer\"\n\n$nonpred_fl\n[1] \"integer\"\n\n$nonpred_ad\n[1] \"integer\"\n\n$pred_control\n[1] \"character\"\n\n$pred_eggs\n[1] \"integer\"\n\n$pred_chicks\n[1] \"integer\"\n\n$pred_fl\n[1] \"integer\"\n\n$pred_ad\n[1] \"integer\"\n\n$pred_pefa\n[1] \"character\"\n\n$pred_coy_fox\n[1] \"character\"\n\n$pred_meso\n[1] \"character\"\n\n$pred_owlspp\n[1] \"character\"\n\n$pred_corvid\n[1] \"character\"\n\n$pred_other_raptor\n[1] \"character\"\n\n$pred_other_avian\n[1] \"character\"\n\n$pred_misc\n[1] \"character\"\n\n$total_pefa\n[1] \"integer\"\n\n$total_coy_fox\n[1] \"integer\"\n\n$total_meso\n[1] \"integer\"\n\n$total_owlspp\n[1] \"integer\"\n\n$total_corvid\n[1] \"integer\"\n\n$total_other_raptor\n[1] \"integer\"\n\n$total_other_avian\n[1] \"integer\"\n\n$total_misc\n[1] \"integer\"\n\n$first_observed\n[1] \"character\"\n\n$last_observed\n[1] \"character\"\n\n$first_nest\n[1] \"character\"\n\n$first_chick\n[1] \"character\"\n\n$first_fledge\n[1] \"character\"\n\n\nThe result is similar to if the class function was vectorized. In fact, if we use a vector and a vectorized function with lapply, the result is nearly identical to the result from vectorization:\n\nx = c(1, 2, pi)\n\nsin(x)\n\n[1] 8.414710e-01 9.092974e-01 1.224647e-16\n\nlapply(x, sin)\n\n[[1]]\n[1] 0.841471\n\n[[2]]\n[1] 0.9092974\n\n[[3]]\n[1] 1.224647e-16\n\n\nThe only difference is that the result from lapply is a list. In fact, the lapply function always returns a list with one element for each element of the input data. The “l” in lapply stands for “list”.\nThe lapply function is one member of a family of functions called apply functions. All of the apply functions provide ways to apply a function repeatedly to different parts of a data structure. We’ll meet a few more apply functions soon.\nWhen you have a choice between using vectorization or an apply function, you should always choose vectorization. Vectorization is clearer—compare the two lines of code above—and it’s also significantly more efficient. In fact, vectorization is the most efficient way to call a function repeatedly in R.\nAs we saw with the class function, there are some situations where vectorization is not possible. That’s when you should think about using an apply function.\n\n3.4.1 The sapply Function\nThe related sapply function calls a function on each element of a list or vector, and simplifies the result. That last part is the crucial difference compared to lapply. When results from the calls all have the same type and length, sapply returns a vector or matrix instead of a list. When the results have different types or lengths, the result is the same as for lapply. The “s” in sapply stands for “simplify”.\nFor instance, if we use sapply to find the classes of the columns in the least terns data, we get a character vector:\n\nsapply(terns, class)\n\n               year           site_name site_name_2013_2018 site_name_1988_2001 \n          \"integer\"         \"character\"         \"character\"         \"character\" \n          site_abbr            region_3            region_4               event \n        \"character\"         \"character\"         \"character\"         \"character\" \n             bp_min              bp_max              fl_min              fl_max \n          \"numeric\"           \"numeric\"           \"integer\"           \"integer\" \n        total_nests        nonpred_eggs      nonpred_chicks          nonpred_fl \n          \"integer\"           \"integer\"           \"integer\"           \"integer\" \n         nonpred_ad        pred_control           pred_eggs         pred_chicks \n          \"integer\"         \"character\"           \"integer\"           \"integer\" \n            pred_fl             pred_ad           pred_pefa        pred_coy_fox \n          \"integer\"           \"integer\"         \"character\"         \"character\" \n          pred_meso         pred_owlspp         pred_corvid   pred_other_raptor \n        \"character\"         \"character\"         \"character\"         \"character\" \n   pred_other_avian           pred_misc          total_pefa       total_coy_fox \n        \"character\"         \"character\"           \"integer\"           \"integer\" \n         total_meso        total_owlspp        total_corvid  total_other_raptor \n          \"integer\"           \"integer\"           \"integer\"           \"integer\" \n  total_other_avian          total_misc      first_observed       last_observed \n          \"integer\"           \"integer\"         \"character\"         \"character\" \n         first_nest         first_chick        first_fledge \n        \"character\"         \"character\"         \"character\" \n\n\nLikewise, if we use sapply to compute the sin values, we get a numeric vector, the same as from vectorization:\n\nsapply(x, sin)\n\n[1] 8.414710e-01 9.092974e-01 1.224647e-16\n\n\nIn spite of that, vectorization is still more efficient than sapply, so use vectorization instead when possible.\nApply functions are incredibly useful for summarizing data. For example, suppose we want to compute the frequencies for all of the columns in the least terns data set that aren’t numeric.\nFirst, we need to identify the columns. One way to do this is with the is.numeric function. Despite the name, this function actually tests whether its argument is a real number, not whether it its argument is a numeric vector. In other words, it also returns true for integer values. We can use sapply to apply this function to all of the columns in the least terns data set:\n\nis_not_number = !sapply(terns, is.numeric)\nis_not_number\n\n               year           site_name site_name_2013_2018 site_name_1988_2001 \n              FALSE                TRUE                TRUE                TRUE \n          site_abbr            region_3            region_4               event \n               TRUE                TRUE                TRUE                TRUE \n             bp_min              bp_max              fl_min              fl_max \n              FALSE               FALSE               FALSE               FALSE \n        total_nests        nonpred_eggs      nonpred_chicks          nonpred_fl \n              FALSE               FALSE               FALSE               FALSE \n         nonpred_ad        pred_control           pred_eggs         pred_chicks \n              FALSE                TRUE               FALSE               FALSE \n            pred_fl             pred_ad           pred_pefa        pred_coy_fox \n              FALSE               FALSE                TRUE                TRUE \n          pred_meso         pred_owlspp         pred_corvid   pred_other_raptor \n               TRUE                TRUE                TRUE                TRUE \n   pred_other_avian           pred_misc          total_pefa       total_coy_fox \n               TRUE                TRUE               FALSE               FALSE \n         total_meso        total_owlspp        total_corvid  total_other_raptor \n              FALSE               FALSE               FALSE               FALSE \n  total_other_avian          total_misc      first_observed       last_observed \n              FALSE               FALSE                TRUE                TRUE \n         first_nest         first_chick        first_fledge \n               TRUE                TRUE                TRUE \n\n\nIs it worth using R code to identify the non-numeric columns? Since there are only 43 columns in the least terns data set, maybe not. But if the data set was larger, with say 100 columns, it definitely would be.\nIn general, it’s a good habit to use R to do things rather than do them manually. You’ll get more practice programming, and your code will be more flexible if you want to adapt it to other data sets.\nNow that we know which columns are non-numeric, we can use the table function to compute frequencies. We only want to compute frequencies for those columns, so we need to subset the data:\n\nlapply(terns[, is_not_number], table)\n\n$site_name\n\n                               ALAMEDA POINT \n                                          21 \n                          ALBANY CENTRAL AVE \n                                           2 \n                                ANAHEIM LAKE \n                                           3 \n                            ARIZONA GLENDALE \n                                           1 \n        BATIQUITOS LAGOON ECOLOGICAL RESERVE \n                                          21 \n              BOLSA CHICA ECOLOGICAL RESERVE \n                                          21 \n                               BURRIS ISLAND \n                                          18 \n                CHULA VISTA WILDLIFE RESERVE \n                                          21 \n                      COAL OIL POINT RESERVE \n                                          14 \n           DSTREET FILL SWEETWATER MARSH NWR \n                                          21 \n             EDEN LANDING ECOLOGICAL RESERVE \n                                          17 \n                             FAIRBANKS RANCH \n                                           9 \n                  GUADALUPE NIPOMO DUNES NWR \n                                           1 \n                  HAYWARD REGIONAL SHORELINE \n                                          19 \n                             HOLLYWOOD BEACH \n                                          18 \n                      HUNTINGTON STATE BEACH \n                                          21 \n                              KETTLEMAN CITY \n                                          15 \n                                   LA HARBOR \n                                          21 \n                               MALIBU LAGOON \n                                           7 \n                          MCB CAMP PENDLETON \n                                          21 \n                      MISSION BAY FAA ISLAND \n                                          21 \n                  MISSION BAY MARINERS POINT \n                                          21 \n             MISSION BAY NORTH FIESTA ISLAND \n                                          21 \n           MISSION BAY SAN DIEGO RIVER MOUTH \n                                          14 \n                     MISSION BAY STONY POINT \n                                          18 \n                          MONTEZUMA WETLANDS \n                                          18 \n             NAPA SONOMA MARSH WILDLIFE AREA \n                                          17 \n                            NAS NORTH ISLAND \n                                          21 \n              NAVAL AMPHIBIOUS BASE CORONADO \n                                          21 \n                             NBVC POINT MUGU \n                                          21 \nOCEANO DUNES STATE VEHICULAR RECREATION AREA \n                                          21 \n                                ORMOND BEACH \n                                          21 \n                       PITTSBURG POWER PLANT \n                                          15 \n             RANCHO GUADALUPE DUNES PRESERVE \n                                          20 \n                      SACRAMENTO BUFFERLANDS \n                                          10 \n                                  SALTON SEA \n                                           7 \n      SAN DIEGUITO LAGOON ECOLOGICAL RESERVE \n                                          10 \n         SAN ELIJO LAGOON ECOLOGICAL RESERVE \n                                          21 \n                           SAN PABLO BAY NWR \n                                           3 \n       SANTA CLARA RIVER MCGRATH STATE BEACH \n                                          21 \n  SATICOY UNITED WATER CONSERVATION DISTRICT \n                                           9 \n                        SDIA LINDBERGH FIELD \n                                          21 \n                  SEAL BEACH NWR ANAHEIM BAY \n                                          21 \n                   SILVER STRAND STATE BEACH \n                                           1 \n    SOUTH SAN DIEGO BAY UNIT SDNWR SALTWORKS \n                                          21 \n                        TIJUANA ESTUARY NERR \n                                          21 \n        UPPER NEWPORT BAY ECOLOGICAL RESERVE \n                                          21 \n                              VANDENBERG SFB \n                                          21 \n                                VENICE BEACH \n                                          21 \n\n$site_name_2013_2018\n\n                                                          \n                                                        3 \n                                            Alameda Point \n                                                       21 \n                                             Anaheim Lake \n                                                        3 \n                                        Batiquitos Lagoon \n                                                       21 \n                                              Bolsa Chica \n                                                       21 \n                                              Bufferlands \n                                                       10 \n                                             Burris Basin \n                                                       18 \n                                           Camp Pendleton \n                                                       21 \n                              Chula Vista Wildlife Refuge \n                                                       21 \n                                   Coal Oil Point Reserve \n                                                       14 \n                                            D Street Fill \n                                                       21 \n                          Eden Landing Ecological Reserve \n                                                       17 \n                                               FAA Island \n                                                       21 \n                                          Fairbanks Ranch \n                                                        9 \n                               Hayward Regional Shoreline \n                                                       19 \n                                          Hollywood Beach \n                                                       18 \n                              Huntington Beach State Park \n                                                       21 \n                                                Kettleman \n                                                       15 \n             Lindbergh Field/Former Naval Training Center \n                                                       21 \n                                            Malibu Lagoon \n                                                        7 \n                                          Mariner's Point \n                                                       21 \n                                                Montezuma \n                                                       18 \n                                            NA_NO POLYGON \n                                                        5 \nNapa Sonoma Marsh Wildlife Area Huichica Unit (Pond 7/7A) \n                                                       17 \n                                      Naval Base Coronado \n                                                       42 \n                                          NBVC Point Mugu \n                                                       21 \n                                      North Fiesta Island \n                                                       21 \n             Oceano Dunes State Vehicular Recreation Area \n                                                       21 \n                                             Ormond Beach \n                                                       21 \n                                    Pittsburg Power Plant \n                                                       15 \n                                               Port of LA \n                                                       21 \n                          Rancho Guadalupe Dunes Preserve \n                                                       20 \n                                               Salton Sea \n                                                        7 \n                                                Saltworks \n                                                       21 \n                                    San Diego River Mouth \n                                                       14 \n                                      San Diequito Lagoon \n                                                       10 \n                                         San Elijo Lagoon \n                                                       21 \n                                        Santa Clara River \n                                                       21 \n               Saticoy United Water Conservation District \n                                                        9 \n                      Seal Beach National Wildlife Refuge \n                                                       21 \n                                              Stony Point \n                                                       18 \n                                          Tijuana Estuary \n                                                       21 \n                                        Upper Newport Bay \n                                                       21 \n                                           Vandenberg AFB \n                                                       21 \n                                             Venice Beach \n                                                       21 \n\n$site_name_1988_2001\n\n                      Albany Central Avenue  NA_2013_2018 POLYGON \n                    3                     2                   783 \n        NA_NO POLYGON \n                    3 \n\n$site_abbr\n\n  AL_CENTAVE      ALAM_PT       ANA_LK     ARZ_GLEN         BCER         BLER \n           2           21            3            1           21           21 \n     BUR_ISL     COAL_OIL           CV         D_ST         ELER     FAIR_RAN \n          18           14           21           21           17            9 \n     GND_NWR HAY_REG_SHOR           HB          HSB      KET_CTY      LA_HARB \n           1           19           18           21           15           21 \n     MAL_LAG       MB_FAA    MB_MAR_PT       MB_NFI   MB_SDRIV_S     MB_STONY \n           7           21           21           21           14           18 \n       MCBCP         MONT          NAB        NASNI        NSMWA OCEANO_DUNES \n          21           18           21           21           17           21 \n      ORMOND   PITT_POWER      PT_MUGU         RGDP   S_CLAR_MCG      SAC_BUF \n          21           15           21           20           21           10 \n        SALT     SALT_SEA    SAN_ELIJO SANDIEGU_LAG      SAT_WCD      SDIA_LF \n          21            7           21           10            9           21 \nSEAL_BCH_NWR     SLVRSTRD       SPBNWR       TJ_RIV        UNBER      VAN_SFB \n          21            1            3           21           21           21 \n     VEN_BCH \n          21 \n\n$region_3\n\n   ARIZONA    CENTRAL      KINGS   S.F._BAY SACRAMENTO   SOUTHERN \n         1         77         15        112         10        576 \n\n$region_4\n\n   ARIZONA    CENTRAL      KINGS   S.F._BAY SACRAMENTO   SOUTHERN    VENTURA \n         1         77         15        112         10        486         90 \n\n$event\n\nEL_NINO LA_NINA NEUTRAL \n    120     258     413 \n\n$pred_control\n\n      N   Y \n342 134 315 \n\n$pred_pefa\n\n      N   Y \n143 423 225 \n\n$pred_coy_fox\n\n      N   Y \n142 535 114 \n\n$pred_meso\n\n      N   Y \n142 552  97 \n\n$pred_owlspp\n\n      N   Y \n142 531 118 \n\n$pred_corvid\n\n      N   Y \n142 423 226 \n\n$pred_other_raptor\n\n      N  NN   Y \n145 437   1 208 \n\n$pred_other_avian\n\n      N   Y \n143 395 253 \n\n$pred_misc\n\n      N   Y \n159 415 217 \n\n$first_observed\n\n           2000-04-16 2000-04-19 2000-04-21 2000-04-22 2000-04-23 2000-04-26 \n       141          1          1          1          1          1          1 \n2000-04-28 2000-05-01 2000-05-04 2000-05-06 2000-05-07 2000-05-09 2000-05-11 \n         5          1          3          1          2          1          1 \n2000-05-21 2000-06-06 2000-06-10 2004-04-08 2004-04-11 2004-04-12 2004-04-21 \n         1          1          1          1          1          2          1 \n2004-04-22 2004-04-23 2004-04-27 2004-04-30 2004-05-01 2004-05-03 2004-05-07 \n         2          1          1          1          1          2          1 \n2004-05-09 2004-05-10 2004-05-14 2004-05-17 2004-05-31 2004-06-03 2005-04-14 \n         1          1          1          1          1          1          1 \n2005-04-15 2005-04-18 2005-04-19 2005-04-20 2005-04-21 2005-04-22 2005-04-23 \n         1          2          1          2          2          1          2 \n2005-04-24 2005-04-28 2005-04-29 2005-04-30 2005-05-01 2005-05-05 2005-05-07 \n         1          2          1          1          1          1          1 \n2005-05-08 2005-05-10 2005-05-13 2005-05-27 2005-05-28 2006-04-08 2006-04-10 \n         1          1          1          1          1          2          1 \n2006-04-13 2006-04-15 2006-04-16 2006-04-20 2006-04-22 2006-04-27 2006-04-28 \n         1          1          1          1          3          1          1 \n2006-05-01 2006-05-03 2006-05-08 2006-05-10 2006-05-14 2006-05-15 2006-05-20 \n         1          2          1          1          2          1          1 \n2006-06-23 2006-06-24 2007-04-16 2007-04-18 2007-04-22 2007-04-23 2007-04-24 \n         1          1          1          1          1          1          2 \n2007-04-25 2007-04-26 2007-04-28 2007-05-01 2007-05-02 2007-05-03 2007-05-11 \n         4          2          1          3          3          1          1 \n2007-05-13 2007-05-14 2007-05-18 2007-05-24 2007-06-02 2007-06-06 2007-06-08 \n         2          1          1          1          1          1          1 \n2008-04-11 2008-04-16 2008-04-23 2008-04-24 2008-04-25 2008-04-27 2008-04-28 \n         1          2          1          4          1          3          3 \n2008-05-01 2008-05-04 2008-05-05 2008-05-07 2008-05-08 2008-05-09 2008-05-12 \n         1          1          1          1          1          2          1 \n2008-05-14 2008-05-15 2008-05-21 2008-05-22 2008-05-24 2008-05-28 2008-05-31 \n         1          1          1          1          1          1          1 \n2009-04-16 2009-04-19 2009-04-22 2009-04-23 2009-04-24 2009-04-25 2009-04-26 \n         2          1          1          4          2          1          3 \n2009-04-29 2009-04-30 2009-05-02 2009-05-03 2009-05-04 2009-05-05 2009-05-06 \n         1          1          1          2          1          1          1 \n2009-05-08 2009-05-11 2009-05-13 2009-05-28 2010-04-14 2010-04-16 2010-04-17 \n         3          1          2          1          1          2          1 \n2010-04-18 2010-04-19 2010-04-21 2010-04-22 2010-04-25 2010-04-27 2010-04-28 \n         2          1          1          2          2          1          1 \n2010-04-29 2010-05-01 2010-05-02 2010-05-04 2010-05-06 2010-05-07 2010-05-13 \n         1          1          1          1          1          1          2 \n2010-05-14 2010-05-15 2010-05-16 2010-05-26 2010-05-29 2010-05-30 2010-06-09 \n         2          4          1          1          1          1          1 \n2011-04-09 2011-04-15 2011-04-18 2011-04-20 2011-04-21 2011-04-22 2011-04-24 \n         1          1          1          1          5          2          1 \n2011-04-25 2011-04-27 2011-04-28 2011-04-29 2011-05-01 2011-05-04 2011-05-05 \n         1          1          1          1          1          1          2 \n2011-05-07 2011-05-08 2011-05-11 2011-05-12 2011-05-14 2011-05-28 2011-06-11 \n         1          1          1          1          3          1          1 \n2011-06-14 2011-06-25 2012-04-14 2012-04-15 2012-04-17 2012-04-18 2012-04-19 \n         1          1          2          1          2          3          5 \n2012-04-20 2012-04-21 2012-04-22 2012-04-25 2012-04-29 2012-05-01 2012-05-03 \n         1          2          2          1          2          1          1 \n2012-05-06 2012-05-08 2012-05-10 2012-05-11 2012-05-13 2012-05-14 2012-05-23 \n         1          1          3          1          1          1          1 \n2012-05-30 2012-06-09 2013-04-14 2013-04-15 2013-04-18 2013-04-21 2013-04-24 \n         1          1          1          1          1          1          2 \n2013-04-25 2013-04-29 2013-04-30 2013-05-01 2013-05-02 2013-05-03 2013-05-07 \n         1          1          1          2          2          3          1 \n2013-05-10 2013-05-11 2013-05-12 2013-05-13 2013-05-15 2013-05-17 2013-05-19 \n         1          1          1          1          1          1          1 \n2013-05-27 2013-06-01 2013-06-09 2013-06-30 2013-07-19 2014-04-15 2014-04-17 \n         1          2          1          1          1          2          5 \n2014-04-19 2014-04-21 2014-04-24 2014-04-25 2014-04-26 2014-04-30 2014-05-01 \n         1          1          1          2          1          1          1 \n2014-05-02 2014-05-04 2014-05-08 2014-05-09 2014-05-10 2014-05-11 2014-05-16 \n         1          2          1          2          2          1          1 \n2014-05-22 2014-05-24 2014-05-25 2014-05-31 2015-04-06 2015-04-15 2015-04-17 \n         1          2          1          1          1          2          2 \n2015-04-18 2015-04-19 2015-04-22 2015-04-23 2015-04-27 2015-04-29 2015-04-30 \n         1          3          3          1          1          2          3 \n2015-05-01 2015-05-07 2015-05-08 2015-05-09 2015-05-14 2015-05-17 2015-05-20 \n         3          1          2          1          2          1          1 \n2015-05-30 2015-06-05 2015-07-05 2015-07-07 2015-07-22 2016-04-10 2016-04-11 \n         1          1          1          1          1          2          1 \n2016-04-12 2016-04-13 2016-04-14 2016-04-15 2016-04-18 2016-04-20 2016-04-21 \n         1          1          2          1          2          1          1 \n2016-04-23 2016-04-26 2016-04-30 2016-05-01 2016-05-02 2016-05-03 2016-05-04 \n         1          1          2          1          1          2          1 \n2016-05-06 2016-05-07 2016-05-11 2016-05-12 2016-05-14 2016-05-18 2016-05-25 \n         2          2          2          1          1          2          1 \n2016-05-31 2016-06-12 2016-06-16 2016-06-18 2016-07-15 2017-04-13 2017-04-14 \n         1          1          1          2          1          2          1 \n2017-04-15 2017-04-16 2017-04-17 2017-04-18 2017-04-19 2017-04-20 2017-04-21 \n         2          1          2          2          1          1          1 \n2017-04-22 2017-04-24 2017-04-26 2017-04-29 2017-05-04 2017-05-06 2017-05-07 \n         1          1          1          1          2          3          2 \n2017-05-10 2017-05-11 2017-05-12 2017-05-19 2017-05-25 2017-06-03 2017-07-02 \n         3          2          1          1          2          1          1 \n2017-07-04 2018-03-25 2018-03-30 2018-04-13 2018-04-18 2018-04-19 2018-04-20 \n         1          1          1          2          1          2          3 \n2018-04-21 2018-04-25 2018-04-26 2018-04-27 2018-04-28 2018-04-29 2018-05-04 \n         2          2          1          1          4          2          1 \n2018-05-05 2018-05-10 2018-05-11 2018-05-13 2018-05-16 2018-05-20 2018-05-21 \n         1          2          1          1          1          1          1 \n2019-04-06 2019-04-12 2019-04-14 2019-04-17 2019-04-18 2019-04-19 2019-04-20 \n         1          3          1          1          1          3          2 \n2019-04-22 2019-04-24 2019-04-26 2019-04-27 2019-05-01 2019-05-02 2019-05-03 \n         1          1          1          4          1          1          2 \n2019-05-06 2019-05-08 2019-05-09 2019-05-10 2019-05-11 2019-05-12 2020-04-06 \n         2          1          2          1          3          1          1 \n2020-04-10 2020-04-11 2020-04-17 2020-04-18 2020-04-20 2020-04-21 2020-04-23 \n         1          1          2          1          2          1          1 \n2020-04-24 2020-04-25 2020-04-26 2020-04-29 2020-04-30 2020-05-01 2020-05-02 \n         2          2          2          2          2          1          1 \n2020-05-06 2020-05-08 2020-05-09 2020-05-10 2020-05-14 2020-05-17 2020-06-24 \n         2          3          3          1          1          1          1 \n2021-04-10 2021-04-12 2021-04-13 2021-04-17 2021-04-18 2021-04-19 2021-04-21 \n         1          1          1          1          1          2          4 \n2021-04-22 2021-04-23 2021-04-24 2021-04-25 2021-04-27 2021-04-28 2021-04-29 \n         3          1          2          1          1          2          2 \n2021-05-01 2021-05-06 2021-05-11 2021-05-13 2021-05-16 2021-05-21 2021-05-26 \n         1          2          1          2          1          1          1 \n2021-05-27 2021-06-04 2021-06-16 2022-04-10 2022-04-13 2022-04-15 2022-04-17 \n         1          1          1          1          1          1          2 \n2022-04-18 2022-04-21 2022-04-22 2022-04-23 2022-04-24 2022-04-26 2022-04-28 \n         2          2          2          1          1          2          2 \n2022-04-30 2022-05-05 2022-05-06 2022-05-08 2022-05-11 2022-05-14 2022-05-15 \n         3          1          2          2          1          1          1 \n2022-05-17 2022-05-19 2022-05-25 2022-05-29 2023-04-15 2023-04-18 2023-04-20 \n         2          2          1          1          1          1          2 \n2023-04-22 2023-04-23 2023-04-24 2023-04-26 2023-04-27 2023-04-28 2023-04-29 \n         2          4          1          1          1          2          1 \n2023-04-30 2023-05-01 2023-05-03 2023-05-04 2023-05-06 2023-05-07 2023-05-10 \n         2          1          1          1          1          2          1 \n2023-05-11 2023-05-17 2023-05-19 2023-05-24 2023-05-25 2023-05-27 2023-05-28 \n         2          1          1          1          1          1          2 \n2023-07-23 2023-08-04 2028-04-19 \n         1          1          1 \n\n$last_observed\n\n           2000-07-21 2000-08-05 2000-08-12 2000-08-13 2000-08-14 2000-08-17 \n       149          1          2          1          2          1          1 \n2000-08-18 2000-08-19 2000-08-20 2000-08-24 2000-08-26 2000-08-30 2000-08-31 \n         1          1          3          1          1          1          1 \n2000-09-01 2000-09-05 2000-09-06 2000-09-07 2000-09-15 2000-09-24 2004-06-14 \n         1          1          1          1          1          1          1 \n2004-07-01 2004-07-18 2004-07-21 2004-07-22 2004-07-23 2004-08-02 2004-08-06 \n         2          1          1          1          1          1          1 \n2004-08-09 2004-08-10 2004-08-13 2004-08-16 2004-08-19 2004-08-22 2004-08-23 \n         1          1          1          1          1          1          1 \n2004-08-24 2004-09-03 2004-09-09 2004-09-10 2005-06-10 2005-06-17 2005-06-24 \n         1          1          1          1          1          1          1 \n2005-06-29 2005-07-07 2005-07-23 2005-07-26 2005-07-28 2005-07-29 2005-07-31 \n         1          1          1          1          1          1          1 \n2005-08-03 2005-08-05 2005-08-13 2005-08-15 2005-08-17 2005-08-18 2005-08-24 \n         1          1          1          1          1          1          1 \n2005-08-26 2005-08-27 2005-08-29 2005-09-08 2005-09-12 2005-09-15 2006-06-18 \n         2          1          1          2          1          1          1 \n2006-06-27 2006-07-13 2006-07-23 2006-07-29 2006-08-05 2006-08-07 2006-08-09 \n         1          1          1          1          1          2          1 \n2006-08-11 2006-08-16 2006-08-17 2006-08-18 2006-08-31 2006-09-02 2006-09-05 \n         1          2          1          1          1          1          1 \n2006-09-10 2006-09-11 2006-09-13 2006-09-17 2006-09-18 2007-06-24 2007-07-18 \n         1          1          1          1          1          1          1 \n2007-08-01 2007-08-06 2007-08-08 2007-08-10 2007-08-11 2007-08-15 2007-08-17 \n         1          1          1          1          1          2          1 \n2007-08-19 2007-08-20 2007-08-22 2007-08-24 2007-08-25 2007-09-02 2007-09-06 \n         3          3          1          2          3          1          1 \n2007-09-08 2007-09-09 2007-09-12 2007-09-15 2008-06-09 2008-06-10 2008-06-14 \n         1          1          1          1          1          1          1 \n2008-06-27 2008-07-18 2008-07-31 2008-08-05 2008-08-07 2008-08-10 2008-08-13 \n         1          2          1          1          1          1          1 \n2008-08-15 2008-08-17 2008-08-19 2008-08-21 2008-08-24 2008-08-26 2008-08-28 \n         1          3          1          1          1          1          1 \n2008-08-29 2008-08-31 2008-09-01 2008-09-04 2008-09-19 2008-09-20 2009-06-10 \n         3          2          1          1          1          1          1 \n2009-07-13 2009-07-17 2009-07-18 2009-07-24 2009-07-26 2009-07-30 2009-08-01 \n         1          2          1          1          1          1          1 \n2009-08-05 2009-08-06 2009-08-07 2009-08-10 2009-08-11 2009-08-12 2009-08-13 \n         1          1          1          1          1          1          2 \n2009-08-14 2009-08-15 2009-08-19 2009-08-20 2009-08-21 2009-08-22 2009-08-24 \n         1          1          1          1          1          1          1 \n2009-08-25 2009-08-27 2009-09-05 2009-09-26 2009-09-27 2010-07-01 2010-07-17 \n         1          1          1          1          1          2          1 \n2010-07-21 2010-07-22 2010-07-27 2010-07-29 2010-07-30 2010-08-01 2010-08-04 \n         1          1          1          3          2          1          1 \n2010-08-05 2010-08-07 2010-08-09 2010-08-11 2010-08-12 2010-08-13 2010-08-14 \n         1          1          1          2          4          1          1 \n2010-08-15 2010-08-17 2010-08-18 2010-08-21 2010-08-23 2010-08-26 2010-09-01 \n         1          1          1          1          1          1          1 \n2010-09-03 2011-06-25 2011-07-06 2011-07-19 2011-07-21 2011-07-26 2011-07-27 \n         1          1          1          1          1          1          1 \n2011-07-29 2011-07-31 2011-08-01 2011-08-02 2011-08-03 2011-08-04 2011-08-05 \n         3          1          1          1          1          1          1 \n2011-08-06 2011-08-10 2011-08-11 2011-08-13 2011-08-15 2011-08-17 2011-08-18 \n         2          1          1          1          1          1          1 \n2011-08-20 2011-08-22 2011-08-23 2011-08-24 2011-08-26 2011-08-27 2012-06-13 \n         1          1          1          1          1          3          1 \n2012-06-16 2012-06-19 2012-06-22 2012-07-01 2012-07-10 2012-07-12 2012-07-13 \n         1          1          1          1          1          1          2 \n2012-07-17 2012-07-19 2012-07-22 2012-07-24 2012-07-25 2012-07-27 2012-08-01 \n         1          1          1          1          1          1          1 \n2012-08-05 2012-08-06 2012-08-08 2012-08-09 2012-08-10 2012-08-11 2012-08-12 \n         1          1          1          1          2          1          1 \n2012-08-16 2012-08-25 2012-08-26 2012-08-31 2012-09-01 2012-09-15 2013-05-09 \n         1          1          2          1          1          2          1 \n2013-06-07 2013-06-09 2013-06-10 2013-06-23 2013-06-26 2013-06-28 2013-07-01 \n         1          1          1          1          1          1          1 \n2013-07-10 2013-07-11 2013-07-21 2013-07-26 2013-07-28 2013-08-01 2013-08-02 \n         1          1          1          1          1          1          1 \n2013-08-03 2013-08-08 2013-08-11 2013-08-12 2013-08-16 2013-08-17 2013-08-21 \n         1          1          2          1          1          1          3 \n2013-08-26 2013-08-30 2013-09-02 2014-04-21 2014-05-03 2014-06-13 2014-06-29 \n         2          1          1          1          1          1          1 \n2014-07-15 2014-07-16 2014-07-24 2014-07-25 2014-07-26 2014-07-27 2014-08-02 \n         1          3          1          1          1          1          1 \n2014-08-03 2014-08-06 2014-08-07 2014-08-09 2014-08-10 2014-08-13 2014-08-14 \n         2          2          1          1          1          1          2 \n2014-08-15 2014-08-16 2014-08-24 2014-08-30 2014-09-06 2014-09-11 2014-09-16 \n         1          1          1          1          1          1          1 \n2015-05-12 2015-06-19 2015-06-22 2015-07-05 2015-07-09 2015-07-16 2015-07-17 \n         1          1          1          1          1          2          1 \n2015-07-23 2015-07-24 2015-07-27 2015-07-28 2015-07-29 2015-07-30 2015-07-31 \n         1          2          1          1          3          1          1 \n2015-08-03 2015-08-04 2015-08-06 2015-08-07 2015-08-09 2015-08-14 2015-08-15 \n         1          1          1          1          1          1          1 \n2015-08-16 2015-08-19 2015-08-20 2015-08-21 2015-08-23 2015-08-30 2015-09-02 \n         1          1          2          1          1          1          1 \n2015-09-03 2015-09-06 2016-06-02 2016-07-07 2016-07-10 2016-07-13 2016-07-14 \n         1          1          1          1          1          2          2 \n2016-07-15 2016-07-17 2016-07-20 2016-07-27 2016-07-28 2016-07-30 2016-07-31 \n         3          1          2          1          2          1          1 \n2016-08-02 2016-08-03 2016-08-04 2016-08-06 2016-08-11 2016-08-12 2016-08-14 \n         1          2          1          3          1          1          1 \n2016-08-15 2016-08-18 2016-08-24 2016-08-25 2016-08-26 2016-08-28 2016-09-02 \n         1          3          2          1          1          1          1 \n2016-09-03 2017-05-17 2017-05-21 2017-06-07 2017-06-24 2017-07-12 2017-07-17 \n         1          1          1          1          1          2          1 \n2017-07-21 2017-07-22 2017-07-23 2017-07-24 2017-07-28 2017-07-29 2017-07-30 \n         1          1          1          1          1          1          1 \n2017-07-31 2017-08-03 2017-08-04 2017-08-05 2017-08-10 2017-08-12 2017-08-13 \n         1          2          1          1          2          1          3 \n2017-08-18 2017-08-19 2017-08-21 2017-08-23 2017-08-24 2017-08-26 2017-08-30 \n         1          1          1          1          1          2          1 \n2017-09-11 2018-06-21 2018-06-23 2018-06-25 2018-07-05 2018-07-13 2018-07-16 \n         2          1          1          1          1          1          1 \n2018-07-21 2018-07-22 2018-07-23 2018-07-25 2018-07-26 2018-07-28 2018-07-29 \n         1          1          1          2          1          1          1 \n2018-07-30 2018-08-01 2018-08-02 2018-08-04 2018-08-08 2018-08-12 2018-08-15 \n         1          1          2          2          1          1          1 \n2018-08-23 2018-08-26 2018-08-29 2018-09-03 2018-09-06 2018-09-10 2019-05-20 \n         1          1          3          1          1          1          1 \n2019-06-12 2019-07-03 2019-07-18 2019-07-21 2019-07-24 2019-07-25 2019-07-26 \n         2          1          1          1          1          1          1 \n2019-07-30 2019-07-31 2019-08-01 2019-08-08 2019-08-09 2019-08-10 2019-08-12 \n         1          1          1          1          2          1          1 \n2019-08-14 2019-08-17 2019-08-18 2019-08-19 2019-08-21 2019-08-24 2019-08-26 \n         2          1          1          2          2          2          1 \n2019-08-27 2019-08-31 2019-09-06 2019-09-08 2019-09-16 2020-06-21 2020-07-02 \n         1          1          1          1          1          1          1 \n2020-07-15 2020-07-23 2020-07-26 2020-08-03 2020-08-05 2020-08-09 2020-08-11 \n         1          3          1          1          1          1          2 \n2020-08-12 2020-08-13 2020-08-14 2020-08-16 2020-08-19 2020-08-20 2020-08-22 \n         2          3          1          1          2          1          1 \n2020-08-26 2020-08-27 2020-08-28 2020-08-30 2020-09-04 2020-09-09 2020-09-12 \n         2          2          1          1          1          1          2 \n2020-09-17 2021-05-12 2021-06-03 2021-06-04 2021-06-06 2021-06-08 2021-07-04 \n         1          1          1          1          1          1          1 \n2021-07-11 2021-07-14 2021-07-24 2021-07-29 2021-08-01 2021-08-02 2021-08-03 \n         1          1          1          1          1          1          1 \n2021-08-04 2021-08-05 2021-08-11 2021-08-12 2021-08-13 2021-08-15 2021-08-18 \n         1          1          2          1          2          1          2 \n2021-08-19 2021-08-20 2021-08-21 2021-08-22 2021-08-26 2021-08-29 2021-09-01 \n         1          2          1          1          1          1          1 \n2021-09-10 2021-09-18 2021-09-23 2022-05-15 2022-05-27 2022-06-15 2022-06-29 \n         1          1          2          1          1          1          1 \n2022-07-01 2022-07-09 2022-07-18 2022-07-19 2022-07-21 2022-07-22 2022-07-25 \n         1          1          1          1          1          1          1 \n2022-07-26 2022-07-27 2022-07-31 2022-08-01 2022-08-02 2022-08-05 2022-08-06 \n         1          1          2          1          1          1          2 \n2022-08-09 2022-08-10 2022-08-11 2022-08-12 2022-08-17 2022-08-18 2022-08-19 \n         1          1          1          1          1          1          1 \n2022-08-24 2022-08-25 2022-08-28 2022-09-01 2022-09-02 2022-09-13 2023-05-28 \n         1          1          2          1          1          1          1 \n2023-06-14 2023-07-15 2023-07-26 2023-07-28 2023-07-29 2023-07-30 2023-08-02 \n         1          1          2          1          1          1          1 \n2023-08-03 2023-08-04 2023-08-09 2023-08-16 2023-08-17 2023-08-19 2023-08-20 \n         1          2          2          2          1          4          1 \n2023-08-24 2023-08-25 2023-08-26 2023-08-27 2023-08-28 2023-08-31 2023-09-02 \n         1          1          1          1          1          2          2 \n2023-09-09 2023-09-11 2023-09-22 \n         2          1          2 \n\n$first_nest\n\n           2000-05-05 2000-05-09 2000-05-10 2000-05-11 2000-05-13 2000-05-16 \n       189          1          2          3          1          3          1 \n2000-05-18 2000-05-19 2000-05-26 2000-05-28 2000-05-29 2000-05-31 2000-06-01 \n         2          1          1          2          1          1          1 \n2000-06-06 2000-06-08 2000-06-17 2004-05-05 2004-05-08 2004-05-09 2004-05-11 \n         1          1          1          1          1          1          1 \n2004-05-13 2004-05-14 2004-05-15 2004-05-16 2004-05-19 2004-05-20 2004-05-21 \n         2          1          1          2          2          1          1 \n2004-05-22 2004-05-26 2004-05-27 2004-05-28 2004-06-03 2004-06-06 2004-06-14 \n         1          1          1          1          1          1          1 \n2004-06-17 2005-05-04 2005-05-06 2005-05-07 2005-05-08 2005-05-11 2005-05-12 \n         1          1          3          1          1          1          3 \n2005-05-13 2005-05-14 2005-05-17 2005-05-18 2005-05-19 2005-05-20 2005-05-21 \n         1          2          1          1          1          1          1 \n2005-05-26 2005-05-28 2005-06-03 2005-06-10 2005-06-15 2005-06-16 2006-05-10 \n         2          1          1          1          1          1          1 \n2006-05-12 2006-05-14 2006-05-15 2006-05-17 2006-05-18 2006-05-20 2006-05-22 \n         3          1          1          2          1          3          3 \n2006-05-23 2006-05-25 2006-05-27 2006-06-01 2006-06-09 2006-06-10 2006-06-21 \n         1          1          2          1          1          1          1 \n2007-05-12 2007-05-14 2007-05-16 2007-05-17 2007-05-18 2007-05-19 2007-05-22 \n         1          1          3          4          1          2          1 \n2007-05-23 2007-05-25 2007-05-26 2007-05-31 2007-06-02 2007-06-04 2007-06-05 \n         1          1          2          1          1          1          1 \n2007-06-06 2007-06-08 2007-06-17 2007-06-21 2007-06-27 2008-05-06 2008-05-07 \n         1          2          1          1          1          1          1 \n2008-05-09 2008-05-10 2008-05-12 2008-05-15 2008-05-16 2008-05-17 2008-05-18 \n         1          1          2          2          3          2          3 \n2008-05-21 2008-05-23 2008-05-26 2008-05-28 2008-05-31 2008-06-05 2008-06-11 \n         2          1          1          1          1          3          1 \n2008-06-19 2009-05-03 2009-05-04 2009-05-06 2009-05-07 2009-05-09 2009-05-10 \n         1          1          1          1          1          2          1 \n2009-05-12 2009-05-13 2009-05-14 2009-05-18 2009-05-20 2009-05-21 2009-05-24 \n         2          2          4          1          2          1          2 \n2009-06-03 2009-06-06 2009-06-08 2009-06-14 2009-07-29 2010-05-01 2010-05-05 \n         1          2          1          1          1          1          2 \n2010-05-06 2010-05-07 2010-05-08 2010-05-09 2010-05-13 2010-05-14 2010-05-16 \n         3          1          1          1          3          4          2 \n2010-05-21 2010-05-22 2010-05-25 2010-05-27 2010-05-28 2010-06-04 2010-06-05 \n         1          2          1          2          1          2          1 \n2010-06-06 2010-06-09 2010-06-12 2010-06-17 2010-06-18 2011-04-30 2011-05-02 \n         1          1          1          1          1          1          1 \n2011-05-04 2011-05-06 2011-05-08 2011-05-09 2011-05-12 2011-05-14 2011-05-15 \n         1          2          1          2          2          2          3 \n2011-05-17 2011-05-18 2011-05-20 2011-05-21 2011-05-28 2011-05-29 2011-06-02 \n         1          2          1          1          2          3          1 \n2011-06-07 2011-06-08 2011-06-11 2012-04-30 2012-05-02 2012-05-04 2012-05-07 \n         1          1          1          1          1          3          1 \n2012-05-08 2012-05-09 2012-05-10 2012-05-11 2012-05-12 2012-05-13 2012-05-14 \n         1          1          4          4          1          1          2 \n2012-05-15 2012-05-16 2012-05-20 2012-05-24 2012-05-26 2012-05-29 2012-05-30 \n         1          1          2          1          1          1          1 \n2012-06-01 2012-06-11 2013-05-02 2013-05-03 2013-05-06 2013-05-09 2013-05-10 \n         1          1          1          2          1          1          2 \n2013-05-11 2013-05-12 2013-05-13 2013-05-14 2013-05-15 2013-05-16 2013-05-17 \n         2          1          1          2          1          3          1 \n2013-05-26 2013-06-01 2013-06-02 2013-06-06 2013-06-07 2013-06-29 2013-08-15 \n         3          2          1          1          2          1          1 \n2014-04-29 2014-05-01 2014-05-03 2014-05-08 2014-05-09 2014-05-10 2014-05-11 \n         1          1          1          3          4          2          1 \n2014-05-12 2014-05-14 2014-05-16 2014-05-17 2014-05-21 2014-05-22 2014-05-24 \n         2          2          2          1          1          2          2 \n2014-05-28 2014-05-29 2014-05-31 2014-06-01 2014-07-05 2015-04-27 2015-05-03 \n         1          2          1          1          1          1          1 \n2015-05-06 2015-05-07 2015-05-08 2015-05-09 2015-05-11 2015-05-12 2015-05-14 \n         3          2          1          3          4          1          2 \n2015-05-15 2015-05-16 2015-05-19 2015-05-20 2015-05-21 2015-05-24 2015-05-28 \n         2          1          1          2          1          1          1 \n2015-05-30 2015-06-05 2015-06-13 2015-07-11 2016-04-27 2016-04-29 2016-05-01 \n         1          1          1          1          1          1          1 \n2016-05-04 2016-05-05 2016-05-06 2016-05-08 2016-05-11 2016-05-12 2016-05-13 \n         1          2          1          1          2          3          2 \n2016-05-14 2016-05-16 2016-05-18 2016-05-19 2016-05-22 2016-05-25 2016-05-26 \n         2          1          1          1          1          3          1 \n2016-05-28 2016-05-29 2016-06-02 2016-06-04 2016-06-16 2016-06-18 2017-04-28 \n         1          1          1          1          1          2          1 \n2017-04-30 2017-05-03 2017-05-04 2017-05-06 2017-05-07 2017-05-08 2017-05-10 \n         2          1          1          1          2          1          2 \n2017-05-11 2017-05-12 2017-05-13 2017-05-19 2017-05-21 2017-05-24 2017-05-26 \n         2          3          1          3          1          1          1 \n2017-05-28 2017-05-31 2017-06-02 2017-06-03 2017-06-04 2017-06-14 2018-05-03 \n         1          1          2          1          1          1          1 \n2018-05-04 2018-05-06 2018-05-10 2018-05-11 2018-05-12 2018-05-14 2018-05-16 \n         1          2          2          2          2          2          3 \n2018-05-17 2018-05-18 2018-05-19 2018-05-20 2018-05-23 2018-05-29 2018-05-30 \n         2          1          1          2          1          1          2 \n2018-05-31 2018-06-01 2018-06-02 2018-06-15 2019-05-03 2019-05-04 2019-05-05 \n         3          1          1          1          1          1          1 \n2019-05-09 2019-05-10 2019-05-11 2019-05-14 2019-05-16 2019-05-17 2019-05-22 \n         4          3          5          1          1          1          1 \n2019-05-23 2019-05-24 2019-05-25 2019-06-01 2019-06-02 2019-06-05 2019-06-06 \n         1          1          2          1          1          1          2 \n2019-06-12 2019-07-06 2020-05-07 2020-05-10 2020-05-11 2020-05-13 2020-05-14 \n         1          1          1          1          1          2          2 \n2020-05-15 2020-05-16 2020-05-17 2020-05-19 2020-05-20 2020-05-21 2020-05-22 \n         3          1          1          1          1          2          3 \n2020-05-23 2020-05-24 2020-05-28 2020-05-29 2020-05-30 2020-06-03 2020-06-11 \n         1          1          1          2          2          1          1 \n2020-06-12 2020-06-27 2020-07-03 2021-05-05 2021-05-06 2021-05-08 2021-05-09 \n         1          1          1          2          1          1          2 \n2021-05-10 2021-05-12 2021-05-13 2021-05-14 2021-05-17 2021-05-19 2021-05-20 \n         1          2          1          3          1          4          2 \n2021-05-21 2021-05-25 2021-05-27 2021-05-28 2021-05-30 2021-06-02 2021-06-04 \n         1          1          1          1          1          2          2 \n2021-06-17 2022-05-06 2022-05-07 2022-05-08 2022-05-09 2022-05-11 2022-05-14 \n         1          1          1          3          1          1          1 \n2022-05-15 2022-05-16 2022-05-17 2022-05-18 2022-05-19 2022-05-20 2022-05-21 \n         1          1          1          1          2          2          3 \n2022-05-25 2022-05-26 2022-05-27 2022-05-29 2022-06-03 2022-06-08 2022-06-11 \n         1          1          1          2          2          1          1 \n2022-06-25 2022-06-27 2022-07-01 2023-05-07 2023-05-10 2023-05-11 2023-05-12 \n         1          1          1          2          1          1          2 \n2023-05-13 2023-05-14 2023-05-16 2023-05-19 2023-05-21 2023-05-24 2023-05-26 \n         1          3          2          1          1          2          1 \n2023-05-28 2023-05-30 2023-06-01 2023-06-02 2023-06-03 2023-06-07 2023-06-09 \n         1          1          2          2          1          2          1 \n2023-06-10 2023-06-17 2023-07-23 \n         1          1          1 \n\n$first_chick\n\n           2000-05-28 2000-05-31 2000-06-01 2000-06-02 2000-06-03 2000-06-04 \n       262          1          1          1          2          3          1 \n2000-06-06 2000-06-07 2000-06-08 2000-06-09 2000-06-18 2000-06-20 2000-06-22 \n         1          1          1          1          1          2          1 \n2000-06-24 2000-06-26 2000-06-28 2000-07-22 2004-05-31 2004-06-04 2004-06-05 \n         1          1          1          1          2          2          1 \n2004-06-06 2004-06-09 2004-06-11 2004-06-14 2004-06-16 2004-06-18 2004-06-20 \n         1          1          2          1          1          1          1 \n2004-06-21 2004-06-22 2004-06-27 2004-07-04 2004-07-18 2005-05-27 2005-05-28 \n         1          2          1          1          1          1          1 \n2005-06-01 2005-06-02 2005-06-03 2005-06-05 2005-06-06 2005-06-09 2005-06-10 \n         2          3          1          1          1          1          4 \n2005-06-11 2005-06-12 2005-06-15 2005-06-26 2005-07-01 2005-07-21 2006-06-02 \n         1          1          1          2          1          1          1 \n2006-06-03 2006-06-05 2006-06-07 2006-06-09 2006-06-10 2006-06-11 2006-06-13 \n         1          1          1          1          1          1          1 \n2006-06-14 2006-06-16 2006-06-17 2006-06-20 2006-06-24 2006-06-30 2006-07-03 \n         2          2          2          1          2          1          1 \n2006-07-14 2007-06-06 2007-06-07 2007-06-09 2007-06-10 2007-06-11 2007-06-12 \n         1          2          2          1          3          1          2 \n2007-06-13 2007-06-14 2007-06-15 2007-06-20 2007-06-27 2007-06-28 2007-06-29 \n         1          2          3          3          1          1          1 \n2007-07-02 2007-07-15 2007-07-19 2008-05-30 2008-06-02 2008-06-04 2008-06-05 \n         1          1          1          1          1          2          4 \n2008-06-07 2008-06-08 2008-06-09 2008-06-12 2008-06-17 2008-06-18 2008-06-25 \n         1          2          1          2          1          1          1 \n2008-06-26 2008-06-27 2008-06-29 2008-07-06 2008-07-10 2009-05-27 2009-05-28 \n         2          1          1          1          1          1          2 \n2009-05-29 2009-05-30 2009-05-31 2009-06-03 2009-06-04 2009-06-05 2009-06-06 \n         1          1          2          1          4          1          3 \n2009-06-10 2009-06-11 2009-06-17 2009-06-20 2009-06-24 2009-06-25 2009-06-26 \n         1          1          1          1          1          1          1 \n2009-06-29 2009-07-15 2010-05-25 2010-05-26 2010-05-27 2010-05-30 2010-06-01 \n         1          1          1          2          3          3          1 \n2010-06-03 2010-06-04 2010-06-09 2010-06-10 2010-06-11 2010-06-16 2010-06-17 \n         3          1          1          2          1          2          1 \n2010-06-18 2010-06-25 2010-06-30 2010-07-01 2010-07-02 2010-07-07 2010-07-09 \n         1          1          2          1          1          1          1 \n2011-05-25 2011-05-26 2011-05-27 2011-05-29 2011-05-31 2011-06-02 2011-06-03 \n         1          1          1          1          1          2          1 \n2011-06-04 2011-06-05 2011-06-06 2011-06-08 2011-06-09 2011-06-10 2011-06-11 \n         1          1          1          2          1          1          1 \n2011-06-12 2011-06-14 2011-06-16 2011-06-17 2011-06-18 2011-06-30 2011-07-01 \n         1          1          1          1          1          1          1 \n2011-07-10 2011-07-13 2011-07-21 2012-05-20 2012-05-23 2012-05-24 2012-05-26 \n         1          1          1          1          1          1          1 \n2012-05-27 2012-05-28 2012-05-31 2012-06-01 2012-06-02 2012-06-04 2012-06-06 \n         1          2          1          2          1          1          3 \n2012-06-08 2012-06-10 2012-06-15 2012-06-20 2012-06-23 2012-06-24 2012-07-01 \n         1          1          2          1          3          1          1 \n2013-05-11 2013-05-26 2013-05-27 2013-05-29 2013-05-31 2013-06-01 2013-06-03 \n         1          3          1          1          1          1          1 \n2013-06-06 2013-06-07 2013-06-08 2013-06-09 2013-06-12 2013-06-13 2013-06-19 \n         2          3          1          2          1          1          1 \n2013-06-21 2013-06-22 2013-06-23 2013-06-26 2013-06-29 2014-05-22 2014-05-24 \n         1          1          1          1          1          1          1 \n2014-05-25 2014-05-29 2014-05-31 2014-06-01 2014-06-02 2014-06-03 2014-06-05 \n         1          2          2          2          1          1          3 \n2014-06-06 2014-06-09 2014-06-11 2014-06-13 2014-06-14 2014-06-15 2014-06-19 \n         2          1          1          1          2          1          1 \n2014-06-20 2014-06-21 2014-06-29 2014-07-02 2014-07-26 2014-08-01 2015-05-22 \n         1          1          1          1          1          1          1 \n2015-05-25 2015-05-26 2015-05-28 2015-05-29 2015-05-30 2015-05-31 2015-06-04 \n         1          1          2          1          1          2          6 \n2015-06-05 2015-06-06 2015-06-08 2015-06-10 2015-06-11 2015-06-12 2015-06-19 \n         1          1          1          1          1          1          1 \n2015-06-26 2015-06-27 2015-08-02 2016-05-22 2016-05-25 2016-05-26 2016-05-27 \n         1          1          1          1          1          2          1 \n2016-05-28 2016-05-29 2016-06-02 2016-06-04 2016-06-05 2016-06-06 2016-06-08 \n         2          3          1          1          1          1          5 \n2016-06-09 2016-06-10 2016-06-12 2016-06-16 2016-06-17 2016-06-18 2016-07-13 \n         1          1          2          2          1          1          1 \n2016-07-14 2016-07-15 2016-07-16 2017-05-22 2017-05-25 2017-05-26 2017-05-28 \n         1          1          1          1          3          1          3 \n2017-05-30 2017-06-01 2017-06-02 2017-06-03 2017-06-08 2017-06-11 2017-06-12 \n         1          3          3          1          1          1          1 \n2017-06-14 2017-06-16 2017-06-17 2017-06-21 2017-06-22 2017-06-24 2018-05-27 \n         2          1          1          2          1          1          1 \n2018-05-30 2018-05-31 2018-06-02 2018-06-03 2018-06-04 2018-06-05 2018-06-07 \n         1          3          1          1          1          1          4 \n2018-06-08 2018-06-10 2018-06-13 2018-06-14 2018-06-18 2018-06-20 2018-06-23 \n         2          2          1          1          1          1          1 \n2018-06-25 2018-06-28 2018-07-13 2019-05-30 2019-05-31 2019-06-02 2019-06-03 \n         1          1          1          2          2          1          2 \n2019-06-04 2019-06-05 2019-06-06 2019-06-07 2019-06-09 2019-06-16 2019-06-18 \n         1          1          1          1          1          3          1 \n2019-06-20 2019-06-23 2019-06-26 2019-06-27 2019-06-30 2019-07-02 2019-07-03 \n         1          1          2          2          1          1          2 \n2019-07-04 2020-05-31 2020-06-01 2020-06-03 2020-06-04 2020-06-05 2020-06-07 \n         1          1          1          1          3          1          1 \n2020-06-12 2020-06-13 2020-06-14 2020-06-19 2020-06-20 2020-06-21 2020-06-23 \n         2          1          2          2          1          2          1 \n2020-06-27 2020-07-02 2020-07-03 2020-07-05 2020-07-09 2020-07-16 2020-07-20 \n         1          1          2          2          1          1          1 \n2020-07-30 2021-05-28 2021-05-30 2021-05-31 2021-06-03 2021-06-04 2021-06-05 \n         1          1          1          2          3          1          1 \n2021-06-06 2021-06-07 2021-06-11 2021-06-12 2021-06-14 2021-06-16 2021-06-18 \n         1          1          2          2          1          1          1 \n2021-06-27 2021-06-30 2021-07-01 2021-07-02 2021-07-15 2022-05-27 2022-06-02 \n         2          1          2          1          1          1          5 \n2022-06-03 2022-06-04 2022-06-06 2022-06-08 2022-06-11 2022-06-12 2022-06-13 \n         1          1          1          1          1          2          1 \n2022-06-15 2022-06-16 2022-06-17 2022-06-19 2022-06-20 2022-06-22 2022-06-23 \n         1          1          3          1          1          1          2 \n2022-06-25 2023-05-28 2023-05-31 2023-06-01 2023-06-04 2023-06-05 2023-06-09 \n         1          1          1          1          1          4          1 \n2023-06-10 2023-06-14 2023-06-17 2023-06-18 2023-06-19 2023-06-23 2023-06-25 \n         2          2          1          1          1          1          1 \n2023-06-29 2023-07-05 2023-07-09 2023-07-27 2023-08-02 2023-08-04 3000-06-02 \n         1          1          1          1          1          1          1 \n\n$first_fledge\n\n           2000-06-20 2000-06-21 2000-06-22 2000-06-24 2000-06-25 2000-06-26 \n       387          1          1          2          3          2          2 \n2000-06-30 2000-07-04 2000-07-08 2000-07-13 2000-07-15 2000-07-16 2000-07-17 \n         2          1          1          1          1          1          1 \n2000-07-20 2000-07-24 2000-08-06 2004-06-23 2004-06-25 2004-06-26 2004-06-30 \n         1          1          1          1          1          1          1 \n2004-07-02 2004-07-04 2004-07-10 2004-07-13 2004-07-14 2004-07-17 2004-07-18 \n         1          2          1          1          2          1          1 \n2004-07-25 2005-06-22 2005-06-23 2005-06-24 2005-06-25 2005-06-30 2005-07-01 \n         1          3          1          2          3          1          1 \n2005-07-02 2005-07-07 2005-07-08 2005-07-13 2005-07-18 2005-07-20 2005-07-22 \n         1          1          1          1          1          1          1 \n2005-08-27 2006-06-23 2006-06-25 2006-06-29 2006-06-30 2006-07-01 2006-07-04 \n         1          1          1          1          1          1          2 \n2006-07-07 2006-07-12 2006-07-13 2006-07-15 2006-07-17 2006-07-24 2006-07-28 \n         3          1          1          2          1          1          1 \n2006-08-02 2006-08-11 2007-06-26 2007-06-27 2007-06-28 2007-06-29 2007-06-30 \n         1          1          1          1          2          1          1 \n2007-07-02 2007-07-04 2007-07-05 2007-07-06 2007-07-10 2007-07-11 2007-07-12 \n         2          3          1          1          1          2          2 \n2007-07-13 2007-07-18 2007-07-23 2007-08-08 2008-06-20 2008-06-22 2008-06-25 \n         2          2          1          2          1          1          2 \n2008-06-26 2008-06-27 2008-06-28 2008-06-29 2008-07-02 2008-07-15 2008-07-17 \n         3          1          2          1          1          1          1 \n2008-07-18 2008-07-20 2008-07-24 2008-07-30 2008-07-31 2008-08-17 2009-06-16 \n         1          2          1          1          1          1          1 \n2009-06-20 2009-06-21 2009-06-24 2009-06-25 2009-06-26 2009-06-29 2009-06-30 \n         2          1          3          3          1          1          1 \n2009-07-01 2009-07-03 2009-07-05 2009-07-10 2009-07-15 2009-07-16 2009-07-20 \n         1          1          1          1          2          1          1 \n2009-08-07 2010-06-09 2010-06-16 2010-06-17 2010-06-18 2010-06-20 2010-06-22 \n         1          1          1          2          3          2          1 \n2010-06-24 2010-06-25 2010-06-27 2010-06-30 2010-07-01 2010-07-09 2010-07-14 \n         1          2          1          1          1          2          2 \n2010-07-21 2010-07-23 2010-07-27 2010-07-29 2010-07-30 2010-08-05 2011-06-14 \n         1          1          1          1          1          1          1 \n2011-06-17 2011-06-19 2011-06-22 2011-06-23 2011-06-25 2011-06-27 2011-06-28 \n         1          1          1          4          2          1          1 \n2011-07-01 2011-07-03 2011-07-06 2011-07-09 2011-07-11 2011-07-21 2011-07-22 \n         3          1          1          1          1          1          1 \n2011-07-24 2012-06-15 2012-06-17 2012-06-19 2012-06-21 2012-06-22 2012-06-23 \n         1          1          2          1          1          1          1 \n2012-06-24 2012-06-26 2012-06-27 2012-06-28 2012-06-29 2012-07-01 2012-07-03 \n         1          1          1          1          1          1          1 \n2012-07-07 2012-07-14 2012-07-15 2012-07-19 2012-07-21 2012-08-17 2013-06-20 \n         1          1          1          1          1          1          1 \n2013-06-21 2013-06-22 2013-06-23 2013-06-26 2013-06-27 2013-06-29 2013-06-30 \n         1          2          1          1          2          2          1 \n2013-07-02 2013-07-04 2013-07-05 2013-07-10 2013-07-11 2013-07-17 2013-07-20 \n         1          1          1          2          1          1          1 \n2013-07-31 2013-08-02 2014-06-15 2014-06-16 2014-06-18 2014-06-19 2014-06-21 \n         1          1          1          2          1          3          1 \n2014-06-22 2014-06-23 2014-06-27 2014-06-28 2014-07-03 2014-07-04 2014-07-05 \n         2          1          3          1          1          2          2 \n2014-07-09 2014-07-12 2014-07-16 2014-08-09 2014-08-15 2015-06-13 2015-06-14 \n         1          1          1          1          1          1          3 \n2015-06-17 2015-06-18 2015-06-20 2015-06-22 2015-06-25 2015-06-26 2015-06-27 \n         1          1          1          1          2          3          1 \n2015-06-30 2015-07-02 2015-07-03 2015-07-04 2015-07-17 2015-08-19 2016-06-09 \n         1          1          2          1          1          1          1 \n2016-06-14 2016-06-15 2016-06-17 2016-06-19 2016-06-23 2016-06-24 2016-06-27 \n         1          1          1          3          4          1          1 \n2016-06-29 2016-07-02 2016-07-03 2016-07-06 2016-07-07 2016-07-08 2016-07-09 \n         2          3          3          2          2          2          1 \n2016-08-05 2017-06-11 2017-06-15 2017-06-17 2017-06-18 2017-06-20 2017-06-21 \n         1          2          1          1          1          1          1 \n2017-06-22 2017-06-23 2017-06-24 2017-06-27 2017-06-29 2017-07-02 2017-07-05 \n         3          1          1          2          1          1          1 \n2017-07-06 2017-07-07 2017-07-11 2017-07-12 2017-07-14 2017-07-25 2017-08-05 \n         1          1          1          1          1          1          1 \n2018-06-21 2018-06-22 2018-06-23 2018-06-24 2018-06-26 2018-06-27 2018-06-28 \n         2          1          2          2          1          2          3 \n2018-06-29 2018-07-04 2018-07-05 2018-07-06 2018-07-12 2018-07-14 2018-07-19 \n         1          2          1          1          1          1          1 \n2018-08-03 2019-06-19 2019-06-20 2019-06-21 2019-06-23 2019-06-26 2019-06-27 \n         1          1          1          1          1          1          2 \n2019-06-28 2019-06-29 2019-06-30 2019-07-01 2019-07-03 2019-07-04 2019-07-07 \n         1          1          1          1          1          1          1 \n2019-07-08 2019-07-10 2019-07-12 2019-07-13 2019-07-18 2019-07-19 2019-07-20 \n         1          1          2          1          1          1          1 \n2019-07-21 2019-08-01 2020-06-20 2020-06-24 2020-06-25 2020-07-02 2020-07-03 \n         3          1          1          2          3          1          1 \n2020-07-04 2020-07-08 2020-07-09 2020-07-13 2020-07-14 2020-07-15 2020-07-17 \n         1          1          3          1          1          2          2 \n2020-07-24 2020-07-26 2020-08-06 2020-08-13 2020-08-23 2022-06-25 \n         1          2          1          1          1          1 \n\n\nWe use lapply rather than sapply for this step because the table for each column will have a different length (but try sapply and see what happens!).\n\n\n3.4.2 The Split-Apply Pattern\nIn a data set with categorical features, it’s often useful to compute something for each category. The lapply and sapply functions can compute something for each element of a data structure, but categories are not necessarily elements.\nFor example, the least terns data set has 6 different categories in the region_3 column. If we want all of the rows for one region, one way to get them is by indexing:\n\nsouthern = terns[terns$region_3 == \"SOUTHERN\", ]\nhead(southern)\n\n   year                             site_name\n8  2000 SANTA CLARA RIVER MCGRATH STATE BEACH\n9  2000                          ORMOND BEACH\n10 2000                       NBVC POINT MUGU\n11 2000                          VENICE BEACH\n12 2000                             LA HARBOR\n13 2000            SEAL BEACH NWR ANAHEIM BAY\n                   site_name_2013_2018  site_name_1988_2001    site_abbr\n8                    Santa Clara River NA_2013_2018 POLYGON   S_CLAR_MCG\n9                         Ormond Beach NA_2013_2018 POLYGON       ORMOND\n10                     NBVC Point Mugu NA_2013_2018 POLYGON      PT_MUGU\n11                        Venice Beach NA_2013_2018 POLYGON      VEN_BCH\n12                          Port of LA NA_2013_2018 POLYGON      LA_HARB\n13 Seal Beach National Wildlife Refuge NA_2013_2018 POLYGON SEAL_BCH_NWR\n   region_3 region_4   event bp_min bp_max fl_min fl_max total_nests\n8  SOUTHERN  VENTURA LA_NINA     21     21      9      9          22\n9  SOUTHERN  VENTURA LA_NINA     73     73     60     65          73\n10 SOUTHERN  VENTURA LA_NINA    166    167     64     64         252\n11 SOUTHERN SOUTHERN LA_NINA    274    294    150    200         308\n12 SOUTHERN SOUTHERN LA_NINA    437    437    570    570         565\n13 SOUTHERN SOUTHERN LA_NINA    107    107    180    180         107\n   nonpred_eggs nonpred_chicks nonpred_fl nonpred_ad pred_control pred_eggs\n8             4              3         NA         NA                     NA\n9             2              0          0          0                     NA\n10           NA             NA         NA         NA                     NA\n11           26             NA         NA         NA                     32\n12           77             NA         NA         NA                     24\n13           10              3         NA         NA                     NA\n   pred_chicks pred_fl pred_ad pred_pefa pred_coy_fox pred_meso pred_owlspp\n8           NA      NA      NA                                             \n9           NA      NA      NA         N            N         Y           N\n10          NA      NA      NA                                             \n11          20      20       3         Y            N         Y           N\n12          NA      15      NA         Y            N         N           N\n13          NA      NA      NA                                             \n   pred_corvid pred_other_raptor pred_other_avian pred_misc total_pefa\n8                                                                   NA\n9            N                 Y                N         N         NA\n10                                                                  NA\n11           Y                 N                N         N          2\n12           N                 Y                Y         N         17\n13                                                                  NA\n   total_coy_fox total_meso total_owlspp total_corvid total_other_raptor\n8             NA         NA           NA           NA                 NA\n9             NA         NA           NA           NA                 NA\n10            NA         NA           NA           NA                 NA\n11             0         42            0           31                  0\n12             0          0            0            0                  4\n13            NA         NA           NA           NA                 NA\n   total_other_avian total_misc first_observed last_observed first_nest\n8                 NA         NA     2000-06-06    2000-09-05 2000-06-06\n9                 NA         NA                              2000-06-08\n10                NA         NA     2000-05-21    2000-08-12 2000-06-01\n11                 0          0     2000-04-19    2000-08-20 2000-05-29\n12                24          0     2000-04-28    2000-08-20 2000-05-10\n13                NA         NA                                        \n   first_chick first_fledge\n8   2000-06-28   2000-07-24\n9   2000-06-26   2000-07-17\n10  2000-06-24   2000-07-16\n11                         \n12  3000-06-02   2000-06-22\n13                         \n\n\nTo get all 6 regions separately, we’d have to do this 6 times. If we want to compute something for each region, say the median of the total_nests column, we also have to repeat that computation 6 times. Here’s what it would look like for just the SOUTHERN region:\n\nmedian(southern$total_nests, na.rm = TRUE)\n\n[1] 64\n\n\nIf the categories were elements, we could avoid writing code to index each category, and just use the sapply (or lapply) function to apply the median function to each.\nThe split function splits a vector or data frame into groups based on a vector of categories. The first argument to split is the data, and the second argument is a congruent vector of categories.\nWe can use split to elegantly compute medians of total_nests broken down by country. First, we split the data by region Since we only want to compute on the total_nests column, we only split that column:\n\nby_region = split(terns$total_nests, terns$region_3)\nclass(by_region)\n\n[1] \"list\"\n\nnames(by_region)\n\n[1] \"ARIZONA\"    \"CENTRAL\"    \"KINGS\"      \"S.F._BAY\"   \"SACRAMENTO\"\n[6] \"SOUTHERN\"  \n\n\nThe result from split is a list with one element for each category. The individual elements contain pieces of the original total_nests column:\n\nhead(by_region$SOUTHERN)\n\n[1]  22  73 252 308 565 107\n\n\nSince the categories are elements in the split data, now we can use sapply the same way we did in previous examples:\n\nsapply(by_region, median, na.rm = TRUE)\n\n   ARIZONA    CENTRAL      KINGS   S.F._BAY SACRAMENTO   SOUTHERN \n         3         17          1         35          1         64 \n\n\nThis two-step process is an R idiom called the split-apply pattern. First you use split to convert categories into list elements, then you use an apply function to compute something on each category. Any time you want to compute results by category, you should think of this pattern.\nThe split-apply pattern is so useful that R provides the tapply function as a shortcut. The tapply function is equivalent to calling split and then sapply. Like split, the first argument is the data and the second argument is a congruent vector of categories. The third argument is a function to apply, like the function argument in sapply.\nWe can use tapply to compute the total_nests medians by region_3 for the least terns data set:\n\ntapply(terns$total_nests, terns$region_3, median, na.rm = TRUE)\n\n   ARIZONA    CENTRAL      KINGS   S.F._BAY SACRAMENTO   SOUTHERN \n         3         17          1         35          1         64 \n\n\nNotice that the result is identical to the one we computed before.\nThe “t” in tapply stands for “table”, because the tapply function is a generalization of the table function. If you use length as the third argument to tapply, you get the same results as you would from using the table function on the category vector.\nThe aggregate function is closely related to tapply. It computes the same results, but organizes them into a data frame with one row for each category. In some cases, this format is more convenient. The arguments are the same, except that the second argument must be a list or data frame rather than a vector.\nAs an example, here’s the result of using aggregate to compute the total_nests medians:\n\naggregate(terns$total_nests, list(terns$region_3), mean)\n\n     Group.1          x\n1    ARIZONA  3.0000000\n2    CENTRAL 21.5584416\n3      KINGS  0.8666667\n4   S.F._BAY         NA\n5 SACRAMENTO  0.9000000\n6   SOUTHERN         NA\n\n\nThe lapply, sapply, and tapply functions are the three most important functions in the family of apply functions, but there are many more. You can learn more about all of R’s apply functions by reading this StackOverflow post.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Exploring Data</span>"
    ]
  },
  {
    "objectID": "chapters/03_exploring-data.html#exercises",
    "href": "chapters/03_exploring-data.html#exercises",
    "title": "3  Exploring Data",
    "section": "3.5 Exercises",
    "text": "3.5 Exercises\n\n3.5.1 Exercise\n\nCompute the total number of fledglings (with fl_min) for each year and region combination.\nAnother way to present the data in Section 3.3.7 is with a line plot. Use the data from part 1 to make this plot with points for each total and lines connecting the totals. Hint: find the appropriate geometries in the ggplot2 documentation.\n\n\n\n3.5.2 Exercise\n\nCompute the number of sites with no egg mortalities due to predation.\nOf those, how many had at least one fledgling?\n\n\n\n3.5.3 Exercise\n\nCompute the range (minimum and maximum) of year for each site.\nHow many many sites have observations over the entire range of the data set (2000 and 2004-2023)? Hint: use the unique and length functions to find the number of unique years for each site.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Exploring Data</span>"
    ]
  },
  {
    "objectID": "chapters/04_organizing_code.html",
    "href": "chapters/04_organizing_code.html",
    "title": "4  Organizing Code",
    "section": "",
    "text": "4.1 Functions\nBy now, you’ve learned all of the basic skills necessary to explore a data set in R. The focus of this chapter is how to organize your code so that it’s concise, clear, and easy to automate. This will help you and your collaborators avoid tedious, redundant work, reproduce results efficiently, and run code in specialized environments for scientific computing, such as high-performance computing clusters.\nThe main way to interact with R is by calling functions, which was first explained way back in Section 1.3.4. This section explains how to write your own functions.\nFunctions are building blocks for solving larger problems. Take a divide-and-conquer approach, breaking large problems into smaller steps. Write a short function for each step. This approach makes it easier to:\nThe function keyword defines a new function. Here’s the syntax:\nA function can have any number of parameters, and will automatically return the value of the last line of its body. Generally, when you define a function, you should assign it to a variable, so that you can use it later.\nFor example, let’s create a function that detects negative numbers. It should take a vector of numbers as input, compare them to zero, and then return the logical result from the comparison as output. Here’s the code:\nis_negative = function(x) x &lt; 0\nThe name of the function, is_negative, describes what the function does and includes a verb. The parameter x is the input. The return value is the result x &lt; 0.\nAny time you write a function, the first thing you should do afterwards is test that it actually works. Try the is_negative function out on a few test cases:\nis_negative(6)\n\n[1] FALSE\n\nis_negative(-1.1)\n\n[1] TRUE\n\nx = c(5, -1, -2, 0, 3)\nis_negative(x)\n\n[1] FALSE  TRUE  TRUE FALSE FALSE",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Organizing Code</span>"
    ]
  },
  {
    "objectID": "chapters/04_organizing_code.html#functions",
    "href": "chapters/04_organizing_code.html#functions",
    "title": "4  Organizing Code",
    "section": "",
    "text": "NoteThe Parts of a Function\n\n\n\nThink of a function as a factory. It takes raw materials, runs them through some machinery, and produces a final product:\n\nRaw materials: the inputs to a function are called arguments. Each argument is assigned to a parameter, a placeholder variable.\nMachinery: code in the body of a function computes something from the arguments.\nFinal product: the output of a function is called the return value.\n\n\n\n\n\n\nTest that each step works correctly.\nModify, reuse, or repurpose a step.\n\n\nfunction(parameter1, parameter2, ...) {\n  # Your code goes here\n\n  # The result goes here\n}\n\n\n\n\n\n\n\n\nTip\n\n\n\nChoosing descriptive variable names is a good habit. For functions, that means choosing a name that describes what the function does. It often makes sense to use verbs in function names.\n\n\n\n\n\n\n\n\n\n\n\n\n\nTip\n\n\n\nBefore you write a function, it’s useful to go through several steps:\n\nWrite down what you want to do, in detail. It can also help to draw a picture of what needs to happen.\nCheck whether there’s already a built-in function. Search online and in the R documentation.\nWrite the code to handle a simple case first. For data science problems, use a small dataset at this step.\n\n\n\n\n\n\n\n\n\nNoteViewing Function Definitions\n\n\n\n\n\nAlmost every command in R is a function, even the arithmetic operators and the parentheses! You can view the definition of a function by typing its name without trailing parentheses (in contrast to how you call functions).\nFor example, let’s look at the body of the append function, which appends a value to the end of a list or vector:\n\nappend\n\nfunction (x, values, after = length(x)) \n{\n    lengx &lt;- length(x)\n    if (!after) \n        c(values, x)\n    else if (after &gt;= lengx) \n        c(x, values)\n    else c(x[1L:after], values, x[(after + 1L):lengx])\n}\n&lt;bytecode: 0x5568579d81c8&gt;\n&lt;environment: namespace:base&gt;\n\n\nDon’t worry if you can’t understand everything the append function’s code does yet. It will make more sense later on, after you’ve written a few functions of your own.\nMany of R’s built-in functions are not entirely written in R code. You can spot these by calls to the special .Primitive or .Internal functions in their code.\nFor instance, the sum function is not written in R code:\n\nsum\n\nfunction (..., na.rm = FALSE)  .Primitive(\"sum\")\n\n\n\n\n\n\n4.1.1 Example: Getting Largest Values\nLet’s write a another function. This one will get the largest values in a vector. The inputs or arguments to the function will be the vector in question and also the number of values to get. Let’s call these vec and n, respectively. The result will be a vector of the n largest elements. Here’s one way to write the function:\n\nget_largest = function(vec, n) {\n  sorted = sort(vec, decreasing = TRUE)\n  head(sorted, n)\n}\n\nThe name of the function, get_largest, describes what the function does and includes a verb. If this function will be used frequently, a shorter name, such as largest, might be preferable (compare to the head function).\nTry the get_largest function on a few test cases to make sure it works correctly:\n\nx = c(1, 10, 20, -3)\nget_largest(x, 2)\n\n[1] 20 10\n\nget_largest(x, 3)\n\n[1] 20 10  1\n\ny = c(-1, -2, -3)\nget_largest(y, 2)\n\n[1] -1 -2\n\nz = c(\"d\", \"a\", \"t\", \"a\", \"l\", \"a\", \"b\")\nget_largest(z, 3)\n\n[1] \"t\" \"l\" \"d\"\n\n\nNotice that the parameters vec and n inside the function do not exist as variables outside of the function:\n\nvec\n\nError: object 'vec' not found\n\n\nIn general, R keeps parameters and variables you define inside of a function separate from variables you define outside of a function. You can read more about the specific rules for how R searches for variables in DataLab’s Intermediate R workshop reader.\nAs a function for quickly summarizing data, get_largest would be more convenient if the parameter n for the number of values to return was optional (again, compare to the head function). You can make the parameter n optional by setting a default argument: an argument assigned to the parameter if no argument is assigned in the call to the function. You can use = to assign default arguments to parameters when you define a function with the function keyword.\nHere’s a new definition of get_largest with the default n = 5:\n\nget_largest = function(vec, n = 5) {\n  sorted = sort(vec, decreasing = TRUE)\n  head(sorted, n)\n}\n\nAfter making a change, it’s a good idea to test the function again:\n\nget_largest(x)\n\n[1] 20 10  1 -3\n\nget_largest(y)\n\n[1] -1 -2 -3\n\nget_largest(z)\n\n[1] \"t\" \"l\" \"d\" \"b\" \"a\"\n\n\n\n\n\n\n\n\nNoteThe return Keyword\n\n\n\n\n\nWe’ve already seen that a function will automatically return the value of its last line. The return keyword causes a function to return a result immediately, without running any subsequent code in its body.\nIt only makes sense to use return from inside of an if-expression. If your function doesn’t have any if-expressions, you don’t need to use return.\nFor example, suppose you want the get_largest function to immediately return NULL if the argument for vec is a list. Here’s the code, along with some test cases:\n\nget_largest = function(vec, n = 5) {\n  if (is.list(vec))\n    return(NULL)\n\n  sorted = sort(vec, decreasing = TRUE)\n  head(sorted, n)\n}\n\nget_largest(x)\n\n[1] 20 10  1 -3\n\nget_largest(z)\n\n[1] \"t\" \"l\" \"d\" \"b\" \"a\"\n\nget_largest(list(1, 2))\n\nNULL\n\n\nAlternatively, you could make the function raise an error by calling the stop function. Whether it makes more sense to return NULL or print an error depends on how you plan to use the get_largest function.\nNotice that the last line of the get_largest function still doesn’t use the return keyword. It’s idiomatic to only use return when strictly necessary.\n\n\n\n\n\n4.1.2 Example: Returning Multiple Values\nA function returns one R object, but sometimes computations have multiple results. In that case, return the results in a vector, list, or other data structure.\nFor example, let’s make a function that computes the mean and median for a vector. We’ll return the results in a named list, although we could also use a named vector:\n\ncompute_mean_med = function(x) {\n  m1 = mean(x)\n  m2 = median(x)\n  list(mean = m1, median = m2)\n}\n\ncompute_mean_med(c(1, 2, 3, 1))\n\n$mean\n[1] 1.75\n\n$median\n[1] 1.5\n\n\nThe names make the result easier to understand for the caller of the function, although they certainly aren’t required here.",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Organizing Code</span>"
    ]
  },
  {
    "objectID": "chapters/04_organizing_code.html#conditional-expressions",
    "href": "chapters/04_organizing_code.html#conditional-expressions",
    "title": "4  Organizing Code",
    "section": "4.2 Conditional Expressions",
    "text": "4.2 Conditional Expressions\nSometimes you’ll need code to do different things, depending on a condition. You can use an if-expression to write conditional code.\nFor example, suppose you want your code to generate a different greeting depending on an input name:\n\nname = \"Nick\"\n\n# Default greeting\ngreeting = \"Nice to meet you!\"\n\nif (name == \"Nick\") {\n   greeting = \"Hi Nick, nice to see you again!\"\n}\n\ngreeting\n\n[1] \"Hi Nick, nice to see you again!\"\n\n\nIndent code inside of the if-expression by 2 or 4 spaces. Indentation makes your code easier to read.\n\n\n\n\n\n\nWarning\n\n\n\nThe condition in an if-expression has to have length 1:\n\nname = c(\"Nick\", \"Susan\")\n\n# Default greeting\ngreeting = \"Nice to meet you!\"\n\nif (name == \"Nick\") {\n   greeting = \"Hi Nick, nice to see you again!\"\n}\n\nError in if (name == \"Nick\") {: the condition has length &gt; 1\n\n\n\n\nUse the else keyword if you want to add an alternative when the condition is FALSE. So the previous code can also be written as:\n\nname = \"Nick\"\n\nif (name == \"Nick\") {\n   greeting = \"Hi Nick, nice to see you again!\"\n} else {\n  # Default greeting\n  greeting = \"Nice to meet you!\"\n}\n\ngreeting\n\n[1] \"Hi Nick, nice to see you again!\"\n\n\nUse else if with a condition if you want to add an alternative to the first condition that also has its own condition. Only the first case where a condition is TRUE will run. You can use else if as many times as you want, and can also use else. For example:\n\nname = \"Susan\"\n\nif (name == \"Nick\") {\n   greeting = \"Hi Nick, nice to see you again!\"\n} else if (name == \"Peter\") {\n   greeting = \"Go away Peter, I'm busy!\"\n} else {\n   greeting = \"Nice to meet you!\"\n}\n\ngreeting\n\n[1] \"Nice to meet you!\"\n\n\nYou can create compound conditions with R’s logic operators !, &, and | (see Section 2.4.5). For example:\n\nname1 = \"Wesley\"\nname2 = \"Nick\"\n\nif (name1 == \"Wesley\" & name2 == \"Nick\") {\n  greeting = \"These are the authors.\"\n} else {\n  greeting = \"Who are these people?!\"\n}\n\ngreeting\n\n[1] \"These are the authors.\"\n\n\nYou can write an if-statement inside of another if-statement. This is called nesting if-statements. Nesting is useful when you want to check a condition, do some computations, and then check another condition under the assumption that the first condition was True.\n\n\n\n\n\n\nTip\n\n\n\nIf-statements correspond to special cases in your code. Lots of special cases in code makes the code harder to understand and maintain. If you find yourself using lots of if-statements, especially nested if-statements, consider whether there is a more general strategy or way to write the code.",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Organizing Code</span>"
    ]
  },
  {
    "objectID": "chapters/04_organizing_code.html#iteration",
    "href": "chapters/04_organizing_code.html#iteration",
    "title": "4  Organizing Code",
    "section": "4.3 Iteration",
    "text": "4.3 Iteration\nR is powerful tool for automating tasks that have repetitive steps. For example, you can:\n\nApply a transformation to an entire column of data.\nCompute distances between all pairs from a set of points.\nRead a large collection of files from disk in order to combine and analyze the data they contain.\nSimulate how a system evolves over time from a specific set of starting parameters.\nScrape data from the pages of a website.\n\nYou can implement concise, efficient solutions for these kinds of tasks in R by using iteration, which means repeating a computation many times. R provides four different strategies for writing iterative code:\n\nVectorization, where a function is implicitly called on each element of a vector. This was introduced in Section 2.1.3.\nApply functions, where a function is explicitly called on each element of a data structure. This was introduced in Section 3.4.\nLoops, where an expression is evaluated repeatedly until some condition is met.\nRecursion, where a function calls itself.\n\nVectorization is the most efficient and concise iteration strategy, but also the least flexible, because it only works with specific functions and with vectors. Apply functions are more flexible—they work with any function and any data structure with elements—but less efficient and less concise. Loops and recursion provide the most flexibility but are the least concise. Recursion tends to be the least efficient iteration strategy in R.\n\nThe rest of this section explains how to write loops and how to choose which iteration strategy to use. We assume you’re already comfortable with vectorization and have at least some familiarity with apply functions.\n\n4.3.1 For-Loops\nA for-loop evaluates the expressions in its body once for each element of a data structure. The syntax of a for-loop is:\n# DATA is the data structure\n#\n# X is one element of DATA, assigned automatically at the beginning of each\n# iteration\n#\nfor (X in DATA) {\n  # Expression(s) to repeat.\n}\nFor example, to print out all the column names of the terns data, you can write:\n\nfor (name in names(terns)) {\n  message(name)\n}\n\nyear\n\n\nsite_name\n\n\nsite_name_2013_2018\n\n\nsite_name_1988_2001\n\n\nsite_abbr\n\n\nregion_3\n\n\nregion_4\n\n\nevent\n\n\nbp_min\n\n\nbp_max\n\n\nfl_min\n\n\nfl_max\n\n\ntotal_nests\n\n\nnonpred_eggs\n\n\nnonpred_chicks\n\n\nnonpred_fl\n\n\nnonpred_ad\n\n\npred_control\n\n\npred_eggs\n\n\npred_chicks\n\n\npred_fl\n\n\npred_ad\n\n\npred_pefa\n\n\npred_coy_fox\n\n\npred_meso\n\n\npred_owlspp\n\n\npred_corvid\n\n\npred_other_raptor\n\n\npred_other_avian\n\n\npred_misc\n\n\ntotal_pefa\n\n\ntotal_coy_fox\n\n\ntotal_meso\n\n\ntotal_owlspp\n\n\ntotal_corvid\n\n\ntotal_other_raptor\n\n\ntotal_other_avian\n\n\ntotal_misc\n\n\nfirst_observed\n\n\nlast_observed\n\n\nfirst_nest\n\n\nfirst_chick\n\n\nfirst_fledge\n\n\nWithin the body of a for-loop, you can compute values, check conditions, etc.\n\nOftentimes you’ll want to save the result of the code you perform within a for-loop. The easiest way to do this is by creating an empty vector and using c or append to append values to it:\n\nvalues = c(10, 12, 11, 2, 3)\ndiffs = c()\n\nfor (i in seq(1, length(values) - 1)) {\n  a = values[[i]]\n  b = values[[i + 1]]\n  diffs = append(diffs, a - b)\n}\n\ndiffs\n\n[1] -2  1  9 -1\n\n\nThis example is just for demonstration, since R’s built-in diff function is a much more concise and efficient way to compute differences. The point is that when you use a loop, you have to create a data structure to store the results yourself.\n\n\n\n\n\n\nWarning\n\n\n\nAppending values to a vector, as in the example, is quite inefficient. If you need to use a loop to produce a lot of results (say, more than 100):\n\nBefore the loop, create a result vector that’s the expected length of the final result. Fill vector with 0s or some other placeholder value. You can use functions such as integer, numeric, and character to do this.\nIn the loop, use indexing to replace the elements of the result vector as they’re computed.\n\nUsing this strategy, which is called pre-allocation the code in the example becomes:\n\nvalues = c(10, 12, 11, 2, 3)\ndiffs = integer(length(values) - 1)\n\nfor (i in seq(1, length(values) - 1)) {\n  a = values[[i]]\n  b = values[[i + 1]]\n  diffs[[i]] = a - b\n}\n\ndiffs\n\n[1] -2  1  9 -1\n\n\n\n\n\n\n4.3.2 Planning for Iteration\nAt first it might seem difficult to decide if and what kind of iteration to use. Start by thinking about whether you need to do something over and over. If you don’t, then you probably don’t need to use iteration. If you do, then try iteration strategies in this order:\n\nVectorization\nApply functions (or the purrr package’s map functions)\n\nTry an apply function if iterations are independent.\n\nLoops\n\nTry a for-loop if some iterations depend on others. \n\nRecursion (which isn’t covered here)\n\nConvenient for naturally recursive tasks (like Fibonacci), but often there are faster solutions.\n\n\nStart by writing the code for just one iteration. Make sure that code works; it’s easy to test code for one iteration.\nWhen you have one iteration working, then try using the code with an iteration strategy (you will have to make some small changes). If it doesn’t work, try to figure out which iteration is causing the problem. One way to do this is to use message to print out information. Then try to write the code for the broken iteration, get that iteration working, and repeat this whole process.",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Organizing Code</span>"
    ]
  },
  {
    "objectID": "chapters/04_organizing_code.html#case-study-ca-hospital-utilization",
    "href": "chapters/04_organizing_code.html#case-study-ca-hospital-utilization",
    "title": "4  Organizing Code",
    "section": "4.4 Case Study: CA Hospital Utilization",
    "text": "4.4 Case Study: CA Hospital Utilization\nThe California Department of Health Care Access and Information (HCAI) requires hospitals in the state to submit detailed information each year about how many beds they have and the total number of days for which each bed was occupied. The HCAI publishes the data to the California Open Data Portal. Let’s use R to read data from 2016 to 2023 and investigate whether hospital utilization is noticeably different in and after 2020.\nThe data set consists of a separate Microsoft Excel file for each year. Before 2018, HCAI used a data format (in Excel) called ALIRTS. In 2018, they started collecting more data and switched to a data format called SIERA. The 2018 data file contains a crosswalk that shows the correspondence between SIERA columns and ALIRTS columns.\n\n\n\n\n\n\nImportant\n\n\n\nClick here to download the CA Hospital Utilization data set (8 Excel files).\nIf you haven’t already, we recommend you create a directory for this workshop. In your workshop directory, create a data/ca_hospitals subdirectory. Download and save the data set in the data/ca_hospitals subdirectory.\n\n\nWhen you need to solve a programming problem, get started by writing some comments that describe the problem, the inputs, and the expected output. Try to be concrete. This will help you clarify what you’re trying to achieve and serve as a guiding light while you work.\nAs a programmer (or any kind of problem-solver), you should always be on the lookout for ways to break problems into smaller, simpler steps. Think about this when you frame a problem. Small steps are easier to reason about, implement, and test. When you complete one, you also get a nice sense of progress towards your goal.\nFor the CA Hospital Utilization data set, our goal is to investigate whether there was a change in hospital utilization in 2020. Before we can do any investigation, we need to read the files into R. The files all contain tabular data and have similar formats, so let’s try to combine them into a single data frame. We’ll say this in the framing comments:\n\n# Read the CA Hospital Utilization data set into R. The inputs are yearly Excel\n# files (2016-2023) that need to be combined. The pre-2018 files have a\n# different format from the others. The result should be a single data frame\n# with information about bed and patient counts.\n#\n# After reading the data set, we'll investigate utilization in 2020.\n\n“Investigate utilization” is a little vague, but for an exploratory data analysis, it’s hard to say exactly what to do until you’ve started working with the data.\nWe need to read multiple files, but we can simplify the problem by starting with just one. Let’s start with the 2023 data. It’s in an Excel file, which you can read with the read_excel function from the readxl package. If it’s your first time using the readxl package, you’ll need to install it:\ninstall.packages(\"readxl\")\nThe read_excel function requires the path to the file as the first argument. You can optionally provide the sheet name or number (starting from 1) as the second argument. Open up the Excel file in your computer’s spreadsheet program and take a look. There are multiple sheets, and the data about beds and patients are in the second sheet. Back in R, read just the second sheet:\n\nlibrary(\"readxl\")\n\npath = \"data/ca_hospitals/hosp23_util_data_final.xlsx\"\nsheet = read_excel(path, sheet = 2)\n\nNew names:\n• `` -&gt; `...355`\n\nhead(sheet)\n\n# A tibble: 6 × 355\n  Description            FAC_NO FAC_NAME FAC_STR_ADDR FAC_CITY FAC_ZIP FAC_PHONE\n  &lt;chr&gt;                  &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;        &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;    \n1 FINAL 2023 UTILIZATIO… FINAL… FINAL 2… FINAL 2023 … FINAL 2… FINAL … FINAL 20…\n2 Page                   1.0    1.0      1.0          1.0      1.0     1.0      \n3 Column                 1.0    1.0      1.0          1.0      1.0     1.0      \n4 Line                   2.0    1.0      3.0          4.0      5.0     6.0      \n5 &lt;NA&gt;                   10601… ALAMEDA… 2070 CLINTO… ALAMEDA  94501   51023337…\n6 &lt;NA&gt;                   10601… ALTA BA… 2450 ASHBY … BERKELEY 94705   510-655-…\n# ℹ 348 more variables: FAC_ADMIN_NAME &lt;chr&gt;, FAC_OPERATED_THIS_YR &lt;chr&gt;,\n#   FAC_OP_PER_BEGIN_DT &lt;chr&gt;, FAC_OP_PER_END_DT &lt;chr&gt;,\n#   FAC_PAR_CORP_NAME &lt;chr&gt;, FAC_PAR_CORP_BUS_ADDR &lt;chr&gt;,\n#   FAC_PAR_CORP_CITY &lt;chr&gt;, FAC_PAR_CORP_STATE &lt;chr&gt;, FAC_PAR_CORP_ZIP &lt;chr&gt;,\n#   REPT_PREP_NAME &lt;chr&gt;, SUBMITTED_DT &lt;chr&gt;, REV_REPT_PREP_NAME &lt;chr&gt;,\n#   REVISED_DT &lt;chr&gt;, CORRECTED_DT &lt;chr&gt;, LICENSE_NO &lt;chr&gt;,\n#   LICENSE_EFF_DATE &lt;chr&gt;, LICENSE_EXP_DATE &lt;chr&gt;, LICENSE_STATUS &lt;chr&gt;, …\n\n\nThe first four rows contain metadata about the columns. The first hospital, Alameda Hospital, is listed in the fifth row. So let’s remove the first four rows:\n\nsheet = sheet[-(1:4), ]\nhead(sheet)\n\n# A tibble: 6 × 355\n  Description FAC_NO    FAC_NAME         FAC_STR_ADDR FAC_CITY FAC_ZIP FAC_PHONE\n  &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;            &lt;chr&gt;        &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;    \n1 &lt;NA&gt;        106010735 ALAMEDA HOSPITAL 2070 CLINTO… ALAMEDA  94501   51023337…\n2 &lt;NA&gt;        106010739 ALTA BATES SUMM… 2450 ASHBY … BERKELEY 94705   510-655-…\n3 &lt;NA&gt;        106010776 UCSF BENIOFF CH… 747 52ND ST… OAKLAND  94609   510-428-…\n4 &lt;NA&gt;        106010811 FAIRMONT HOSPIT… 15400 FOOTH… SAN LEA… 94578   51043748…\n5 &lt;NA&gt;        106010844 ALTA BATES SUMM… 2001 DWIGHT… BERKELEY 94704   510-655-…\n6 &lt;NA&gt;        106010846 HIGHLAND HOSPIT… 1411 EAST 3… OAKLAND  94602   51043748…\n# ℹ 348 more variables: FAC_ADMIN_NAME &lt;chr&gt;, FAC_OPERATED_THIS_YR &lt;chr&gt;,\n#   FAC_OP_PER_BEGIN_DT &lt;chr&gt;, FAC_OP_PER_END_DT &lt;chr&gt;,\n#   FAC_PAR_CORP_NAME &lt;chr&gt;, FAC_PAR_CORP_BUS_ADDR &lt;chr&gt;,\n#   FAC_PAR_CORP_CITY &lt;chr&gt;, FAC_PAR_CORP_STATE &lt;chr&gt;, FAC_PAR_CORP_ZIP &lt;chr&gt;,\n#   REPT_PREP_NAME &lt;chr&gt;, SUBMITTED_DT &lt;chr&gt;, REV_REPT_PREP_NAME &lt;chr&gt;,\n#   REVISED_DT &lt;chr&gt;, CORRECTED_DT &lt;chr&gt;, LICENSE_NO &lt;chr&gt;,\n#   LICENSE_EFF_DATE &lt;chr&gt;, LICENSE_EXP_DATE &lt;chr&gt;, LICENSE_STATUS &lt;chr&gt;, …\n\n\nSome data sets also have metadata in the last rows, so let’s check for that here:\n\ntail(sheet)\n\n# A tibble: 6 × 355\n  Description FAC_NO    FAC_NAME         FAC_STR_ADDR FAC_CITY FAC_ZIP FAC_PHONE\n  &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;            &lt;chr&gt;        &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;    \n1 &lt;NA&gt;        106574010 SUTTER DAVIS HO… 2000 SUTTER… DAVIS    95616   (530) 75…\n2 &lt;NA&gt;        106580996 ADVENTIST HEALT… 726 FOURTH … MARYSVI… 95901   530-751-…\n3 &lt;NA&gt;        206100718 COMMUNITY SUBAC… 3003 NORTH … FRESNO   93703   559-459-…\n4 &lt;NA&gt;        206274027 WESTLAND HOUSE   100 BARNET … MONTEREY 93940   83162453…\n5 &lt;NA&gt;        206351814 HAZEL HAWKINS M… 900 SUNSET … HOLLIST… 95023   831-635-…\n6 &lt;NA&gt;        &lt;NA&gt;      n = 506          &lt;NA&gt;         &lt;NA&gt;     &lt;NA&gt;    &lt;NA&gt;     \n# ℹ 348 more variables: FAC_ADMIN_NAME &lt;chr&gt;, FAC_OPERATED_THIS_YR &lt;chr&gt;,\n#   FAC_OP_PER_BEGIN_DT &lt;chr&gt;, FAC_OP_PER_END_DT &lt;chr&gt;,\n#   FAC_PAR_CORP_NAME &lt;chr&gt;, FAC_PAR_CORP_BUS_ADDR &lt;chr&gt;,\n#   FAC_PAR_CORP_CITY &lt;chr&gt;, FAC_PAR_CORP_STATE &lt;chr&gt;, FAC_PAR_CORP_ZIP &lt;chr&gt;,\n#   REPT_PREP_NAME &lt;chr&gt;, SUBMITTED_DT &lt;chr&gt;, REV_REPT_PREP_NAME &lt;chr&gt;,\n#   REVISED_DT &lt;chr&gt;, CORRECTED_DT &lt;chr&gt;, LICENSE_NO &lt;chr&gt;,\n#   LICENSE_EFF_DATE &lt;chr&gt;, LICENSE_EXP_DATE &lt;chr&gt;, LICENSE_STATUS &lt;chr&gt;, …\n\n\nSure enough, the last row contains what appears to be a count of the hospitals rather than a hospital. Let’s remove it by calling head with a negative number of elements, which removes that many elements from the end:\n\nsheet = head(sheet, -1)\ntail(sheet)\n\n# A tibble: 6 × 355\n  Description FAC_NO    FAC_NAME         FAC_STR_ADDR FAC_CITY FAC_ZIP FAC_PHONE\n  &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;            &lt;chr&gt;        &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;    \n1 &lt;NA&gt;        106571086 WOODLAND MEMORI… 1325 COTTON… WOODLAND 95695   (530) 66…\n2 &lt;NA&gt;        106574010 SUTTER DAVIS HO… 2000 SUTTER… DAVIS    95616   (530) 75…\n3 &lt;NA&gt;        106580996 ADVENTIST HEALT… 726 FOURTH … MARYSVI… 95901   530-751-…\n4 &lt;NA&gt;        206100718 COMMUNITY SUBAC… 3003 NORTH … FRESNO   93703   559-459-…\n5 &lt;NA&gt;        206274027 WESTLAND HOUSE   100 BARNET … MONTEREY 93940   83162453…\n6 &lt;NA&gt;        206351814 HAZEL HAWKINS M… 900 SUNSET … HOLLIST… 95023   831-635-…\n# ℹ 348 more variables: FAC_ADMIN_NAME &lt;chr&gt;, FAC_OPERATED_THIS_YR &lt;chr&gt;,\n#   FAC_OP_PER_BEGIN_DT &lt;chr&gt;, FAC_OP_PER_END_DT &lt;chr&gt;,\n#   FAC_PAR_CORP_NAME &lt;chr&gt;, FAC_PAR_CORP_BUS_ADDR &lt;chr&gt;,\n#   FAC_PAR_CORP_CITY &lt;chr&gt;, FAC_PAR_CORP_STATE &lt;chr&gt;, FAC_PAR_CORP_ZIP &lt;chr&gt;,\n#   REPT_PREP_NAME &lt;chr&gt;, SUBMITTED_DT &lt;chr&gt;, REV_REPT_PREP_NAME &lt;chr&gt;,\n#   REVISED_DT &lt;chr&gt;, CORRECTED_DT &lt;chr&gt;, LICENSE_NO &lt;chr&gt;,\n#   LICENSE_EFF_DATE &lt;chr&gt;, LICENSE_EXP_DATE &lt;chr&gt;, LICENSE_STATUS &lt;chr&gt;, …\n\n\nThere are a lot of columns in sheet, so let’s make a list of just a few that we’ll use for analysis. We’ll keep:\n\nColumns with facility name, location, and operating status\nAll of the columns whose names start with TOT, because these are totals for number of beds, number of census-days, and so on.\nColumns about acute respiratory beds, with names that contain RESPIRATORY, because they might also be relevant.\n\nWe can use the stringr package, which provides string processing functions, to help us get the TOT and RESPIRATORY column names. If it’s your first time using the stringr package, you’ll have to install it:\ninstall.packages(\"stringr\")\nWe can use stringr’s str_starts function to check whether column names start with TOT and its str_detect function to check whether column names contain RESPIRATORY:\n\nlibrary(\"stringr\")\n\nWarning: package 'stringr' was built under R version 4.5.2\n\nfacility_cols = c(\n  \"FAC_NAME\", \"FAC_CITY\", \"FAC_ZIP\", \"FAC_OPERATED_THIS_YR\", \"FACILITY_LEVEL\",\n  \"TEACH_HOSP\", \"COUNTY\", \"PRIN_SERVICE_TYPE\"\n)\n\ncols = names(sheet)\ntot_cols = cols[str_starts(cols, \"TOT\")]\nrespiratory_cols = cols[str_detect(cols, \"RESPIRATORY\")]\n\nThe TOT and RESPIRATORY columns all contain numbers, but the element type is character, so let’s cast to numbers them with as.numeric. We’ll also add a column with the year:\n\nnumeric_cols = c(tot_cols, respiratory_cols)\nsheet[numeric_cols] = lapply(sheet[numeric_cols], as.numeric)\n\nsheet$year = 2023\n\nNow we’ll select only the columns we identified as useful:\n\nsheet = sheet[c(\"year\", facility_cols, numeric_cols)]\n\nhead(sheet)\n\n# A tibble: 6 × 22\n   year FAC_NAME FAC_CITY FAC_ZIP FAC_OPERATED_THIS_YR FACILITY_LEVEL TEACH_HOSP\n  &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;                &lt;chr&gt;          &lt;chr&gt;     \n1  2023 ALAMEDA… ALAMEDA  94501   Yes                  Parent Facili… No        \n2  2023 ALTA BA… BERKELEY 94705   Yes                  Parent Facili… No        \n3  2023 UCSF BE… OAKLAND  94609   Yes                  Parent Facili… No        \n4  2023 FAIRMON… SAN LEA… 94578   Yes                  Consolidated … No        \n5  2023 ALTA BA… BERKELEY 94704   Yes                  Consolidated … No        \n6  2023 HIGHLAN… OAKLAND  94602   Yes                  Parent Facili… No        \n# ℹ 15 more variables: COUNTY &lt;chr&gt;, PRIN_SERVICE_TYPE &lt;chr&gt;,\n#   TOT_LIC_BEDS &lt;dbl&gt;, TOT_LIC_BED_DAYS &lt;dbl&gt;, TOT_DISCHARGES &lt;dbl&gt;,\n#   TOT_CEN_DAYS &lt;dbl&gt;, TOT_ALOS_CY &lt;dbl&gt;, TOT_ALOS_PY &lt;dbl&gt;,\n#   ACUTE_RESPIRATORY_CARE_LIC_BEDS &lt;dbl&gt;,\n#   ACUTE_RESPIRATORY_CARE_LIC_BED_DAYS &lt;dbl&gt;,\n#   ACUTE_RESPIRATORY_CARE_DISCHARGES &lt;dbl&gt;,\n#   ACUTE_RESPIRATORY_CARE_INTRA_TRANSFERS &lt;dbl&gt;, …\n\n\nLowercase names are easier to type, so let’s also make all of the names lowercase with stringr’s str_to_lower function:\n\nnames(sheet) = str_to_lower(names(sheet))\nhead(sheet)\n\n# A tibble: 6 × 22\n   year fac_name fac_city fac_zip fac_operated_this_yr facility_level teach_hosp\n  &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;                &lt;chr&gt;          &lt;chr&gt;     \n1  2023 ALAMEDA… ALAMEDA  94501   Yes                  Parent Facili… No        \n2  2023 ALTA BA… BERKELEY 94705   Yes                  Parent Facili… No        \n3  2023 UCSF BE… OAKLAND  94609   Yes                  Parent Facili… No        \n4  2023 FAIRMON… SAN LEA… 94578   Yes                  Consolidated … No        \n5  2023 ALTA BA… BERKELEY 94704   Yes                  Consolidated … No        \n6  2023 HIGHLAN… OAKLAND  94602   Yes                  Parent Facili… No        \n# ℹ 15 more variables: county &lt;chr&gt;, prin_service_type &lt;chr&gt;,\n#   tot_lic_beds &lt;dbl&gt;, tot_lic_bed_days &lt;dbl&gt;, tot_discharges &lt;dbl&gt;,\n#   tot_cen_days &lt;dbl&gt;, tot_alos_cy &lt;dbl&gt;, tot_alos_py &lt;dbl&gt;,\n#   acute_respiratory_care_lic_beds &lt;dbl&gt;,\n#   acute_respiratory_care_lic_bed_days &lt;dbl&gt;,\n#   acute_respiratory_care_discharges &lt;dbl&gt;,\n#   acute_respiratory_care_intra_transfers &lt;dbl&gt;, …\n\n\nWe’ve successfully read one of the files! Since the 2018-2023 files all have the same format, it’s likely that we can use almost the same code for all of them. Any time you want to reuse code, it’s a sign that you should write a function, so that’s what we’ll do. We’ll take all of the code we have so far and put it in the body of a function called read_hospital_data, adding some comments to indicate the steps:\nread_hospital_data = function() {\n  # Read the 2nd sheet of the file.\n  path = \"data/ca_hospitals/hosp23_util_data_final.xlsx\"\n  sheet = read_excel(path, sheet = 2)\n\n  # Remove the first 4 and last row.\n  sheet = sheet[-(1:4), ]\n  sheet = head(sheet, -1)\n\n  # Select only a few columns of interest.\n  facility_cols = c(\n    \"FAC_NAME\", \"FAC_CITY\", \"FAC_ZIP\", \"FAC_OPERATED_THIS_YR\",\n    \"FACILITY_LEVEL\", \"TEACH_HOSP\", \"COUNTY\", \"PRIN_SERVICE_TYPE\"\n  )\n\n  cols = names(sheet)\n  tot_cols = cols[str_starts(cols, \"TOT\")]\n  respiratory_cols = cols[str_detect(cols, \"RESPIRATORY\")]\n\n  numeric_cols = c(tot_cols, respiratory_cols)\n  sheet[numeric_cols] = lapply(sheet[numeric_cols], as.numeric)\n\n  sheet$year = 2023\n\n  sheet = sheet[c(\"year\", facility_cols, numeric_cols)]\n\n  # Rename the columns to lowercase.\n  names(sheet) = str_to_lower(names(sheet))\n\n  sheet\n}\nAs it is, the function still only reads the 2023 file. The other files have different paths, so the first thing we need to do is make the path variable a parameter. We’ll also make a year parameter, for the year value inserted as a column:\n\nread_hospital_data = function(path, year) {\n  # Read the 2nd sheet of the file.\n  sheet = read_excel(path, sheet = 2)\n\n  # Remove the first 4 and last row.\n  sheet = sheet[-(1:4), ]\n  sheet = head(sheet, -1)\n\n  # Select only a few columns of interest.\n  facility_cols = c(\n    \"FAC_NAME\", \"FAC_CITY\", \"FAC_ZIP\", \"FAC_OPERATED_THIS_YR\",\n    \"FACILITY_LEVEL\", \"TEACH_HOSP\", \"COUNTY\", \"PRIN_SERVICE_TYPE\"\n  )\n\n  cols = names(sheet)\n  tot_cols = cols[str_starts(cols, \"TOT\")]\n  respiratory_cols = cols[str_detect(cols, \"RESPIRATORY\")]\n\n  numeric_cols = c(tot_cols, respiratory_cols)\n  sheet[numeric_cols] = lapply(sheet[numeric_cols], as.numeric)\n\n  sheet$year = year\n\n  sheet = sheet[c(\"year\", facility_cols, numeric_cols)]\n\n  # Rename the columns to lowercase.\n  names(sheet) = str_to_lower(names(sheet))\n\n  sheet\n}\n\nTest the function out on a few of the files to make sure it works correctly:\n\nhead(\n  read_hospital_data(\n    \"data/ca_hospitals/hosp23_util_data_final.xlsx\", 2023\n  )\n)\n\nNew names:\n• `` -&gt; `...355`\n\n\n# A tibble: 6 × 22\n   year fac_name fac_city fac_zip fac_operated_this_yr facility_level teach_hosp\n  &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;                &lt;chr&gt;          &lt;chr&gt;     \n1  2023 ALAMEDA… ALAMEDA  94501   Yes                  Parent Facili… No        \n2  2023 ALTA BA… BERKELEY 94705   Yes                  Parent Facili… No        \n3  2023 UCSF BE… OAKLAND  94609   Yes                  Parent Facili… No        \n4  2023 FAIRMON… SAN LEA… 94578   Yes                  Consolidated … No        \n5  2023 ALTA BA… BERKELEY 94704   Yes                  Consolidated … No        \n6  2023 HIGHLAN… OAKLAND  94602   Yes                  Parent Facili… No        \n# ℹ 15 more variables: county &lt;chr&gt;, prin_service_type &lt;chr&gt;,\n#   tot_lic_beds &lt;dbl&gt;, tot_lic_bed_days &lt;dbl&gt;, tot_discharges &lt;dbl&gt;,\n#   tot_cen_days &lt;dbl&gt;, tot_alos_cy &lt;dbl&gt;, tot_alos_py &lt;dbl&gt;,\n#   acute_respiratory_care_lic_beds &lt;dbl&gt;,\n#   acute_respiratory_care_lic_bed_days &lt;dbl&gt;,\n#   acute_respiratory_care_discharges &lt;dbl&gt;,\n#   acute_respiratory_care_intra_transfers &lt;dbl&gt;, …\n\n\n\nhead(\n  read_hospital_data(\n    \"data/ca_hospitals/hosp21_util_data_final-revised-06.15.2023.xlsx\", 2021\n  )\n)\n\n# A tibble: 6 × 22\n   year fac_name fac_city fac_zip fac_operated_this_yr facility_level teach_hosp\n  &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;                &lt;chr&gt;          &lt;chr&gt;     \n1  2021 ALAMEDA… ALAMEDA  94501   Yes                  Parent Facili… No        \n2  2021 ALTA BA… BERKELEY 94705   Yes                  Parent Facili… No        \n3  2021 UCSF BE… OAKLAND  94609   Yes                  Parent Facili… No        \n4  2021 FAIRMON… SAN LEA… 94578   Yes                  Consolidated … No        \n5  2021 ALTA BA… BERKELEY 94704   Yes                  Consolidated … No        \n6  2021 HIGHLAN… OAKLAND  94602   Yes                  Parent Facili… No        \n# ℹ 15 more variables: county &lt;chr&gt;, prin_service_type &lt;chr&gt;,\n#   tot_lic_beds &lt;dbl&gt;, tot_lic_bed_days &lt;dbl&gt;, tot_discharges &lt;dbl&gt;,\n#   tot_cen_days &lt;dbl&gt;, tot_alos_cy &lt;dbl&gt;, tot_alos_py &lt;dbl&gt;,\n#   acute_respiratory_care_lic_beds &lt;dbl&gt;,\n#   acute_respiratory_care_lic_bed_days &lt;dbl&gt;,\n#   acute_respiratory_care_discharges &lt;dbl&gt;,\n#   acute_respiratory_care_intra_transfers &lt;dbl&gt;, …\n\n\nThe function appears to work correctly for two of the files, so let’s work towards trying it on all of the 2018-2023 files. We can use the built-in list.files function to get the paths to the files by setting full.names = TRUE (otherwise it just returns the names of the files):\n\npaths = list.files(\"data/ca_hospitals/\", full.names = TRUE)\npaths\n\n[1] \"data/ca_hospitals//hosp16_util_data_final.xlsx\"                   \n[2] \"data/ca_hospitals//hosp17_util_data_final.xlsx\"                   \n[3] \"data/ca_hospitals//hosp18_util_data_final.xlsx\"                   \n[4] \"data/ca_hospitals//hosp19_util_data_final.xlsx\"                   \n[5] \"data/ca_hospitals//hosp20_util_data_final-revised-06.15.2023.xlsx\"\n[6] \"data/ca_hospitals//hosp21_util_data_final-revised-06.15.2023.xlsx\"\n[7] \"data/ca_hospitals//hosp22_util_data_final_revised_11.28.2023.xlsx\"\n[8] \"data/ca_hospitals//hosp23_util_data_final.xlsx\"                   \n\n\nIn addition to the file paths, we also need the year for each file. Fortunately, the last two digits of the year are included in each file’s name. We can write a function to get these. We’ll use R’s built-in basename function to get the file names from the paths, and stringr’s str_sub function to get a substring (the year) from the name:\n\nget_hospital_year = function(path) {\n  name = basename(path)\n  year = str_sub(name, 5, 6)\n  as.integer(year) + 2000\n}\n\nget_hospital_year(paths[1])\n\n[1] 2016\n\n\n\nWith that done, we need to read the pre-2018 files. In the 2018 file, the fourth sheet is a crosswalk that shows which columns in the pre-2018 files correspond to columns in the later files. Let’s write some code to read the crosswalk. First, read the sheet:\n\npath = \"data/ca_hospitals/hosp18_util_data_final.xlsx\"\ncwalk = read_excel(path, sheet = 4)\nhead(cwalk)\n\n# A tibble: 6 × 6\n   Page  Line Column `SIERA Dataset Header (2018)` ALIRTS Dataset Header…¹ Notes\n  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;                         &lt;chr&gt;                   &lt;chr&gt;\n1     1     1      1 FAC_NAME                      FAC_NAME                &lt;NA&gt; \n2     1     2      1 FAC_NO                        OSHPD_ID                &lt;NA&gt; \n3     1     3      1 FAC_STR_ADDR                  &lt;NA&gt;                    Addr…\n4     1     4      1 FAC_CITY                      FAC_CITY                &lt;NA&gt; \n5     1     5      1 FAC_ZIP                       FAC_ZIPCODE             &lt;NA&gt; \n6     1     6      1 FAC_PHONE                     FAC_PHONE               &lt;NA&gt; \n# ℹ abbreviated name: ¹​`ALIRTS Dataset Header (2017)`\n\n\nThe new and old column names are in the fourth and fifth columns, respectively, so we’ll get just those:\n\ncwalk = cwalk[, 4:5]\nhead(cwalk)\n\n# A tibble: 6 × 2\n  `SIERA Dataset Header (2018)` `ALIRTS Dataset Header (2017)`\n  &lt;chr&gt;                         &lt;chr&gt;                         \n1 FAC_NAME                      FAC_NAME                      \n2 FAC_NO                        OSHPD_ID                      \n3 FAC_STR_ADDR                  &lt;NA&gt;                          \n4 FAC_CITY                      FAC_CITY                      \n5 FAC_ZIP                       FAC_ZIPCODE                   \n6 FAC_PHONE                     FAC_PHONE                     \n\n\nFinally, let’s turn the cwalk data frame into a named vector. We’ll make the old column names the names and the new column names the elements. This way we can easily look up the new name for any of the old columns by indexing. Some of the column names in cwalk have extra spaces at the end, so we’ll use stringr’s str_trim function to remove them:\n\ncwalk_names = str_trim(cwalk[[2]])\ncwalk = str_trim(cwalk[[1]])\nnames(cwalk) = cwalk_names\n\nhead(cwalk)\n\n      FAC_NAME       OSHPD_ID           &lt;NA&gt;       FAC_CITY    FAC_ZIPCODE \n    \"FAC_NAME\"       \"FAC_NO\" \"FAC_STR_ADDR\"     \"FAC_CITY\"      \"FAC_ZIP\" \n     FAC_PHONE \n   \"FAC_PHONE\" \n\n\nWe can now define a new version of the read_hospital_data function that uses the crosswalk to change the column names when year &lt; 2018. Let’s also change function to exclude columns with ALOS in the name, because they have no equivalent in the pre-2018 files:\n\nread_hospital_data = function(path, year) {\n  # Read the 2nd sheet of the file.\n  sheet = read_excel(path, sheet = 2)\n\n  # Remove the first 4 and last row.\n  sheet = sheet[-(1:4), ]\n  sheet = head(sheet, -1)\n\n  # Fix pre-2018 column names.\n  if (year &lt; 2018) {\n    new_names = cwalk[names(sheet)]\n    new_names[is.na(new_names)] = names(sheet)[is.na(new_names)]\n    names(sheet) = new_names\n  }\n\n  # Select only a few columns of interest.\n  facility_cols = c(\n    \"FAC_NAME\", \"FAC_CITY\", \"FAC_ZIP\", \"FAC_OPERATED_THIS_YR\",\n    \"FACILITY_LEVEL\", \"TEACH_HOSP\", \"COUNTY\", \"PRIN_SERVICE_TYPE\"\n  )\n\n  cols = names(sheet)\n  tot_cols = cols[str_starts(cols, \"TOT\")]\n  respiratory_cols = cols[str_detect(cols, \"RESPIRATORY\")]\n\n  numeric_cols = c(tot_cols, respiratory_cols)\n  numeric_cols = numeric_cols[!str_detect(numeric_cols, \"ALOS\")]\n  sheet[numeric_cols] = lapply(sheet[numeric_cols], as.numeric)\n\n  sheet$year = year\n\n  sheet = sheet[c(\"year\", facility_cols, numeric_cols)]\n\n  # Rename the columns to lowercase.\n  names(sheet) = str_to_lower(names(sheet))\n\n  sheet\n}\n\nNow we can test the function on all of the files. We’ll use a for-loop to iterate over all of the paths, read the data for each one, and store the result in a list:\n\nhosps = list()\n\nfor (i in seq_along(paths)) {\n  path = paths[[i]]\n  year = get_hospital_year(path)\n  hosp = read_hospital_data(path, year)\n  hosps[[i]] = hosp\n}\n\nNew names:\nNew names:\nNew names:\n• `PSY_CENS_PATIENT_TOTL` -&gt; `PSY_CENS_PATIENT_TOTL...126`\n• `PSY_CENS_PATIENT_TOTL` -&gt; `PSY_CENS_PATIENT_TOTL...130`\n• `PSY_CENS_PATIENT_TOTL` -&gt; `PSY_CENS_PATIENT_TOTL...141`\n\nlength(hosps)\n\n[1] 8\n\n\nWe can use the do.call and rbind functions to bind the rows, or stack, the list of data frames:\n\nhosps = do.call(rbind, hosps)\nhead(hosps)\n\n# A tibble: 6 × 18\n   year fac_name fac_city fac_zip fac_operated_this_yr facility_level teach_hosp\n  &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;                &lt;chr&gt;          &lt;chr&gt;     \n1  2016 ALTA BA… BERKELEY 94705   Yes                  Parent Facili… NO        \n2  2016 CHILDRE… OAKLAND  94609   Yes                  Parent Facili… NO        \n3  2016 THUNDER… OAKLAND  94609   Yes                  Parent Facili… NO        \n4  2016 FAIRMON… SAN LEA… 94578   Yes                  Consolidated … NO        \n5  2016 ALTA BA… BERKELEY 94704   Yes                  Consolidated … NO        \n6  2016 HIGHLAN… OAKLAND  94602   Yes                  Parent Facili… YES       \n# ℹ 11 more variables: county &lt;chr&gt;, prin_service_type &lt;chr&gt;,\n#   tot_lic_beds &lt;dbl&gt;, tot_lic_bed_days &lt;dbl&gt;, tot_discharges &lt;dbl&gt;,\n#   tot_cen_days &lt;dbl&gt;, acute_respiratory_care_lic_beds &lt;dbl&gt;,\n#   acute_respiratory_care_lic_bed_days &lt;dbl&gt;,\n#   acute_respiratory_care_discharges &lt;dbl&gt;,\n#   acute_respiratory_care_intra_transfers &lt;dbl&gt;,\n#   acute_respiratory_care_cen_days &lt;dbl&gt;\n\n\nWe’ve finally got all of the data in a single data frame!\nTo begin to address whether hospital utilization changed in 2020, let’s make a bar plot of total census-days:\n\nlibrary(\"ggplot2\")\n\n(\n    ggplot(hosps) +\n    aes(x = year, weight = tot_cen_days) +\n    geom_bar()\n)\n\n\n\n\n\n\n\n\nAccording to the plot, total census-days was slightly lower in 2020 than in 2019. This is a bit surprising, but it’s possible that California hospitals typically operate close to maximum capacity and were not able to substantially increase the number of beds in 2020 in response to the COVID-19 pandemic. You can use other columns in the data set, such as tot_lic_beds or tot_lic_bed_days, to check this.\nLet’s also look at census-days for acute respiratory care:\n\n(\n    ggplot(hosps) +\n    aes(x = year, weight = acute_respiratory_care_cen_days) +\n    geom_bar()\n)\n\n\n\n\n\n\n\n\nIn this plot, there’s a clear uptick in census-days in 2020, and then an interesting decrease to below 2019 levels in the years following. Again, you could use other columns in the data set to investigate this further. We’ll end this case study here, having accomplished the difficult task of reading the data and the much easier task of doing a cursory preliminary analysis of the data.",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Organizing Code</span>"
    ]
  },
  {
    "objectID": "chapters/04_organizing_code.html#exercises",
    "href": "chapters/04_organizing_code.html#exercises",
    "title": "4  Organizing Code",
    "section": "4.5 Exercises",
    "text": "4.5 Exercises\n\n4.5.1 Exercise\n\nWrite a function is_leap that detects leap years. The input to your function should be a numeric year and the output should be a logical value. A year is a leap year if either of these conditions is true:\n\nIt is divisible by 4 and not 100\nIt is divisible by 400\n\nThat means the years 2004 and 2000 are leap years, but the year 2200 is not. Test your function on these years, as well as the years 400 and 1997.\nHint: the modulo operator %% returns the remainder after dividing a number, so for example 4 %% 3 returns 1.\nIs your is_leap function vectorized (see Section 2.1.3)? Explain how you can tell. If it’s not vectorized, make a modified version of the function that is.\n\n\n\n\n4.5.2 Exercise\n\n\n\n\n\n\nNote\n\n\n\nThis exercise is meant to challenge you and is quite difficult compared to the previous ones. Don’t get disheartened, and if you’re able to complete it, excellent work!\n\n\nCreate a function compute_day which uses the Doomsday algorithm to compute the day of week for any given date in the 1900s. The function’s parameters should be year, month, and day. The function’s return value should be a day of week, as a string (for example, \"Saturday\").",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Organizing Code</span>"
    ]
  },
  {
    "objectID": "chapters/05_appendix.html",
    "href": "chapters/05_appendix.html",
    "title": "5  Appendix",
    "section": "",
    "text": "5.1 More About Comparisons",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Appendix</span>"
    ]
  },
  {
    "objectID": "chapters/05_appendix.html#sec-more-about-comparisons",
    "href": "chapters/05_appendix.html#sec-more-about-comparisons",
    "title": "5  Appendix",
    "section": "",
    "text": "5.1.1 Equality\nThe == operator is the primary way to test whether two values are equal, as explained in Section 1.3.3. Nonetheless, equality can be defined in many different ways, especially when dealing with computers. As a result, R also provides several different functions to test for different kinds of equality. This describes tests of equality in more detail, and also describes some other important details of comparisons.\n\n5.1.1.1 The == Operator\nThe == operator tests whether its two arguments have the exact same representation as a binary number in your computer’s memory. Before testing the arguments, the operator applies R’s rules for vectorization (Section 2.1.3), recycling (Section 2.1.4), and implicit coercion (Section 2.2.2). Until you’ve fully internalized these three rules, some results from the equality operator may seem surprising. For example:\n\n# Recycling:\nc(1, 2) == c(1, 2, 1, 2)\n\n[1] TRUE TRUE TRUE TRUE\n\n# Implicit coercion:\nTRUE == 1\n\n[1] TRUE\n\nTRUE == \"TRUE\"\n\n[1] TRUE\n\n1 == \"TRUE\"\n\n[1] FALSE\n\n\nThe length of the result from the equality operator is usually the same as its longest argument (with some exceptions).\n\n\n5.1.1.2 The all.equal Function\nThe all.equal function tests whether its two arguments are equal up to some acceptable difference called a tolerance. Computer representations for decimal numbers are inherently imprecise, so it’s necessary to allow for very small differences between computed numbers. For example:\n\nx = 0.5 - 0.3\ny = 0.3 - 0.1\n\n# FALSE on most machines:\nx == y\n\n[1] FALSE\n\n# TRUE:\nall.equal(x, y)\n\n[1] TRUE\n\n\nThe all.equal function does not apply R’s rules for vectorization, recycling, or implicit coercion. The function returns TRUE when the arguments are equal, and returns a string summarizing the differences when they are not. For instance:\n\nall.equal(1, c(1, 2, 1))\n\n[1] \"Numeric: lengths (1, 3) differ\"\n\n\nThe all.equal function is often used together with the isTRUE function, which tests whether the result is TRUE:\n\nall.equal(3, 4)\n\n[1] \"Mean relative difference: 0.3333333\"\n\nisTRUE(all.equal(3, 4))\n\n[1] FALSE\n\n\nYou should generally use the all.equal function when you want to compare decimal numbers.\n\n\n5.1.1.3 The identical Function\nThe identical function checks whether its arguments are completely identical, including their metadata (names, dimensions, and so on). For instance:\n\nx = list(a = 1)\ny = list(a = 1)\nz = list(1)\n\nidentical(x, y)\n\n[1] TRUE\n\nidentical(x, z)\n\n[1] FALSE\n\n\nThe identical function does not apply R’s rules for vectorization, recycling, or implicit coercion. The result is always a single logical value.\nYou’ll generally use the identical function to compare non-vector objects such as lists or data frames. The function also works for vectors, but most of the time the equality operator == is sufficient.\n\n\n\n5.1.2 The %in% Operator\nAnother common comparison is to check whether elements of one vector are contained in another vector at any position. For instance, suppose you want to check whether 1 or 2 appear anywhere in a longer vector x. Here’s how to do it:\n\nx = c(3, 4, 2, 7, 3, 7)\nc(1, 2) %in% x\n\n[1] FALSE  TRUE\n\n\nR returns FALSE for the 1 because there’s no 1 in x, and returns TRUE for the 2 because there is a 2 in x.\nNotice that this is different from comparing with the equality operator ==. If you use use the equality operator, the shorter vector is recycled until its length matches the longer one, and then compared element-by-element. For the example, this means only the elements at odd-numbered positions are compared to 1, and only the elements at even-numbered positions are compared to 2:\n\nc(1, 2) == x\n\n[1] FALSE FALSE FALSE FALSE FALSE FALSE\n\n\n\n\n5.1.3 Summarizing Comparisons\nThe comparison operators are vectorized, so they compare their arguments element-by-element:\n\nc(1, 2, 3) &lt; c(1, 3, -3)\n\n[1] FALSE  TRUE FALSE\n\nc(\"he\", \"saw\", \"her\") == c(\"she\", \"saw\", \"him\")\n\n[1] FALSE  TRUE FALSE\n\n\nWhat if you want to summarize whether all the elements in a vector are equal (or unequal)? You can use the all function on any logical vector to get a summary. The all function takes a vector of logical values and returns TRUE if all of them are TRUE, and returns FALSE otherwise:\n\nall(c(1, 2, 3) &lt; c(1, 3, -3))\n\n[1] FALSE\n\n\nThe related any function returns TRUE if any one element is TRUE, and returns FALSE otherwise:\n\nany(c(\"hi\", \"hello\") == c(\"hi\", \"bye\"))\n\n[1] TRUE\n\n\n\n\n5.1.4 Other Pitfalls\nNew programmers sometimes incorrectly think they need to append == TRUE to their comparisons. This is redundant, makes your code harder to understand, and wastes computational time. Comparisons already return logical values. If the result of the comparison is TRUE, then TRUE == TRUE is again just TRUE. If the result is FALSE, then FALSE == TRUE is again just FALSE. Likewise, if you want to invert a condition, choose an appropriate operator rather than appending == FALSE.",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Appendix</span>"
    ]
  },
  {
    "objectID": "chapters/05_appendix.html#sec-the-drop-parameter",
    "href": "chapters/05_appendix.html#sec-the-drop-parameter",
    "title": "5  Appendix",
    "section": "5.2 The drop Parameter",
    "text": "5.2 The drop Parameter\nIf you use two-dimensional indexing with [ to select exactly one column, you get a vector:\n\nresult = terns[1:3, 2]\nclass(result)\n\n[1] \"character\"\n\n\nThe container is dropped, even though the indexing operator [ usually keeps containers. This also occurs for matrices. You can control this behavior with the drop parameter:\n\nresult = terns[1:3, 2, drop = FALSE]\nclass(result)\n\n[1] \"data.frame\"\n\n\nThe default is drop = TRUE.",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Appendix</span>"
    ]
  },
  {
    "objectID": "chapters/97_where-to-learn-more.html",
    "href": "chapters/97_where-to-learn-more.html",
    "title": "Where to Learn More",
    "section": "",
    "text": "This reader provides an introduction to the basics of R, but there’s lots more to learn!\nDataLab’s Intermediate R workshops are designed specifically for learners who have taken this workshop and want to learn more about R.\nDataLab also teaches many other workshops about data science. If you’re not sure where to start or how these workshops all fit together, take a look at our Reproducibility Principles and Practices reader.\nIf you want to learn more about how to design clear and effective data visualizations, take a look at our Principles of Data Visualization reader.\nMany R and data science learning resources are available for free online or through the library. Here are a few books created by others that we’ve found useful:\n\nR for Data Science by Wickham & Grolemund. An introduction to using R for data science, but with a very heavy focus on Tidyverse packages.\nThe Art of R Programming by Matloff. A general reference on R programming.\nAdvanced R by Wickham. A description of how R works at a deeper level, with many examples of R features that are important for package/software development.\nThe R Inferno by Burns. A discussion of the most difficult and confusing parts of R.\n\nFinally, here are some websites popular in the R community:\n\nR Graph Gallery. Examples of graphs you can make in R, with code.\nRStudio Cheat Sheets. Cheat sheets for a variety of R tools and packages.\nR Weekly. Weekly updates about what’s happening in the R community.\nR-bloggers. An aggregator for blog posts about R.",
    "crumbs": [
      "Where to Learn More"
    ]
  },
  {
    "objectID": "chapters/98_acknowledgements.html",
    "href": "chapters/98_acknowledgements.html",
    "title": "Acknowledgements",
    "section": "",
    "text": "Nick’s Acknowledgements\nSincere thanks to the rest of the DataLab team, for support and many thoughtful discussions about data science!\nSincere thanks to:\nDuncan Temple Lang, whose guidance and encouragement has had outsize influence on the way I think about and teach data science.\nDeb Nolan, for being a role model as a data scientist, educator, and academic. Special thanks for the opportunity to collaborate on STAT 33 (on which this reader and workshop is loosely based) at Cal.\nLast but not least, every former student that asked questions or offered feedback when I taught.",
    "crumbs": [
      "Acknowledgements"
    ]
  },
  {
    "objectID": "chapters/99_assessment.html",
    "href": "chapters/99_assessment.html",
    "title": "Assessment",
    "section": "",
    "text": "If you are taking this workshop to complete a GradPathways Pathway, you can download the assessment instructions here.",
    "crumbs": [
      "Assessment"
    ]
  }
]